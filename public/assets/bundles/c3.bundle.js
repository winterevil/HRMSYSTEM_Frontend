((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.c3=e()})(this,function(){function i(t,e){var n=this;n.component=t,n.params=e||{},n.d3=t.d3,n.scale=n.d3.scale.linear(),n.range,n.orient="bottom",n.innerTickSize=6,n.outerTickSize=this.params.withOuterTick?6:0,n.tickPadding=3,n.tickValues=null,n.tickFormat,n.tickArguments,n.tickOffset=0,n.tickCulling=!0,n.tickCentered,n.tickTextCharSize,n.tickTextRotate=n.params.tickTextRotate,n.tickLength,n.axis=n.generateAxis()}function e(t){var e=this.internal=new n(this);e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function e(n,i,r){Object.keys(n).forEach(function(t){i[t]=n[t].bind(r),0<Object.keys(n[t]).length&&e(n[t],i[t],r)})}(w,this,this)}function n(t){var e=this;e.d3=window.d3||("undefined"!=typeof require?require("d3"):void 0),e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}function _(t){return t||0===t}function c(t){return"function"==typeof t}function a(t){return Array.isArray(t)}function o(t){return"string"==typeof t}function s(t){return void 0===t}function l(t){return void 0!==t}function r(t){return 10*Math.ceil(t/10)}function u(t){return Math.ceil(t)+.5}function V(t){return t[1]-t[0]}function h(t){return null==t||o(t)&&0===t.length||"object"===(void 0===t?"undefined":m(t))&&0===Object.keys(t).length}function y(t){return!S.isEmpty(t)}function F(t,e,n){return void 0!==t[e]?t[e]:n}function d(e,n){var i=!1;return Object.keys(e).forEach(function(t){e[t]===n&&(i=!0)}),i}function g(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function x(t){var e=t.getBoundingClientRect();return{x:(t=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)])[0].x,y:Math.min(t[0].y,t[1].y),width:e.width,height:e.height}}var f,p,z={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=((p=i.prototype).axisX=function(t,e,n){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"})},p.axisY=function(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})},p.scaleExtent=function(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]},p.generateTicks=function(t){var e,n,i=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)i.push(e);return 0<i.length&&0<i[0]&&i.unshift(i[0]-(i[1]-i[0])),i},p.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},p.textFormatted=function(t){t=this.tickFormat?this.tickFormat(t):t;return void 0!==t?t:""},p.updateRange=function(){var t=this;return t.range=t.scale.rangeExtent?t.scale.rangeExtent():t.scaleExtent(t.scale.range()),t.range},p.updateTickTextCharSize=function(t){var i,r=this;return r.tickTextCharSize||(i={h:11.5,w:5.5},t.select("text").text(function(t){return r.textFormatted(t)}).each(function(t){var e=this.getBoundingClientRect(),t=r.textFormatted(t),n=e.height,e=t?e.width/t.length:void 0;n&&e&&(i.h=n,i.w=e)}).text(""),r.tickTextCharSize=i)},p.transitionise=function(t){return this.params.withoutTransition?t:this.d3.transition(t)},p.isVertical=function(){return"left"===this.orient||"right"===this.orient},p.tspanData=function(t,e,n,i){var r=this.params.tickMultiline?this.splitTickText(t,n,i):[].concat(this.textFormatted(t));return r.map(function(t){return{index:e,splitted:t,length:r.length}})},p.splitTickText=function(t,e,n){var r,a,o=this,t=o.textFormatted(t),s=o.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(t)?t:((!s||s<=0)&&(s=o.isVertical()?95:o.params.isCategory?Math.ceil(n(e[1])-n(e[0]))-12:110),function t(e,n){r=void 0;for(var i=1;i<n.length;i++)if(" "===n.charAt(i)&&(r=i),a=n.substr(0,i+1),a=o.tickTextCharSize.w*a.length,s<a)return t(e.concat(n.substr(0,r||i)),n.slice(r?r+1:i));return e.concat(n)}([],t+""))},p.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},p.lineY2=function(t){var e=this,t=e.scale(t)+(e.tickCentered?0:e.tickOffset);return e.range[0]<t&&t<e.range[1]?e.innerTickSize:0},p.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(0<t?1:-1):this.tickLength},p.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},p.textTextAnchor=function(){var t=this.tickTextRotate;return t?0<t?"start":"end":"middle"},p.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},p.tspanDy=function(t,e){var n=this.tickTextCharSize.h;return n=0===e?this.isVertical()?-((t.length-1)*(this.tickTextCharSize.h/2)-3):".71em":n},p.generateAxis=function(){function _(t){t.each(function(){var t,e,n,i,r,a=_.g=m.select(this),o=this.__chart__||y.scale,s=this.__chart__=y.copyScale(),u=y.tickValues||y.generateTicks(s),c=a.selectAll(".tick").data(u,s),l=c.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),h=c.exit().remove(),d=y.transitionise(c).style("opacity",1),f=(v.isCategory?(y.tickOffset=Math.ceil((s(1)-s(0))/2),e=y.tickCentered?0:y.tickOffset,n=y.tickCentered?y.tickOffset:0):y.tickOffset=e=0,l.append("line"),l.append("text"),y.updateRange(),y.updateTickLength(),y.updateTickTextCharSize(a.select(".tick")),d.select("line")),g=d.select("text"),p=c.select("text").selectAll("tspan").data(function(t,e){return y.tspanData(t,e,u,s)}),c=(p.enter().append("tspan"),p.exit().remove(),p.text(function(t){return t.splitted}),a.selectAll(".domain").data([0])),x=(c.enter().append("path").attr("class","domain"),y.transitionise(c));switch(y.orient){case"bottom":t=y.axisX,f.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return y.lineY2(t,e)}),g.attr("x",0).attr("y",function(t,e){return y.textY(t,e)}).attr("transform",function(t,e){return y.textTransform(t,e)}).style("text-anchor",function(t,e){return y.textTextAnchor(t,e)}),p.attr("x",0).attr("dy",function(t,e){return y.tspanDy(t,e)}).attr("dx",function(t,e){return y.tspanDx(t,e)}),x.attr("d","M"+y.range[0]+","+y.outerTickSize+"V0H"+y.range[1]+"V"+y.outerTickSize);break;case"top":t=y.axisX,f.attr("x2",0).attr("y2",-y.innerTickSize),g.attr("x",0).attr("y",-y.tickLength).style("text-anchor","middle"),p.attr("x",0).attr("dy","0em"),x.attr("d","M"+y.range[0]+","+-y.outerTickSize+"V0H"+y.range[1]+"V"+-y.outerTickSize);break;case"left":t=y.axisY,f.attr("x2",-y.innerTickSize).attr("y1",n).attr("y2",n),g.attr("x",-y.tickLength).attr("y",y.tickOffset).style("text-anchor","end"),p.attr("x",-y.tickLength).attr("dy",function(t,e){return y.tspanDy(t,e)}),x.attr("d","M"+-y.outerTickSize+","+y.range[0]+"H0V"+y.range[1]+"H"+-y.outerTickSize);break;case"right":t=y.axisY,f.attr("x2",y.innerTickSize).attr("y2",0),g.attr("x",y.tickLength).attr("y",0).style("text-anchor","start"),p.attr("x",y.tickLength).attr("dy",function(t,e){return y.tspanDy(t,e)}),x.attr("d","M"+y.outerTickSize+","+y.range[0]+"H0V"+y.range[1]+"H"+y.outerTickSize)}s.rangeBand?(r=(i=s).rangeBand()/2,o=s=function(t){return i(t)+r}):o.rangeBand?o=s:h.call(t,s,y.tickOffset),l.call(t,o,y.tickOffset),d.call(t,s,y.tickOffset)})}var y=this,m=y.d3,v=y.params;return _.scale=function(t){return arguments.length?(y.scale=t,_):y.scale},_.orient=function(t){return arguments.length?(y.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",_):y.orient},_.tickFormat=function(t){return arguments.length?(y.tickFormat=t,_):y.tickFormat},_.tickCentered=function(t){return arguments.length?(y.tickCentered=t,_):y.tickCentered},_.tickOffset=function(){return y.tickOffset},_.tickInterval=function(){var t=v.isCategory?2*y.tickOffset:(_.g.select("path.domain").node().getTotalLength()-2*y.outerTickSize)/_.g.selectAll("line").size();return t==1/0?0:t},_.ticks=function(){return arguments.length?(y.tickArguments=arguments,_):y.tickArguments},_.tickCulling=function(t){return arguments.length?(y.tickCulling=t,_):y.tickCulling},_.tickValues=function(t){if("function"==typeof t)y.tickValues=function(){return t(y.scale.domain())};else{if(!arguments.length)return y.tickValues;y.tickValues=t}return _},_},(()=>{function n(t){var e;if(this instanceof n)return e={fn:f,internal:{fn:p}},(e=((t,e)=>{if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,"axis",e))).d3=t.d3,e.internal=i,e;throw new TypeError("Cannot call a class as a function")}var t=n,e=function(t,e,n){this.owner=t,b.chart.internal[e]=n};if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),n})());(f=v.prototype).init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",z.axis+" "+z.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",z.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",z.axis+" "+z.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",z.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",z.axis+" "+z.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",z.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},f.getXAxis=function(t,e,n,i,r,a,o){var s=this.owner,u=s.config,r={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:u.axis_x_tick_multiline,tickWidth:u.axis_x_tick_width,tickTextRotate:o?0:u.axis_x_tick_rotate,withoutTransition:a},o=new this.internal(this,r).axis.scale(t).orient(e);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(t){return s.parseDate(t)})),o.tickFormat(n).tickValues(i),s.isCategorized()&&(o.tickCentered(u.axis_x_tick_centered),h(u.axis_x_tick_culling))&&(u.axis_x_tick_culling=!1),o},f.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),r.axis_x_tick_count,i.isTimeSeries())),(e||(i.xAxis.tickValues(n),i.subXAxis)).tickValues(n),n},f.getYAxis=function(t,e,n,i,r,a,o){var s=this.owner,u=s.config,r={withOuterTick:r,withoutTransition:a,tickTextRotate:o?0:u.axis_y_tick_rotate},a=new this.internal(this,r).axis.scale(t).orient(e).tickFormat(n);return s.isTimeSeriesY()?a.ticks(s.d3.time[u.axis_y_tick_time_value],u.axis_y_tick_time_interval):a.tickValues(i),a},f.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},f.getXAxisTickFormat=function(){var e=this.owner,n=e.config,i=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t<0?t.toFixed(0):t};return n.axis_x_tick_format&&(c(n.axis_x_tick_format)?i=n.axis_x_tick_format:e.isTimeSeries()&&(i=function(t){return t?e.axisTimeFormat(n.axis_x_tick_format)(t):""})),c(i)?function(t){return i.call(e,t)}:i},f.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},f.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},f.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},f.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},f.getLabelOptionByAxisId=function(t){var e,n=this.owner.config;return"y"===t?e=n.axis_y_label:"y2"===t?e=n.axis_y2_label:"x"===t&&(e=n.axis_x_label),e},f.getLabelText=function(t){t=this.getLabelOptionByAxisId(t);return o(t)?t:t?t.text:null},f.setLabelText=function(t,e){var n=this.owner.config,i=this.getLabelOptionByAxisId(t);o(i)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):i&&(i.text=e)},f.getLabelPosition=function(t,e){t=this.getLabelOptionByAxisId(t),t=t&&"object"===(void 0===t?"undefined":m(t))&&t.position?t.position:e;return{isInner:0<=t.indexOf("inner"),isOuter:0<=t.indexOf("outer"),isLeft:0<=t.indexOf("left"),isCenter:0<=t.indexOf("center"),isRight:0<=t.indexOf("right"),isTop:0<=t.indexOf("top"),isMiddle:0<=t.indexOf("middle"),isBottom:0<=t.indexOf("bottom")}},f.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},f.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},f.textForXAxisLabel=function(){return this.getLabelText("x")},f.textForYAxisLabel=function(){return this.getLabelText("y")},f.textForY2AxisLabel=function(){return this.getLabelText("y2")},f.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},f.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},f.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},f.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.dyForXAxisLabel=function(){var t=this.owner.config,e=this.getXAxisLabelPosition();return t.axis_rotated?e.isInner?"1.2em":-25-this.getMaxTickWidth("x"):e.isInner?"-0.5em":t.axis_x_height?t.axis_x_height-10:"3em"},f.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},f.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},f.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},f.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},f.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},f.getMaxTickWidth=function(t,e){var n,i,r,a=this.owner,o=a.config,s=0;return e&&a.currentMaxTickWidths[t]||(a.svg&&(e=a.filterTargetsToShow(a.data.targets),"y"===t?(n=a.y.copy().domain(a.getYDomain(e,"y")),i=this.getYAxis(n,a.yOrient,o.axis_y_tick_format,a.yAxisTickValues,!1,!0,!0)):"y2"===t?(n=a.y2.copy().domain(a.getYDomain(e,"y2")),i=this.getYAxis(n,a.y2Orient,o.axis_y2_tick_format,a.y2AxisTickValues,!1,!0,!0)):(n=a.x.copy().domain(a.getXDomain(e)),i=this.getXAxis(n,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(e,i)),(r=a.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(i).each(function(){a.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();s<t.width&&(s=t.width)}),r.remove()})),a.currentMaxTickWidths[t]=s<=0?a.currentMaxTickWidths[t]:s),a.currentMaxTickWidths[t]},f.updateLabels=function(t){var e=this.owner,n=e.main.select("."+z.axisX+" ."+z.axisXLabel),i=e.main.select("."+z.axisY+" ."+z.axisYLabel),e=e.main.select("."+z.axisY2+" ."+z.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},f.getPadding=function(t,e,n,i){var r="number"==typeof t?t:t[e];return _(r)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(r,i):n},f.convertPixelsToAxisPadding=function(t,e){var n=this.owner;return e*(t/(n.config.axis_rotated?n.width:n.height))},f.generateTickValues=function(t,e,n){var i,r,a,o,s,u=t;if(e)if(1===(e=c(e)?e():e))u=[t[0]];else if(2===e)u=[t[0],t[t.length-1]];else if(2<e){for(i=t[0],a=((t=t[t.length-1])-i)/(1+(r=e-2)),u=[i],o=0;o<r;o++)s=+i+a*(o+1),u.push(n?new Date(s):s);u.push(t)}return u=n?u:u.sort(function(t,e){return t-e})},f.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},f.redraw=function(t,e){var n=this.owner;n.axes.x.style("opacity",e?0:1),n.axes.y.style("opacity",e?0:1),n.axes.y2.style("opacity",e?0:1),n.axes.subx.style("opacity",e?0:1),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)};var w,S,b={version:"0.4.18",generate:function(t){return new e(t)}};return b.chart={fn:e.prototype,internal:{fn:n.prototype}},w=b.chart.fn,(S=b.chart.internal.fn).beforeInit=function(){},S.afterInit=function(){},S.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},S.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?"left":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},S.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},S.initWithData=function(t){var e=this,n=e.d3,i=e.config,r=!0;e.axis=new v(e),e.initPie&&e.initPie(),e.initBrush&&e.initBrush(),e.initZoom&&e.initZoom(),i.bindto?"function"==typeof i.bindto.node?e.selectChart=i.bindto:e.selectChart=n.select(i.bindto):e.selectChart=n.selectAll([]),e.selectChart.empty()&&(e.selectChart=n.select(document.createElement("div")).style("opacity",0),e.observeInserted(e.selectChart),r=!1),e.selectChart.html("").classed("c3",!0),e.data.xs={},e.data.targets=e.convertDataToTargets(t),i.data_filter&&(e.data.targets=e.data.targets.filter(i.data_filter)),i.data_hide&&e.addHiddenTargetIds(!0===i.data_hide?e.mapToIds(e.data.targets):i.data_hide),i.legend_hide&&e.addHiddenLegendIds(!0===i.legend_hide?e.mapToIds(e.data.targets):i.legend_hide),e.hasType("gauge")&&(i.legend_show=!1),e.updateSizes(),e.updateScales(),e.x.domain(n.extent(e.getXDomain(e.data.targets))),e.y.domain(e.getYDomain(e.data.targets,"y")),e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subX.domain(e.x.domain()),e.subY.domain(e.y.domain()),e.subY2.domain(e.y2.domain()),e.orgXDomain=e.x.domain(),e.brush&&e.brush.scale(e.subX),i.zoom_enabled&&e.zoom.scale(e.x),e.svg=e.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return i.onmouseover.call(e)}).on("mouseleave",function(){return i.onmouseout.call(e)}),e.config.svg_classname&&e.svg.attr("class",e.config.svg_classname),t=e.svg.append("defs"),e.clipChart=e.appendClip(t,e.clipId),e.clipXAxis=e.appendClip(t,e.clipIdForXAxis),e.clipYAxis=e.appendClip(t,e.clipIdForYAxis),e.clipGrid=e.appendClip(t,e.clipIdForGrid),e.clipSubchart=e.appendClip(t,e.clipIdForSubchart),e.updateSvgSize(),n=e.main=e.svg.append("g").attr("transform",e.getTranslate("main")),e.initSubchart&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),n.append("text").attr("class",z.text+" "+z.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),e.initGrid(),n.append("g").attr("clip-path",e.clipPath).attr("class",z.chart),i.grid_lines_front&&e.initGridLines(),e.initEventRect(),e.initChartElements(),n.insert("rect",i.zoom_privileged?null:"g."+z.regions).attr("class",z.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity",0).on("dblclick.zoom",null),i.axis_x_extent&&e.brush.extent(e.getDefaultExtent()),e.axis.init(),e.updateTargets(e.data.targets),r&&(e.updateDimension(),e.config.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),e.bindResize(),e.api.element=e.selectChart.node()},S.smoothLines=function(t,e){var a=this;"grid"===e&&t.each(function(){var t=a.d3.select(this),e=t.attr("x1"),n=t.attr("x2"),i=t.attr("y1"),r=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(n),y1:Math.ceil(i),y2:Math.ceil(r)})})},S.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,i=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:n,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+r+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-s-r,right:NaN,bottom:o+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,i),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?i+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&a&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},S.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},S.showTargets=function(){var e=this;e.svg.selectAll("."+z.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},S.redraw=function(t,e){var n,i,r,a,o,s,u,c,l,h,d,f,g,p=this,x=p.main,_=p.d3,y=p.config,m=p.getShapeIndices(p.isAreaType),v=p.getShapeIndices(p.isBarType),w=p.getShapeIndices(p.isLineType),S=p.hasArcType(),b=p.filterTargetsToShow(p.data.targets),A=p.xv.bind(p),T=F(t=t||{},"withY",!0),P=F(t,"withSubchart",!0),C=F(t,"withTransition",!0),L=F(t,"withTransform",!1),M=F(t,"withUpdateXDomain",!1),E=F(t,"withUpdateOrgXDomain",!1),V=F(t,"withTrimXDomain",!0),G=F(t,"withUpdateXAxis",M),k=F(t,"withLegend",!1),I=F(t,"withEventRect",!0),D=F(t,"withDimension",!0),R=F(t,"withTransitionForExit",C),N=F(t,"withTransitionForAxis",C),O=C?y.transition_duration:0,R=R?O:0;if(e=e||p.axis.generateTransitions(N?O:0),k&&y.legend_show?p.updateLegend(p.mapToIds(p.data.targets),t,e):D&&p.updateDimension(!0),p.isCategorized()&&0===b.length&&p.x.domain([0,p.axes.x.selectAll(".tick").size()]),b.length?(p.updateXDomain(b,M,E,V),y.axis_x_tick_values||(c=p.axis.updateXAxisTickValues(b))):(p.xAxis.tickValues([]),p.subXAxis.tickValues([])),y.zoom_rescale&&!t.flow&&(d=p.x.orgDomain()),p.y.domain(p.getYDomain(b,"y",d)),p.y2.domain(p.getYDomain(b,"y2",d)),!y.axis_y_tick_values&&y.axis_y_tick_count&&p.yAxis.tickValues(p.axis.generateTickValues(p.y.domain(),y.axis_y_tick_count)),!y.axis_y2_tick_values&&y.axis_y2_tick_count&&p.y2Axis.tickValues(p.axis.generateTickValues(p.y2.domain(),y.axis_y2_tick_count)),p.axis.redraw(e,S),p.axis.updateLabels(C),(M||G)&&b.length)if(y.axis_x_tick_culling&&c){for(l=1;l<c.length;l++)if(c.length/l<y.axis_x_tick_culling_max){h=l;break}p.svg.selectAll("."+z.axisX+" .tick text").each(function(t){t=c.indexOf(t);0<=t&&_.select(this).style("display",t%h?"none":"block")})}else p.svg.selectAll("."+z.axisX+" .tick text").style("display","block");n=p.generateDrawArea?p.generateDrawArea(m,!1):void 0,i=p.generateDrawBar?p.generateDrawBar(v):void 0,r=p.generateDrawLine?p.generateDrawLine(w,!1):void 0,a=p.generateXYForText(m,v,w,!0),o=p.generateXYForText(m,v,w,!1),T&&(p.subY.domain(p.getYDomain(b,"y")),p.subY2.domain(p.getYDomain(b,"y2"))),p.updateXgridFocus(),x.select("text."+z.text+"."+z.empty).attr("x",p.width/2).attr("y",p.height/2).text(y.data_empty_label_text).transition().style("opacity",b.length?0:1),p.updateGrid(O),p.updateRegion(O),p.updateBar(R),p.updateLine(R),p.updateArea(R),p.updateCircle(),p.hasDataLabel()&&p.updateText(R),p.redrawTitle&&p.redrawTitle(),p.redrawArc&&p.redrawArc(O,R,L),p.redrawSubchart&&p.redrawSubchart(P,e,O,R,m,v,w),x.selectAll("."+z.selectedCircles).filter(p.isBarType.bind(p)).selectAll("circle").remove(),y.interaction_enabled&&!t.flow&&I&&(p.redrawEventRect(),p.updateZoom)&&p.updateZoom(),p.updateCircleY(),f=(p.config.axis_rotated?p.circleY:p.circleX).bind(p),g=(p.config.axis_rotated?p.circleX:p.circleY).bind(p),t.flow&&(u=p.generateFlow({targets:b,flow:t.flow,duration:t.flow.duration,drawBar:i,drawLine:r,drawArea:n,cx:f,cy:g,xv:A,xForText:a,yForText:o})),(O||u)&&p.isTabVisible()?_.transition().duration(O).each(function(){var e=[];[p.redrawBar(i,!0),p.redrawLine(r,!0),p.redrawArea(n,!0),p.redrawCircle(f,g,!0),p.redrawText(a,o,t.flow,!0),p.redrawRegion(!0),p.redrawGrid(!0)].forEach(function(t){t.forEach(function(t){e.push(t)})}),s=p.generateWait(),e.forEach(function(t){s.add(t)})}).call(s,function(){u&&u(),y.onrendered&&y.onrendered.call(p)}):(p.redrawBar(i),p.redrawLine(r),p.redrawArea(n),p.redrawCircle(f,g),p.redrawText(a,o,t.flow),p.redrawRegion(),p.redrawGrid(),y.onrendered&&y.onrendered.call(p)),p.mapToIds(p.data.targets).forEach(function(t){p.withoutFadeIn[t]=!0})},S.updateAndRedraw=function(t){var e,n=this,i=n.config;(t=t||{}).withTransition=F(t,"withTransition",!0),t.withTransform=F(t,"withTransform",!1),t.withLegend=F(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=F(t,"withTransitionForTransform",t.withTransition),n.updateSizes(),t.withLegend&&i.legend_show||(e=n.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(t.withTransitionForTransform,e)),n.redraw(t,e)},S.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},S.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},S.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},S.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||y(t.data_xs))},S.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},S.getTranslate=function(t){var e,n,i=this,r=i.config;return"main"===t?(e=u(i.margin.left),n=u(i.margin.top)):"context"===t?(e=u(i.margin2.left),n=u(i.margin2.top)):"legend"===t?(e=i.margin3.left,n=i.margin3.top):"x"===t?(e=0,n=r.axis_rotated?0:i.height):"y"===t?(e=0,n=r.axis_rotated?i.height:0):"y2"===t?(e=r.axis_rotated?0:i.width,n=r.axis_rotated?1:0):"subx"===t?(e=0,n=r.axis_rotated?0:i.height2):"arc"===t&&(e=i.arcWidth/2,n=i.arcHeight/2),"translate("+e+","+n+")"},S.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},S.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},S.opacityForCircle=function(t){var e=(c(this.config.point_show)?this.config.point_show(t):this.config.point_show)?1:0;return _(t.value)?this.isScatterType(t)?.5:e:0},S.opacityForText=function(){return this.hasDataLabel()?1:0},S.xx=function(t){return t?this.x(t.x):null},S.xv=function(t){var e=this,n=t.value;return e.isTimeSeries()?n=e.parseDate(t.value):e.isCategorized()&&"string"==typeof t.value&&(n=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(n))},S.yv=function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},S.subxx=function(t){return t?this.subX(t.x):null},S.transformMain=function(t,e){var n,i,r,a=this;e&&e.axisX?n=e.axisX:(n=a.main.select("."+z.axisX),t&&(n=n.transition())),e&&e.axisY?i=e.axisY:(i=a.main.select("."+z.axisY),t&&(i=i.transition())),e&&e.axisY2?r=e.axisY2:(r=a.main.select("."+z.axisY2),t&&(r=r.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),n.attr("transform",a.getTranslate("x")),i.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+z.chartArcs).attr("transform",a.getTranslate("arc"))},S.transformAll=function(t,e){var n=this;n.transformMain(t,e),n.config.subchart_show&&n.transformContext(t,e),n.legend&&n.transformLegend(t)},S.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+z.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},S.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},S.observeInserted=function(e){var n,i=this;"undefined"!=typeof MutationObserver?(n=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.previousSibling&&(n.disconnect(),i.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.brush&&i.brush.update(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},S.bindResize=function(){var t,e=this,n=e.config;e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){n.onresize.call(e)}),n.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){delete e.resizeTimeout,e.api.flush()},100)}),e.resizeFunction.add(function(){n.onresized.call(e)}),window.attachEvent?window.attachEvent("onresize",e.resizeFunction):window.addEventListener?window.addEventListener("resize",e.resizeFunction,!1):((t=window.onresize)?t.add&&t.remove||(t=e.generateResize()).add(window.onresize):t=e.generateResize(),t.add(e.resizeFunction),window.onresize=t)},S.generateResize=function(){function t(){n.forEach(function(t){t()})}var n=[];return t.add=function(t){n.push(t)},t.remove=function(t){for(var e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}},t},S.endall=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},S.generateWait=function(){function t(t,n){var i=setInterval(function(){var e=0;r.forEach(function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}}),e===r.length&&(clearInterval(i),n)&&n()},10)}var r=[];return t.add=function(t){r.push(t)},t},S.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeFormat(this.config.data_xFormat).parse(t):"object"!==(void 0===t?"undefined":m(t))&&("number"!=typeof t||isNaN(t))||(e=new Date(+t)),e&&!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},S.isTabVisible=function(){var t;return void 0!==document.hidden?t="hidden":void 0!==document.mozHidden?t="mozHidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),!document[t]},S.isValue=_,S.isFunction=c,S.isString=o,S.isUndefined=s,S.isDefined=l,S.ceil10=r,S.asHalfPixel=u,S.diffDomain=V,S.isEmpty=h,S.notEmpty=y,S.notEmpty=y,S.getOption=F,S.hasValue=d,S.sanitise=g,S.getPathBox=x,S.CLASS=z,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){return i.apply(this instanceof r?this:t,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),i=this,r=function(){};return r.prototype=this.prototype,e.prototype=new r,e}),"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,n){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,n,i,r,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,n,i,r,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,n,i,r,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,i,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,i,r,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,i,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,i,r,a,o){return new window.SVGPathSegArcAbs(void 0,t,e,n,i,r,a,o)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,i,r,a,o){return new window.SVGPathSegArcRel(void 0,t,e,n,i,r,a,o)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype)||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path"),n=(e.setAttribute("d",this.getAttribute("d")),e.pathSegList.numberOfItems-1);if(n<=0)return 0;for(;e.pathSegList.removeItem(n),!(t>e.getTotalLength())&&0<--n;);return n}),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){var e;this._pathElement&&(e=!1,t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e)&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",n=!0;return t.forEach(function(t){n?(n=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];function e(){this.pathSegList=[]}function n(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}var i=this,r=(e.prototype.appendSegment=function(t){this.pathSegList.push(t)},n.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},n.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},n.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},n.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},n.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},n.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},n.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"<=t&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},n.prototype.initialCommandIsMoveTo=function(){var t;return!this.hasMoreData()||(t=this.peekSegmentType())==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},n.prototype._parseNumber=function(){var t=0,e=0,n=1,i=0,r=1,a=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var u=this._currentIndex-1,c=1;s<=u;)e+=c*(this._string.charAt(u--)-"0"),c*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(++this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=o&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,a=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)t=(t*=10)+(this._string.charAt(this._currentIndex)-"0"),this._currentIndex++}var l=e+i;if(l*=r,t&&(l*=Math.pow(10,a*t)),o!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),l}},n.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},n.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(i);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:return n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicRel(i,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(i,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(i,n.x,n.y,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(i,n.x,n.y,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(i,n.x,n.y,n.x1,n.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(i,n.x,n.y,n.x1,n.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(i,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(i,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);default:throw"Unknown path seg type."}},new e),a=new n(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var o=a.parseSegment();if(!o)return[];r.appendSegment(o)}return r.pathSegList}),w.axis=function(){},w.axis.labels=function(e){var n=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){n.axis.setLabelText(t,e[t])}),n.axis.updateLabels())},w.axis.max=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};"object"===(void 0===t?"undefined":m(t))?(_(t.x)&&(n.axis_x_max=t.x),_(t.y)&&(n.axis_y_max=t.y),_(t.y2)&&(n.axis_y2_max=t.y2)):n.axis_y_max=n.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},w.axis.min=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};"object"===(void 0===t?"undefined":m(t))?(_(t.x)&&(n.axis_x_min=t.x),_(t.y)&&(n.axis_y_min=t.y),_(t.y2)&&(n.axis_y2_min=t.y2)):n.axis_y_min=n.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},w.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};void 0!==t.max&&this.axis.max(t.max),void 0!==t.min&&this.axis.min(t.min)},w.category=function(t,e){var n=this.internal,i=n.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},w.categories=function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories},w.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},w.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},w.destroy=function(){var t,e=this.internal;return window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.detachEvent?window.detachEvent("onresize",e.resizeFunction):window.removeEventListener?window.removeEventListener("resize",e.resizeFunction):(t=window.onresize)&&t.add&&t.remove&&t.remove(e.resizeFunction),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},w.color=function(t){return this.internal.color(t)},w.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return 0<=[].concat(e).indexOf(t.id)})},w.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},w.data.values=function(t){var e=null;return e=t?(t=this.data(t))[0]?t[0].values.map(function(t){return t.value}):null:e},w.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},w.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},w.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},w.flow=function(t){var r,e,n,i,a,o,s=this.internal,u=[],c=s.getMaxDataCount(),l=0,h=0;if(t.json)n=s.convertJsonToData(t.json,t.keys);else if(t.rows)n=s.convertRowsToData(t.rows);else{if(!t.columns)return;n=s.convertColumnsToData(t.columns)}r=s.convertDataToTargets(n,!0),s.data.targets.forEach(function(t){for(var e,n=!1,i=0;i<r.length;i++)if(t.id===r[i].id){for(n=!0,t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1),l=r[i].values.length,e=0;e<l;e++)r[i].values[e].index=h+e,s.isTimeSeries()||(r[i].values[e].x=h+e);t.values=t.values.concat(r[i].values),r.splice(i,1);break}n||u.push(t.id)}),s.data.targets.forEach(function(t){for(var e,n=0;n<u.length;n++)if(t.id===u[n])for(h=t.values[t.values.length-1].index+1,e=0;e<l;e++)t.values.push({id:t.id,index:h+e,x:s.isTimeSeries()?s.getOtherTargetX(h+e):h+e,value:null})}),s.data.targets.length&&r.forEach(function(t){for(var e=[],n=s.data.targets[0].values[0].index;n<h;n++)e.push({id:t.id,index:n,x:s.isTimeSeries()?s.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){t.index+=h,s.isTimeSeries()||(t.x+=h)}),t.values=e.concat(t.values)}),s.data.targets=s.data.targets.concat(r),s.getMaxDataCount(),i=(n=s.data.targets[0]).values[0],void 0!==t.to?(l=0,o=s.isTimeSeries()?s.parseDate(t.to):t.to,n.values.forEach(function(t){t.x<o&&l++})):void 0!==t.length&&(l=t.length),c?1===c&&s.isTimeSeries()&&(a=(n.values[n.values.length-1].x-i.x)/2,e=[new Date(+i.x-a),new Date(+i.x+a)],s.updateXDomain(null,!0,!0,!1,e)):(a=s.isTimeSeries()?1<n.values.length?n.values[n.values.length-1].x-i.x:i.x-s.getXDomain(s.data.targets)[0]:1,e=[i.x-a,i.x],s.updateXDomain(null,!0,!0,!1,e)),s.updateTargets(s.data.targets),s.redraw({flow:{index:i.index,length:l,duration:_(t.duration)?t.duration:s.config.transition_duration,done:t.done,orgDataCount:c},withLegend:!0,withTransition:1<c,withTrimXDomain:!1,withUpdateXAxis:!0})},S.generateFlow=function(C){var L=this,M=L.config,E=L.d3;return function(){var t,e=C.targets,n=C.flow,r=C.drawBar,a=C.drawLine,o=C.drawArea,s=C.cx,u=C.cy,c=C.xv,l=C.xForText,h=C.yForText,i=C.duration,d=n.index,f=n.length,g=L.getValueOnIndex(L.data.targets[0].values,d),p=L.getValueOnIndex(L.data.targets[0].values,d+f),x=L.x.domain(),i=n.duration||i,_=n.done||function(){},y=L.generateWait(),m=L.xgrid||E.selectAll([]),v=L.xgridLines||E.selectAll([]),w=L.mainRegion||E.selectAll([]),S=L.mainText||E.selectAll([]),b=L.mainBar||E.selectAll([]),A=L.mainLine||E.selectAll([]),T=L.mainArea||E.selectAll([]),P=L.mainCircle||E.selectAll([]);L.flowing=!0,L.data.targets.forEach(function(t){t.values.splice(0,f)}),e=L.updateXDomain(e,!0,!0),L.updateXGrid&&L.updateXGrid(!0),n=n.orgDataCount?1===n.orgDataCount||(g&&g.x)===(p&&p.x)||L.isTimeSeries()?L.x(x[0])-L.x(e[0]):L.x(g.x)-L.x(p.x):1!==L.data.targets[0].values.length?L.x(x[0])-L.x(e[0]):L.isTimeSeries()?(g=L.getValueOnIndex(L.data.targets[0].values,0),p=L.getValueOnIndex(L.data.targets[0].values,L.data.targets[0].values.length-1),L.x(g.x)-L.x(p.x)):V(e)/2,g=V(x)/V(e),t="translate("+n+",0) scale("+g+",1)",L.hideXGridFocus(),E.transition().ease("linear").duration(i).each(function(){y.add(L.axes.x.transition().call(L.xAxis)),y.add(b.transition().attr("transform",t)),y.add(A.transition().attr("transform",t)),y.add(T.transition().attr("transform",t)),y.add(P.transition().attr("transform",t)),y.add(S.transition().attr("transform",t)),y.add(w.filter(L.isRegionOnX).transition().attr("transform",t)),y.add(m.transition().attr("transform",t)),y.add(v.transition().attr("transform",t))}).call(y,function(){var t,e=[],n=[],i=[];if(f){for(t=0;t<f;t++)e.push("."+z.shape+"-"+(d+t)),n.push("."+z.text+"-"+(d+t)),i.push("."+z.eventRect+"-"+(d+t));L.svg.selectAll("."+z.shapes).selectAll(e).remove(),L.svg.selectAll("."+z.texts).selectAll(n).remove(),L.svg.selectAll("."+z.eventRects).selectAll(i).remove(),L.svg.select("."+z.xgrid).remove()}m.attr("transform",null).attr(L.xgridAttr),v.attr("transform",null),v.select("line").attr("x1",M.axis_rotated?0:c).attr("x2",M.axis_rotated?L.width:c),v.select("text").attr("x",M.axis_rotated?L.width:0).attr("y",c),b.attr("transform",null).attr("d",r),A.attr("transform",null).attr("d",a),T.attr("transform",null).attr("d",o),P.attr("transform",null).attr("cx",s).attr("cy",u),S.attr("transform",null).attr("x",l).attr("y",h).style("fill-opacity",L.opacityForText.bind(L)),w.attr("transform",null),w.select("rect").filter(L.isRegionOnX).attr("x",L.regionX.bind(L)).attr("width",L.regionWidth.bind(L)),M.interaction_enabled&&L.redrawEventRect(),_(),L.flowing=!1})}},w.focus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),t.classed(z.focused,!0).classed(z.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},w.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(z.focused,!1).classed(z.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},w.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(z.focused,!1).classed(z.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(z.legendItemFocused)}).classed(z.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},w.xgrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines},w.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},w.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},w.ygrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines},w.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},w.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},w.groups=function(t){var e=this.internal,n=e.config;return void 0===t||(n.data_groups=t,e.redraw()),n.data_groups},w.legend=function(){},w.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},w.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},w.load=function(e){var t=this.internal,n=t.config;e.xs&&t.addXs(e.xs),"names"in e&&w.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?t.load(t.getCaches(e.cacheIds),e.done):"unload"in e?t.unload(t.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},w.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},w.regions=function(t){var e=this.internal,n=e.config;return t&&(n.regions=t,e.redrawWithoutRescale()),n.regions},w.regions.add=function(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},w.regions.remove=function(t){var e=this.internal,n=e.config,i=e.getOption(t=t||{},"duration",n.transition_duration),r=e.getOption(t,"classes",[z.region]),t=e.main.select("."+z.regions).selectAll(r.map(function(t){return"."+t}));return(i?t.transition().duration(i):t).style("opacity",0).remove(),n.regions=n.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=r.indexOf(t)&&(e=!0)}),!e)}),n.regions},w.selected=function(t){var e=this.internal,n=e.d3;return n.merge(e.main.selectAll("."+z.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+z.shape).filter(function(){return n.select(this).classed(z.SELECTED)}).map(function(t){return t.map(function(t){t=t.__data__;return t.data||t})}))},w.select=function(s,u,c){var l=this.internal,h=l.d3,d=l.config;d.data_selection_enabled&&l.main.selectAll("."+z.shapes).selectAll("."+z.shape).each(function(t,e){var n=h.select(this),i=(t.data||t).id,r=l.getToggle(this,t).bind(l),i=d.data_selection_grouped||!s||0<=s.indexOf(i),a=!u||0<=u.indexOf(e),o=n.classed(z.SELECTED);n.classed(z.line)||n.classed(z.area)||(i&&a?d.data_selection_isselectable(t)&&!o&&r(!0,n.classed(z.SELECTED,!0),t,e):void 0!==c&&c&&o&&r(!1,n.classed(z.SELECTED,!1),t,e))})},w.unselect=function(s,u){var c=this.internal,l=c.d3,h=c.config;h.data_selection_enabled&&c.main.selectAll("."+z.shapes).selectAll("."+z.shape).each(function(t,e){var n=l.select(this),i=(t.data||t).id,r=c.getToggle(this,t).bind(c),i=h.data_selection_grouped||!s||0<=s.indexOf(i),a=!u||0<=u.indexOf(e),o=n.classed(z.SELECTED);n.classed(z.line)||n.classed(z.area)||i&&a&&h.data_selection_isselectable(t)&&o&&r(!1,n.classed(z.SELECTED,!1),t,e)})},w.show=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.removeHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",1,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",1)}),e.withLegend&&i.showLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},w.hide=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.addHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",0,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",0)}),e.withLegend&&i.hideLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},w.toggle=function(t,e){var n=this,i=this.internal;i.mapToTargetIds(t).forEach(function(t){i.isTargetToShow(t)?n.hide(t,e):n.show(t,e)})},w.tooltip=function(){},w.tooltip.show=function(t){var e,n,i=this.internal;t.mouse&&(n=t.mouse),t.data?e=i.isMultipleX()?(n=[i.x(t.data.x),i.getYScale(t.data.id)(t.data.value)],null):_(t.data.index)?t.data.index:i.getIndexByX(t.data.x):void 0!==t.x?e=i.getIndexByX(t.x):void 0!==t.index&&(e=t.index),i.dispatchEvent("mouseover",e,n),i.dispatchEvent("mousemove",e,n),i.config.tooltip_onshow.call(i,t.data)},w.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},w.transform=function(t,e){var n=this.internal,i=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;n.transformTo(e,t,i)},S.transformTo=function(t,e,n){var i=this,r=!i.hasArcType(),n=n||{withTransitionForAxis:r};n.withTransitionForTransform=!1,i.transiting=!1,i.setTargetType(t,e),i.updateTargets(i.data.targets),i.updateAndRedraw(n)},w.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},w.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},w.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},w.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},w.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},w.zoom.max=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_max;n.zoom_x_max=i.max([e.orgXDomain[1],t])},w.zoom.min=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_min;n.zoom_x_min=i.min([e.orgXDomain[0],t])},w.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};void 0!==t.max&&this.domain.max(t.max),void 0!==t.min&&this.domain.min(t.min)},S.initPie=function(){var t=this.d3;this.pie=t.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),this.pie.sort(this.getOrderFunction()||null)},S.updateRadius=function(){var t=this,e=t.config,e=e.gauge_width||e.donut_width;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=e?(t.radius-e)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0},S.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},S.updateAngle=function(e){var t,n,i=this,r=i.config,a=!1,o=0;return r&&(i.pie(i.filterTargetsToShow(i.data.targets)).forEach(function(t){a||t.data.id!==e.data.id||(a=!0,(e=t).index=o),o++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),i.isGaugeType(e.data)&&(i=r.gauge_min,n=r.gauge_max,t=Math.PI*(r.gauge_fullCircle?2:1)/(n-i),n=e.value<i?0:e.value<n?e.value-i:n-i,e.startAngle=r.gauge_startingAngle,e.endAngle=e.startAngle+t*n),a)?e:null},S.getSvgArc=function(){function t(t,e){return e?i(t):(e=n.updateAngle(t))?i(e):"M 0 0"}var n=this,i=n.d3.svg.arc().outerRadius(n.radius).innerRadius(n.innerRadius);return t.centroid=i.centroid,t},S.getSvgArcExpanded=function(t){var e=this,n=e.d3.svg.arc().outerRadius(e.radiusExpanded*(t||1)).innerRadius(e.innerRadius);return function(t){t=e.updateAngle(t);return t?n(t):"M 0 0"}},S.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},S.transformForArcLabel=function(t){var e,n,i=this,r=i.config,a=i.updateAngle(t),o="";return a&&!i.hasType("gauge")&&(a=this.svgArc.centroid(a),n=isNaN(a[0])?0:a[0],a=isNaN(a[1])?0:a[1],e=Math.sqrt(n*n+a*a),o="translate("+n*(n=i.hasType("donut")&&r.donut_label_ratio?c(r.donut_label_ratio)?r.donut_label_ratio(t,i.radius,e):r.donut_label_ratio:i.hasType("pie")&&r.pie_label_ratio?c(r.pie_label_ratio)?r.pie_label_ratio(t,i.radius,e):r.pie_label_ratio:i.radius&&e?(.375<36/i.radius?1.175-36/i.radius:.8)*i.radius/e:0)+","+a*n+")"),o},S.getArcRatio=function(t){var e=this.config,e=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/e:null},S.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},S.textForArcLabel=function(t){var e,n,i,r=this;return r.shouldShowArcLabel()&&(e=(n=r.updateAngle(t))?n.value:null,n=r.getArcRatio(n),t=t.data.id,r.hasType("gauge")||r.meetsArcLabelThreshold(n))?(i=r.getArcLabelFormat())?i(e,n,t):r.defaultArcValueFormat(e,n):""},S.textForGaugeMinMax=function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},S.expandArc=function(t){var e,n=this;n.transiting?e=window.setInterval(function(){n.transiting||(window.clearInterval(e),0<n.legend.selectAll(".c3-legend-item-focused").size()&&n.expandArc(t))},10):(t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+z.chartArc)).each(function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each(function(t){n.isDonutType(t.data)})}))},S.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+z.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+z.arc))},S.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},S.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},S.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},S.meetsArcLabelThreshold=function(t){var e=this.config;return t>=(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)},S.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},S.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},S.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},S.updateTargetsForArc=function(t){var e=this,n=e.main,i=e.classChartArc.bind(e),r=e.classArcs.bind(e),a=e.classFocus.bind(e);(n=n.select("."+z.chartArcs).selectAll("."+z.chartArc).data(e.pie(t)).attr("class",function(t){return i(t)+a(t.data)}).enter().append("g").attr("class",i)).append("g").attr("class",r),n.append("text").attr("dy",e.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},S.initArc=function(){var t=this;t.arcs=t.main.select("."+z.chart).append("g").attr("class",z.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",z.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},S.redrawArc=function(t,e,n){var i,r=this,a=r.d3,o=r.config,s=r.main;(i=s.selectAll("."+z.arcs).selectAll("."+z.arc).data(r.arcData.bind(r))).enter().append("path").attr("class",r.classArc.bind(r)).style("fill",function(t){return r.color(t.data)}).style("cursor",function(t){return o.interaction_enabled&&o.data_selection_isselectable(t)?"pointer":null}).each(function(t){r.isGaugeType(t.data)&&(t.startAngle=t.endAngle=o.gauge_startingAngle),this._current=t}),i.attr("transform",function(t){return!r.isGaugeType(t.data)&&n?"scale(0)":""}).on("mouseover",o.interaction_enabled?function(t){var e;r.transiting||(t=r.updateAngle(t))&&(e=r.convertToArcData(t),r.expandArc(t.data.id),r.api.focus(t.data.id),r.toggleFocusLegend(t.data.id,!0),r.config.data_onmouseover(e,this))}:null).on("mousemove",o.interaction_enabled?function(t){var t=r.updateAngle(t);t&&(t=[r.convertToArcData(t)],r.showTooltip(t,this))}:null).on("mouseout",o.interaction_enabled?function(t){var e;r.transiting||(t=r.updateAngle(t))&&(e=r.convertToArcData(t),r.unexpandArc(t.data.id),r.api.revert(),r.revertLegend(),r.hideTooltip(),r.config.data_onmouseout(e,this))}:null).on("click",o.interaction_enabled?function(t,e){var t=r.updateAngle(t);t&&(t=r.convertToArcData(t),r.toggleShape&&r.toggleShape(this,t,e),r.config.data_onclick.call(r.api,t,this))}:null).each(function(){r.transiting=!0}).transition().duration(t).attrTween("d",function(e){var n,t=r.updateAngle(e);return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),n=a.interpolate(this._current,t),this._current=n(0),function(t){t=n(t);return t.data=e.data,r.getArc(t,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return r.levelColor?r.levelColor(t.data.values[0].value):r.color(t.data.id)}).call(r.endall,function(){r.transiting=!1}),i.exit().transition().duration(e).style("opacity",0).remove(),s.selectAll("."+z.chartArc).select("text").style("opacity",0).attr("class",function(t){return r.isGaugeType(t.data)?z.gaugeValue:""}).text(r.textForArcLabel.bind(r)).attr("transform",r.transformForArcLabel.bind(r)).style("font-size",function(t){return r.isGaugeType(t.data)?Math.round(r.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return r.isTargetToShow(t.data.id)&&r.isArcType(t.data)?1:0}),s.select("."+z.chartArcsTitle).style("opacity",r.hasType("donut")||r.hasType("gauge")?1:0),r.hasType("gauge")&&(r.arcs.select("."+z.chartArcsBackground).attr("d",function(){var t={data:[{value:o.gauge_max}],startAngle:o.gauge_startingAngle,endAngle:-1*o.gauge_startingAngle};return r.getArc(t,!0,!0)}),r.arcs.select("."+z.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:""),r.arcs.select("."+z.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/(o.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(o.gauge_label_show?r.textForGaugeMinMax(o.gauge_min,!1):""),r.arcs.select("."+z.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/(o.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(o.gauge_label_show?r.textForGaugeMinMax(o.gauge_max,!0):""))},S.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("path").attr("class",z.chartArcsBackground),t.append("text").attr("class",z.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",z.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",z.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},S.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},S.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},S.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},S.getCaches=function(t){for(var e=[],n=0;n<t.length;n++)t[n]in this.cache&&e.push(this.cloneTarget(this.cache[t[n]]));return e},S.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},S.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},S.classText=function(t){return this.generateClass(z.text,t.index)},S.classTexts=function(t){return this.generateClass(z.texts,t.id)},S.classShape=function(t){return this.generateClass(z.shape,t.index)},S.classShapes=function(t){return this.generateClass(z.shapes,t.id)},S.classLine=function(t){return this.classShape(t)+this.generateClass(z.line,t.id)},S.classLines=function(t){return this.classShapes(t)+this.generateClass(z.lines,t.id)},S.classCircle=function(t){return this.classShape(t)+this.generateClass(z.circle,t.index)},S.classCircles=function(t){return this.classShapes(t)+this.generateClass(z.circles,t.id)},S.classBar=function(t){return this.classShape(t)+this.generateClass(z.bar,t.index)},S.classBars=function(t){return this.classShapes(t)+this.generateClass(z.bars,t.id)},S.classArc=function(t){return this.classShape(t.data)+this.generateClass(z.arc,t.data.id)},S.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(z.arcs,t.data.id)},S.classArea=function(t){return this.classShape(t)+this.generateClass(z.area,t.id)},S.classAreas=function(t){return this.classShapes(t)+this.generateClass(z.areas,t.id)},S.classRegion=function(t,e){return this.generateClass(z.region,e)+" "+("class"in t?t.class:"")},S.classEvent=function(t){return this.generateClass(z.eventRect,t.index)},S.classTarget=function(t){var e=this.config.data_classes[t],e=e?" "+z.target+"-"+e:"";return this.generateClass(z.target,t)+e},S.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},S.classFocused=function(t){return" "+(0<=this.focusedTargetIds.indexOf(t.id)?z.focused:"")},S.classDefocused=function(t){return" "+(0<=this.defocusedTargetIds.indexOf(t.id)?z.defocused:"")},S.classChartText=function(t){return z.chartText+this.classTarget(t.id)},S.classChartLine=function(t){return z.chartLine+this.classTarget(t.id)},S.classChartBar=function(t){return z.chartBar+this.classTarget(t.id)},S.classChartArc=function(t){return z.chartArc+this.classTarget(t.data.id)},S.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},S.selectorTarget=function(t,e){return(e||"")+"."+z.target+this.getTargetSelectorSuffix(t)},S.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map(function(t){return n.selectorTarget(t,e)}):null},S.selectorLegend=function(t){return"."+z.legendItem+this.getTargetSelectorSuffix(t)},S.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null},S.getClipPath=function(t){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+t+")"},S.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},S.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},S.getAxisClipY=function(t){return t?-20:-this.margin.top},S.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},S.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},S.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},S.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},S.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return t?this.width+2+e+n:this.margin.left+20},S.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},S.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},S.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},S.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},S.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},S.generateColor=function(){var t=this.config,e=this.d3,i=t.data_colors,r=y(t.color_pattern)?t.color_pattern:e.scale.category10().range(),a=t.data_color,o=[];return function(t){var e,n=t.id||t.data&&t.data.id||t;return i[n]instanceof Function?e=i[n](t):i[n]?e=i[n]:(o.indexOf(n)<0&&o.push(n),e=r[o.indexOf(n)%r.length],i[n]=e),a instanceof Function?a(e,t):e}},S.generateLevelColor=function(){var t=this.config,i=t.color_pattern,e=t.color_threshold,r="value"===e.unit,a=e.values&&e.values.length?e.values:[],o=e.max||100;return y(t.color_threshold)?function(t){for(var e=i[i.length-1],n=0;n<a.length;n++)if((r?t:100*t/o)<a[n]){e=i[n];break}return e}:null},S.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},S.additionalConfig={},S.loadConfig=function(e){var n,i,r,a=this.config;Object.keys(a).forEach(function(t){n=e,i=t.split("_"),void 0!==(r=function t(){var e=i.shift();return e&&n&&"object"===(void 0===n?"undefined":m(n))&&e in n?(n=n[e],t()):e?void 0:n}())&&(a[t]=r)})},S.convertUrlToData=function(t,e,n,i,r){var a=this,o=e||"csv",s=a.d3.xhr(t);n&&Object.keys(n).forEach(function(t){s.header(t,n[t])}),s.get(function(t,e){var n=e.response||e.responseText;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");e="json"===o?a.convertJsonToData(JSON.parse(n),i):"tsv"===o?a.convertTsvToData(n):a.convertCsvToData(n),r.call(a,e)})},S.convertXsvToData=function(t,e){var n,i=e.parseRows(t);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=e.parse(t),n},S.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},S.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},S.convertJsonToData=function(e,t){var i,r=this,a=[],t=t?(t.x?(i=t.value.concat(t.x),r.config.data_x=t.x):i=t.value,a.push(i),e.forEach(function(e){var n=[];i.forEach(function(t){t=r.findValueInJson(e,t);s(t)&&(t=null),n.push(t)}),a.push(n)}),r.convertRowsToData(a)):(Object.keys(e).forEach(function(t){a.push([t].concat(e[t]))}),r.convertColumnsToData(a));return t},S.findValueInJson=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<n.length;++i){var r=n[i];if(!(r in t))return;t=t[r]}return t},S.convertRowsToData=function(t){for(var e=[],n=t[0],i=1;i<t.length;i++){for(var r={},a=0;a<t[i].length;a++){if(void 0===t[i][a])throw new Error("Source data is missing a component at ("+i+","+a+")!");r[n[a]]=t[i][a]}e.push(r)}return e},S.convertColumnsToData=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n][0],r=1;r<t[n].length;r++){if(void 0===e[r-1]&&(e[r-1]={}),void 0===t[n][r])throw new Error("Source data is missing a component at ("+n+","+r+")!");e[r-1][i]=t[n][r]}return e},S.convertDataToTargets=function(t,i){var u=this,c=u.config,e=u.d3.keys(t[0]).filter(u.isNotX,u),r=u.d3.keys(t[0]).filter(u.isX,u);return e.forEach(function(n){var e=u.getXKey(n);u.isCustomX()||u.isTimeSeries()?0<=r.indexOf(e)?u.data.xs[n]=(i&&u.data.xs[n]?u.data.xs[n]:[]).concat(t.map(function(t){return t[e]}).filter(_).map(function(t,e){return u.generateTargetX(t,n,e)})):c.data_x?u.data.xs[n]=u.getOtherTargetXs():y(c.data_xs)&&(u.data.xs[n]=u.getXValuesOfXKey(e,u.data.targets)):u.data.xs[n]=t.map(function(t,e){return e})}),e.forEach(function(t){if(!u.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(e=e.map(function(a,o){var s=c.data_idConverter(a);return{id:s,id_org:a,values:t.map(function(t,e){var n,i=t[u.getXKey(a)],r=null===t[a]||isNaN(t[a])?null:+t[a];return u.isCustomX()&&u.isCategorized()&&void 0!==i?(0===o&&0===e&&(c.axis_x_categories=[]),-1===(n=c.axis_x_categories.indexOf(i))&&(n=c.axis_x_categories.length,c.axis_x_categories.push(i))):n=u.generateTargetX(i,a,e),{x:n=void 0===t[a]||u.data.xs[a].length<=e?void 0:n,value:r,id:s}}).filter(function(t){return l(t.x)})}})).forEach(function(t){var e;c.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),u.data.xs[t.id].sort(function(t,e){return t-e})}),u.hasNegativeValue=u.hasNegativeValueInTargets(e),u.hasPositiveValue=u.hasPositiveValueInTargets(e),c.data_type&&u.setTargetType(u.mapToIds(e).filter(function(t){return!(t in c.data_types)}),c.data_type),e.forEach(function(t){u.addCache(t.id_org,t)}),e},S.isX=function(t){var e=this.config;return e.data_x&&t===e.data_x||y(e.data_xs)&&d(e.data_xs,t)},S.isNotX=function(t){return!this.isX(t)},S.getXKey=function(t){var e=this.config;return e.data_x||(y(e.data_xs)?e.data_xs[t]:null)},S.getXValuesOfXKey=function(e,t){var n,i=this;return(t&&y(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},S.getIndexByX=function(t){t=this.filterByX(this.data.targets,t);return t.length?t[0].index:null},S.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&_(this.data.xs[t][e])?this.data.xs[t][e]:e},S.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},S.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},S.addXs=function(e){var n=this;Object.keys(e).forEach(function(t){n.config.data_xs[t]=e[t]})},S.hasMultipleX=function(e){return 1<this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()},S.isMultipleX=function(){return y(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},S.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},S.getValueOnIndex=function(t,e){t=t.filter(function(t){return t.index===e});return t.length?t[0]:null},S.updateTargetX=function(t,i){var r=this;t.forEach(function(n){n.values.forEach(function(t,e){t.x=r.generateTargetX(i[e],n.id,e)}),r.data.xs[n.id]=i})},S.updateTargetXs=function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},S.generateTargetX=function(t,e,n){var i=this;return i.isTimeSeries()?t?i.parseDate(t):i.parseDate(i.getXValue(e,n)):i.isCustomX()&&!i.isCategorized()?_(t)?+t:i.getXValue(e,n):n},S.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},S.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},S.getPrevX=function(t){t=this.xs[t-1];return void 0!==t?t:null},S.getNextX=function(t){t=this.xs[t+1];return void 0!==t?t:null},S.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},S.getMaxDataCountTarget=function(t){var e,n=t.length,i=0;return 1<n?t.forEach(function(t){t.values.length>i&&(i=(e=t).values.length)}):e=n?t[0]:null,e},S.getEdgeX=function(t){return t.length?[this.d3.min(t,function(t){return t.values[0].x}),this.d3.max(t,function(t){return t.values[t.values.length-1].x})]:[0,0]},S.mapToIds=function(t){return t.map(function(t){return t.id})},S.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},S.hasTarget=function(t,e){for(var n=this.mapToIds(t),i=0;i<n.length;i++)if(n[i]===e)return!0;return!1},S.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},S.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},S.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},S.mapTargetsToUniqueXs=function(t){t=this.d3.set(this.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(t=this.isTimeSeries()?t.map(function(t){return new Date(+t)}):t.map(function(t){return+t})).sort(function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN})},S.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},S.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},S.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},S.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},S.getValuesAsIdKeyed=function(t){var n={};return t.forEach(function(e){n[e.id]=[],e.values.forEach(function(t){n[e.id].push(t.value)})}),n},S.checkValueInTargets=function(t,e){for(var n,i,r=Object.keys(t),a=0;a<r.length;a++)for(i=t[r[a]].values,n=0;n<i.length;n++)if(e(i[n].value))return!0;return!1},S.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})},S.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0<t})},S.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},S.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},S.getOrderFunction=function(){var n,t=this.config,e=this.isOrderAsc(),i=this.isOrderDesc();return e||i?function(t,e){function n(t,e){return t+Math.abs(e.value)}t=t.values.reduce(n,0),e=e.values.reduce(n,0);return i?e-t:t-e}:c(t.data_order)?t.data_order:a(t.data_order)?(n=t.data_order,function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}):void 0},S.orderTargets=function(t){var e=this.getOrderFunction();return e&&(t.sort(e),this.isOrderAsc()||this.isOrderDesc())&&t.reverse(),t},S.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},S.filterRemoveNull=function(t){return t.filter(function(t){return _(t.value)})},S.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},S.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!==m(t.data_labels)||!y(t.data_labels))},S.getDataLabelLength=function(t,e,n){var i=this,r=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=1.3*this.getBoundingClientRect()[n]}).remove(),r},S.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},S.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},S.findSameXOfValues=function(t,e){for(var n=t[e].x,i=[],r=e-1;0<=r&&n===t[r].x;r--)i.push(t[r]);for(r=e;r<t.length&&n===t[r].x;r++)i.push(t[r]);return i},S.findClosestFromTargets=function(t,e){var n=this,t=t.map(function(t){return n.findClosest(t.values,e)});return n.findClosest(t,e)},S.findClosest=function(t,n){var i,r=this,a=r.config.point_sensitivity;return t.filter(function(t){return t&&r.isBarType(t.id)}).forEach(function(t){var e=r.main.select("."+z.bars+r.getTargetSelectorSuffix(t.id)+" ."+z.bar+"-"+t.index).node();!i&&r.isWithinBar(e)&&(i=t)}),t.filter(function(t){return t&&!r.isBarType(t.id)}).forEach(function(t){var e=r.dist(t,n);e<a&&(a=e,i=t)}),i},S.dist=function(t,e){var n=this.config,i=n.axis_rotated?1:0,n=n.axis_rotated?0:1,r=this.circleY(t,t.index),t=this.x(t.x);return Math.sqrt(Math.pow(t-e[i],2)+Math.pow(r-e[n],2))},S.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},S.updateDataAttributes=function(t,e){var n=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach(function(t){n[t]=e[t]}),this.redraw({withLegend:!0})),n},S.load=function(n,i){var r=this;n&&(i.filter&&(n=n.filter(i.filter)),(i.type||i.types)&&n.forEach(function(t){var e=i.types&&i.types[t.id]?i.types[t.id]:i.type;r.setTargetType(t.id,e)}),r.data.targets.forEach(function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}}),r.data.targets=r.data.targets.concat(n)),r.updateTargets(r.data.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.done&&i.done()},S.loadFromArgs=function(e){var n=this;e.data?n.load(n.convertDataToTargets(e.data),e):e.url?n.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(t){n.load(n.convertDataToTargets(t),e)}):e.json?n.load(n.convertDataToTargets(n.convertJsonToData(e.json,e.keys)),e):e.rows?n.load(n.convertDataToTargets(n.convertRowsToData(e.rows)),e):e.columns?n.load(n.convertDataToTargets(n.convertColumnsToData(e.columns)),e):n.load(null,e)},S.unload=function(t,e){var n=this;e=e||function(){},(t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==t.length?(n.svg.selectAll(t.map(function(t){return n.selectorTarget(t)})).transition().style("opacity",0).remove().call(n.endall,e),t.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+z.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):e()},S.getYDomainMin=function(t){var e,n,i,r,a,o,s=this,u=s.config,c=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(o=s.hasNegativeValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(r=u.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(i=r[0],o&&l[i]&&l[i].forEach(function(t,e){l[i][e]=t<0?t:0}),n=1;n<r.length;n++)a=r[n],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(i)||!l[i]||o&&0<+t||(l[i][e]+=+t)});return s.d3.min(Object.keys(l).map(function(t){return s.d3.min(l[t])}))},S.getYDomainMax=function(t){var e,n,i,r,a,o,s=this,u=s.config,c=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(o=s.hasPositiveValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(r=u.data_groups[e].filter(function(t){return 0<=c.indexOf(t)})).length)for(i=r[0],o&&l[i]&&l[i].forEach(function(t,e){l[i][e]=0<t?t:0}),n=1;n<r.length;n++)a=r[n],l[a]&&l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(i)||!l[i]||o&&+t<0||(l[i][e]+=+t)});return s.d3.max(Object.keys(l).map(function(t){return s.d3.max(l[t])}))},S.getYDomain=function(t,e,n){var i,r,a,o,s=this,u=s.config,t=t.filter(function(t){return s.axis.getId(t.id)===e}),n=n?s.filterByXDomain(t,n):t,t="y2"===e?u.axis_y2_min:u.axis_y_min,c="y2"===e?u.axis_y2_max:u.axis_y_max,l=s.getYDomainMin(n),h=s.getYDomainMax(n),d="y2"===e?u.axis_y2_center:u.axis_y_center,f=s.hasType("bar",n)&&u.bar_zerobased||s.hasType("area",n)&&u.area_zerobased,g="y2"===e?u.axis_y2_inverted:u.axis_y_inverted,p=s.hasDataLabel()&&u.axis_rotated,x=s.hasDataLabel()&&!u.axis_rotated,l=_(t)?t:!_(c)||l<c?l:c-10,h=_(c)?c:!_(t)||t<h?h:t+10;return 0===n.length?("y2"===e?s.y2:s.y).domain():((l=isNaN(l)?0:l)===(h=isNaN(h)?l:h)&&(l<0?h=0:l=0),n=0<=l&&0<=h,o=l<=0&&h<=0,(f=_(t)&&n||_(c)&&o?!1:f)&&(n&&(l=0),o)&&(h=0),i=c=.1*(t=Math.abs(h-l)),void 0!==d&&(h=d+(a=Math.max(Math.abs(l),Math.abs(h))),l=d-a),p?(r=s.getDataLabelLength(l,h,"width"),d=V(s.y.range()),i+=t*((a=[r[0]/d,r[1]/d])[1]/(1-a[0]-a[1])),c+=t*(a[0]/(1-a[0]-a[1]))):x&&(r=s.getDataLabelLength(l,h,"height"),i+=s.axis.convertPixelsToAxisPadding(r[1],t),c+=s.axis.convertPixelsToAxisPadding(r[0],t)),"y"===e&&y(u.axis_y_padding)&&(i=s.axis.getPadding(u.axis_y_padding,"top",i,t),c=s.axis.getPadding(u.axis_y_padding,"bottom",c,t)),"y2"===e&&y(u.axis_y2_padding)&&(i=s.axis.getPadding(u.axis_y2_padding,"top",i,t),c=s.axis.getPadding(u.axis_y2_padding,"bottom",c,t)),f&&(n&&(c=l),o)&&(i=-h),p=[l-c,h+i],g?p.reverse():p)},S.getXDomainMin=function(t){var e=this,n=e.config;return void 0!==n.axis_x_min?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},S.getXDomainMax=function(t){var e=this,n=e.config;return void 0!==n.axis_x_max?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},S.getXDomainPadding=function(t){var e,n,i=this.config,t=t[1]-t[0],r=this.isCategorized()?0:this.hasType("bar")?1<(r=this.getMaxDataCount())?t/(r-1)/2:.5:.01*t;return"object"===m(i.axis_x_padding)&&y(i.axis_x_padding)?(e=_(i.axis_x_padding.left)?i.axis_x_padding.left:r,n=_(i.axis_x_padding.right)?i.axis_x_padding.right:r):e=n="number"==typeof i.axis_x_padding?i.axis_x_padding:r,{left:e,right:n}},S.getXDomain=function(t){var e=this,t=[e.getXDomainMin(t),e.getXDomainMax(t)],n=t[0],i=t[1],t=e.getXDomainPadding(t),r=0,a=0;return n-i!=0||e.isCategorized()||(i=e.isTimeSeries()?(n=new Date(.5*n.getTime()),new Date(1.5*i.getTime())):(n=0===n?1:.5*n,0===i?-1:1.5*i)),[r=!n&&0!==n?r:e.isTimeSeries()?new Date(n.getTime()-t.left):n-t.left,a=!i&&0!==i?a:e.isTimeSeries()?new Date(i.getTime()+t.right):i+t.right]},S.updateXDomain=function(t,e,n,i,r){var a=this,o=a.config;return n&&(a.x.domain(r||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),o.zoom_enabled&&a.zoom.scale(a.x).updateScaleExtent(),a.subX.domain(a.x.domain()),a.brush)&&a.brush.scale(a.subX),e&&(a.x.domain(r||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.extent())),o.zoom_enabled)&&a.zoom.scale(a.x).updateScaleExtent(),i&&a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},S.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],e=e[1];return t[0]<=n&&(t[1]=n-t[0]+ +t[1],t[0]=n),e<=t[1]&&(t[0]=+t[0]-(t[1]-e),t[1]=e),t},S.drag=function(t){var e,n,i,l,h,d,f,g=this,r=g.config,a=g.main,p=g.d3;g.hasArcType()||!r.data_selection_enabled||r.zoom_enabled&&!g.zoom.altDomain||r.data_selection_multiple&&(e=g.dragStart[0],n=g.dragStart[1],i=t[0],t=t[1],l=Math.min(e,i),h=Math.max(e,i),d=r.data_selection_grouped?g.margin.top:Math.min(n,t),f=r.data_selection_grouped?g.height:Math.max(n,t),a.select("."+z.dragarea).attr("x",l).attr("y",d).attr("width",h-l).attr("height",f-d),a.selectAll("."+z.shapes).selectAll("."+z.shape).filter(function(t){return r.data_selection_isselectable(t)}).each(function(t,e){var n,i,r,a,o=p.select(this),s=o.classed(z.SELECTED),u=o.classed(z.INCLUDED),c=!1;if(o.classed(z.circle))n=+o.attr("cx"),i=+o.attr("cy"),r=g.togglePoint,c=l<n&&n<h&&d<i&&i<f;else{if(!o.classed(z.bar))return;n=(a=x(this)).x,i=a.y,r=g.togglePath,c=!(h<n||n+a.width<l||f<i||i+a.height<d)}c^u&&(o.classed(z.INCLUDED,!u),o.classed(z.SELECTED,!s),r.call(g,!s,o,t,e))}))},S.dragstart=function(t){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.dragStart=t,e.main.select("."+z.chart).append("rect").attr("class",z.dragarea).style("opacity",.1),e.dragging=!0)},S.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&&(t.main.select("."+z.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+z.shape).classed(z.INCLUDED,!1),t.dragging=!1)},S.getYFormat=function(t){var i=this,r=t&&!i.hasType("gauge")?i.defaultArcValueFormat:i.yFormat,a=t&&!i.hasType("gauge")?i.defaultArcValueFormat:i.y2Format;return function(t,e,n){return("y2"===i.axis.getId(n)?a:r).call(i,t,e)}},S.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format||this.defaultValueFormat)(t)},S.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format||this.defaultValueFormat)(t)},S.defaultValueFormat=function(t){return _(t)?+t:""},S.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},S.dataLabelFormat=function(t){function e(t){return _(t)?+t:""}var n=this.config.data_labels;return"function"==typeof n.format?n.format:"object"===m(n.format)?n.format[t]?!0===n.format[t]?e:n.format[t]:function(){return""}:e},S.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",z.grid),e.grid_x_show&&t.grid.append("g").attr("class",z.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",z.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",z.xgridFocus).append("line").attr("class",z.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},S.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",z.grid+" "+z.gridLines),t.gridLines.append("g").attr("class",z.xgridLines),t.gridLines.append("g").attr("class",z.ygridLines),t.xgridLines=e.selectAll([])},S.updateXGrid=function(t){var e=this,n=e.config,i=e.d3,r=e.generateGridData(n.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgrid=e.main.select("."+z.xgrids).selectAll("."+z.xgrid).data(r),e.xgrid.enter().append("line").attr("class",z.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",function(){return+i.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1}),e.xgrid.exit().remove()},S.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+z.ygrids).selectAll("."+z.ygrid).data(n),t.ygrid.enter().append("line").attr("class",z.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},S.gridTextAnchor=function(t){return t.position||"end"},S.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},S.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},S.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},S.updateGrid=function(t){var e,n=this,i=n.main,r=n.config;n.grid.style("visibility",n.hasArcType()?"hidden":"visible"),i.select("line."+z.xgridFocus).style("visibility","hidden"),r.grid_x_show&&n.updateXGrid(),n.xgridLines=i.select("."+z.xgridLines).selectAll("."+z.xgridLine).data(r.grid_x_lines),(e=n.xgridLines.enter().append("g").attr("class",function(t){return z.xgridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),e.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",r.axis_rotated?"":"rotate(-90)").attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0),n.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),r.grid_y_show&&n.updateYGrid(),n.ygridLines=i.select("."+z.ygridLines).selectAll("."+z.ygridLine).data(r.grid_y_lines),(e=n.ygridLines.enter().append("g").attr("class",function(t){return z.ygridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),e.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",r.axis_rotated?"rotate(-90)":"").attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0),i=n.yv.bind(n),n.ygridLines.select("line").transition().duration(t).attr("x1",r.axis_rotated?i:0).attr("x2",r.axis_rotated?i:n.width).attr("y1",r.axis_rotated?0:i).attr("y2",r.axis_rotated?n.height:i).style("opacity",1),n.ygridLines.select("text").transition().duration(t).attr("x",(r.axis_rotated?n.xGridTextX:n.yGridTextX).bind(n)).attr("y",i).text(function(t){return t.text}).style("opacity",1),n.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},S.redrawGrid=function(t){var e=this,n=e.config,i=e.xv.bind(e),r=e.xgridLines.select("line"),a=e.xgridLines.select("text");return[(t?r.transition():r).attr("x1",n.axis_rotated?0:i).attr("x2",n.axis_rotated?e.width:i).attr("y1",n.axis_rotated?i:0).attr("y2",n.axis_rotated?i:e.height).style("opacity",1),(t?a.transition():a).attr("x",(n.axis_rotated?e.yGridTextX:e.xGridTextX).bind(e)).attr("y",i).text(function(t){return t.text}).style("opacity",1)]},S.showXGridFocus=function(t){var e=this,n=e.config,t=t.filter(function(t){return t&&_(t.value)}),i=e.main.selectAll("line."+z.xgridFocus),r=e.xx.bind(e);!n.tooltip_show||e.hasType("scatter")||e.hasArcType()||(i.style("visibility","visible").data([t[0]]).attr(n.axis_rotated?"y1":"x1",r).attr(n.axis_rotated?"y2":"x2",r),e.smoothLines(i,"grid"))},S.hideXGridFocus=function(){this.main.select("line."+z.xgridFocus).style("visibility","hidden")},S.updateXgridFocus=function(){var t=this.config;this.main.select("line."+z.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},S.generateGridData=function(t,e){var n,i,r,a=[],o=this.main.select("."+z.axisX).selectAll(".tick").size();if("year"===t)for(n=(t=this.getXDomain())[0].getFullYear(),i=t[1].getFullYear(),r=n;r<=i;r++)a.push(new Date(r+"-01-01 00:00:00"));else(a=e.ticks(10)).length>o&&(a=a.filter(function(t){return(""+t).indexOf(".")<0}));return a},S.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}),n}:function(){return!0}},S.removeGridLines=function(t,e){function n(t){return!r(t)}var i=this.config,r=this.getGridFilterToRemove(t),t=e?z.xgridLine:z.ygridLine;this.main.select("."+(e?z.xgridLines:z.ygridLines)).selectAll("."+t).filter(r).transition().duration(i.transition_duration).style("opacity",0).remove(),e?i.grid_x_lines=i.grid_x_lines.filter(n):i.grid_y_lines=i.grid_y_lines.filter(n)},S.initEventRect=function(){this.main.select("."+z.chart).append("g").attr("class",z.eventRects).style("fill-opacity",0)},S.redrawEventRect=function(){var t,e=this,n=e.config,i=e.isMultipleX(),n=e.main.select("."+z.eventRects).style("cursor",n.zoom_enabled?n.axis_rotated?"ns-resize":"ew-resize":null).classed(z.eventRectsMultiple,i).classed(z.eventRectsSingle,!i);n.selectAll("."+z.eventRect).remove(),e.eventRect=n.selectAll("."+z.eventRect),i?(t=e.eventRect.data([0]),e.generateEventRectsForMultipleXs(t.enter()),e.updateEventRect(t)):(i=e.getMaxDataCountTarget(e.data.targets),n.datum(i?i.values:[]),e.eventRect=n.selectAll("."+z.eventRect),t=e.eventRect.data(function(t){return t}),e.generateEventRectsForSingleX(t.enter()),e.updateEventRect(t),t.exit().remove())},S.updateEventRect=function(t){var e,n,i,r,a,o=this,s=o.config;t=t||o.eventRect.data(function(t){return t}),a=o.isMultipleX()?(n=e=0,i=o.width,o.height):(a=!o.isCustomX()&&!o.isTimeSeries()||o.isCategorized()?(r=o.getEventRectWidth(),function(t){return o.x(t.x)-r/2}):(o.updateXs(),r=function(t){var e=o.getPrevX(t.index),t=o.getNextX(t.index);return null===e&&null===t?s.axis_rotated?o.height:o.width:(null===e&&(e=o.x.domain()[0]),null===t&&(t=o.x.domain()[1]),Math.max(0,(o.x(t)-o.x(e))/2))},function(t){var e=o.getPrevX(t.index),n=o.getNextX(t.index),t=o.data.xs[t.id][t.index];return null===e&&null===n?0:(null===e&&(e=o.x.domain()[0]),(o.x(t)+o.x(e))/2)}),e=s.axis_rotated?0:a,n=s.axis_rotated?a:0,i=s.axis_rotated?o.width:r,s.axis_rotated?r:o.height),t.attr("class",o.classEvent.bind(o)).attr("x",e).attr("y",n).attr("width",i).attr("height",a)},S.generateEventRectsForSingleX=function(t){var i=this,r=i.d3,a=i.config;t.append("rect").attr("class",i.classEvent.bind(i)).style("cursor",a.data_selection_enabled&&a.data_selection_grouped?"pointer":null).on("mouseover",function(t){t=t.index;i.dragging||i.flowing||i.hasArcType()||(a.point_focus_expand_enabled&&i.expandCircles(t,null,!0),i.expandBars(t,null,!0),i.main.selectAll("."+z.shape+"-"+t).each(function(t){a.data_onmouseover.call(i.api,t)}))}).on("mouseout",function(t){t=t.index;i.config&&!i.hasArcType()&&(i.hideXGridFocus(),i.hideTooltip(),i.unexpandCircles(),i.unexpandBars(),i.main.selectAll("."+z.shape+"-"+t).each(function(t){a.data_onmouseout.call(i.api,t)}))}).on("mousemove",function(t){var e=t.index,n=i.svg.select("."+z.eventRect+"-"+e);i.dragging||i.flowing||i.hasArcType()||(i.isStepType(t)&&"step-after"===i.config.line_step_type&&r.mouse(this)[0]<i.x(i.getXValue(t.id,e))&&--e,t=i.filterTargetsToShow(i.data.targets).map(function(t){return i.addName(i.getValueOnIndex(t.values,e))}),a.tooltip_grouped&&(i.showTooltip(t,this),i.showXGridFocus(t)),a.tooltip_grouped&&(!a.data_selection_enabled||a.data_selection_grouped))||i.main.selectAll("."+z.shape+"-"+e).each(function(){r.select(this).classed(z.EXPANDED,!0),a.data_selection_enabled&&n.style("cursor",a.data_selection_grouped?"pointer":null),a.tooltip_grouped||(i.hideXGridFocus(),i.hideTooltip(),a.data_selection_grouped)||(i.unexpandCircles(e),i.unexpandBars(e))}).filter(function(t){return i.isWithinShape(this,t)}).each(function(t){a.data_selection_enabled&&(a.data_selection_grouped||a.data_selection_isselectable(t))&&n.style("cursor","pointer"),a.tooltip_grouped||(i.showTooltip([t],this),i.showXGridFocus([t]),a.point_focus_expand_enabled&&i.expandCircles(e,t.id,!0),i.expandBars(e,t.id,!0))})}).on("click",function(t){var e=t.index;!i.hasArcType()&&i.toggleShape&&(i.cancelClick?i.cancelClick=!1:(i.isStepType(t)&&"step-after"===a.line_step_type&&r.mouse(this)[0]<i.x(i.getXValue(t.id,e))&&--e,i.main.selectAll("."+z.shape+"-"+e).each(function(t){(a.data_selection_grouped||i.isWithinShape(this,t))&&(i.toggleShape(this,t,e),i.config.data_onclick.call(i.api,t,this))})))}).call(a.data_selection_draggable&&i.drag?r.behavior.drag().origin(Object).on("drag",function(){i.drag(r.mouse(this))}).on("dragstart",function(){i.dragstart(r.mouse(this))}).on("dragend",function(){i.dragend()}):function(){})},S.generateEventRectsForMultipleXs=function(t){function i(){r.svg.select("."+z.eventRect).style("cursor",null),r.hideXGridFocus(),r.hideTooltip(),r.unexpandCircles(),r.unexpandBars()}var r=this,a=r.d3,o=r.config;t.append("rect").attr("x",0).attr("y",0).attr("width",r.width).attr("height",r.height).attr("class",z.eventRect).on("mouseout",function(){!r.config||r.hasArcType()||i()}).on("mousemove",function(){var t,e,n=r.filterTargetsToShow(r.data.targets);r.dragging||r.hasArcType(n)||(t=a.mouse(this),e=r.findClosestFromTargets(n,t),!r.mouseover||e&&e.id===r.mouseover.id||(o.data_onmouseout.call(r.api,r.mouseover),r.mouseover=void 0),e?(n=(r.isScatterType(e)||!o.tooltip_grouped?[e]:r.filterByX(n,e.x)).map(function(t){return r.addName(t)}),r.showTooltip(n,this),o.point_focus_expand_enabled&&r.expandCircles(e.index,e.id,!0),r.expandBars(e.index,e.id,!0),r.showXGridFocus(n),(r.isBarType(e.id)||r.dist(e,t)<o.point_sensitivity)&&(r.svg.select("."+z.eventRect).style("cursor","pointer"),r.mouseover||(o.data_onmouseover.call(r.api,e),r.mouseover=e))):i())}).on("click",function(){var t,e,n=r.filterTargetsToShow(r.data.targets);r.hasArcType(n)||(t=a.mouse(this),(e=r.findClosestFromTargets(n,t))&&(r.isBarType(e.id)||r.dist(e,t)<o.point_sensitivity)&&r.main.selectAll("."+z.shapes+r.getTargetSelectorSuffix(e.id)).selectAll("."+z.shape+"-"+e.index).each(function(){(o.data_selection_grouped||r.isWithinShape(this,e))&&(r.toggleShape(this,e,e.index),r.config.data_onclick.call(r.api,e,this))}))}).call(o.data_selection_draggable&&r.drag?a.behavior.drag().origin(Object).on("drag",function(){r.drag(a.mouse(this))}).on("dragstart",function(){r.dragstart(a.mouse(this))}).on("dragend",function(){r.dragend()}):function(){})},S.dispatchEvent=function(t,e,n){var e="."+z.eventRect+(this.isMultipleX()?"":"-"+e),e=this.main.select(e).node(),i=e.getBoundingClientRect(),r=i.left+(n?n[0]:0),i=i.top+(n?n[1]:0),n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,0,r,i,r,i,!1,!1,!1,!1,0,null),e.dispatchEvent(n)},S.initLegend=function(){var t=this;t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),t.config.legend_show?t.updateLegendWithDefaults():(t.legend.style("visibility","hidden"),t.hiddenLegendIds=t.mapToIds(t.data.targets))},S.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},S.updateSizeForLegend=function(t,e){var n=this,i=n.config,i={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?i.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?i.left:0}},S.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},S.updateLegendStep=function(t){this.legendStep=t},S.updateLegendItemWidth=function(t){this.legendItemWidth=t},S.updateLegendItemHeight=function(t){this.legendItemHeight=t},S.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},S.getLegendHeight=function(){var t=this,e=0;return e=t.config.legend_show?t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1):e},S.opacityForLegend=function(t){return t.classed(z.legendItemHidden)?null:1},S.opacityForUnfocusedLegend=function(t){return t.classed(z.legendItemHidden)?null:.3},S.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+z.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(z.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))})},S.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+z.legendItem).classed(z.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},S.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered)||e.updateLegendWithDefaults(),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},S.hideLegend=function(t){var e=this,n=e.config;n.legend_show&&h(t)&&(n.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},S.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},S.updateLegend=function(c,t,e){function n(t,e,n){function i(t,e){e||(r=(u-A-s)/2)<S&&(r=(u-s)/2,A=0,E++),M[t]=E,L[E]=x.isLegendInset?10:r,T[t]=A,A+=s}var r,a=0===n,n=n===c.length-1,t=(t=t,o=e,x.legendItemTextBox[o]||(x.legendItemTextBox[o]=x.getTextRect(t.textContent,z.legendItem,t)),x.legendItemTextBox[o]),o=t.width+b+(!n||x.isLegendRight||x.isLegendInset?m:0)+_.legend_padding,n=t.height+y,s=x.isLegendRight||x.isLegendInset?n:o,u=x.isLegendRight||x.isLegendInset?x.getLegendHeight():x.getLegendWidth();a&&(w=v=E=A=0),!_.legend_show||x.isLegendToShow(e)?(P[e]=o,C[e]=n,(!v||v<=o)&&(v=o),(!w||w<=n)&&(w=n),t=x.isLegendRight||x.isLegendInset?w:v,_.legend_equally?(Object.keys(P).forEach(function(t){P[t]=v}),Object.keys(C).forEach(function(t){C[t]=w}),(r=(u-t*c.length)/2)<S?(E=A=0,c.forEach(function(t){i(t)})):i(e,!0)):i(e)):P[e]=C[e]=M[e]=T[e]=0}var i,r,a,o,s,u,l,h,d,f,g,p,x=this,_=x.config,y=4,m=10,v=0,w=0,S=10,b=_.legend_item_tile_width+5,A=0,T={},P={},C={},L=[0],M={},E=0;c=c.filter(function(t){return!(void 0!==_.data_names[t])||null!==_.data_names[t]}),d=F(t=t||{},"withTransition",!0),t=F(t,"withTransitionForTransform",!0),x.isLegendInset&&(E=_.legend_inset_step||c.length,x.updateLegendStep(E)),a=x.isLegendRight?(i=function(t){return v*M[t]},function(t){return L[M[t]]+T[t]}):x.isLegendInset?(i=function(t){return v*M[t]+10},function(t){return L[M[t]]+T[t]}):(i=function(t){return L[M[t]]+T[t]},function(t){return w*M[t]}),g=function(t,e){return i(t,e)+4+_.legend_item_tile_width},o=function(t,e){return a(t,e)+9},r=function(t,e){return i(t,e)},s=function(t,e){return a(t,e)-5},u=function(t,e){return i(t,e)-2},l=function(t,e){return i(t,e)-2+_.legend_item_tile_width},h=function(t,e){return a(t,e)+4},(p=x.legend.selectAll("."+z.legendItem).data(c).enter().append("g").attr("class",function(t){return x.generateClass(z.legendItem,t)}).style("visibility",function(t){return x.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){_.legend_item_onclick?_.legend_item_onclick.call(x,t):x.d3.event.altKey?(x.api.hide(),x.api.show(t)):(x.api.toggle(t),x.isTargetToShow(t)?x.api.focus(t):x.api.revert())}).on("mouseover",function(t){_.legend_item_onmouseover?_.legend_item_onmouseover.call(x,t):(x.d3.select(this).classed(z.legendItemFocused,!0),!x.transiting&&x.isTargetToShow(t)&&x.api.focus(t))}).on("mouseout",function(t){_.legend_item_onmouseout?_.legend_item_onmouseout.call(x,t):(x.d3.select(this).classed(z.legendItemFocused,!1),x.api.revert())})).append("text").text(function(t){return void 0!==_.data_names[t]?_.data_names[t]:t}).each(function(t,e){n(this,t,e)}).style("pointer-events","none").attr("x",x.isLegendRight||x.isLegendInset?g:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:o),p.append("rect").attr("class",z.legendItemEvent).style("fill-opacity",0).attr("x",x.isLegendRight||x.isLegendInset?r:-200).attr("y",x.isLegendRight||x.isLegendInset?-200:s),p.append("line").attr("class",z.legendItemTile).style("stroke",x.color).style("pointer-events","none").attr("x1",x.isLegendRight||x.isLegendInset?u:-200).attr("y1",x.isLegendRight||x.isLegendInset?-200:h).attr("x2",x.isLegendRight||x.isLegendInset?l:-200).attr("y2",x.isLegendRight||x.isLegendInset?-200:h).attr("stroke-width",_.legend_item_tile_height),p=x.legend.select("."+z.legendBackground+" rect"),x.isLegendInset&&0<v&&0===p.size()&&(p=x.legend.insert("g","."+z.legendItem).attr("class",z.legendBackground).append("rect")),f=x.legend.selectAll("text").data(c).text(function(t){return void 0!==_.data_names[t]?_.data_names[t]:t}).each(function(t,e){n(this,t,e)}),(d?f.transition():f).attr("x",g).attr("y",o),f=x.legend.selectAll("rect."+z.legendItemEvent).data(c),(d?f.transition():f).attr("width",function(t){return P[t]}).attr("height",function(t){return C[t]}).attr("x",r).attr("y",s),g=x.legend.selectAll("line."+z.legendItemTile).data(c),(d?g.transition():g).style("stroke",x.color).attr("x1",u).attr("y1",h).attr("x2",l).attr("y2",h),p&&(d?p.transition():p).attr("height",x.getLegendHeight()-12).attr("width",v*(E+1)+10),x.legend.selectAll("."+z.legendItem).classed(z.legendItemHidden,function(t){return!x.isTargetToShow(t)}),x.updateLegendItemWidth(v),x.updateLegendItemHeight(w),x.updateLegendStep(E),x.updateSizes(),x.updateScales(),x.updateSvgSize(),x.transformAll(t,e),x.legendHasRendered=!0},S.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",z.regions)},S.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+z.regions).selectAll("."+z.region).data(n.regions),e.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),e.mainRegion.attr("class",e.classRegion.bind(e)),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},S.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect").each(function(){var t=e.d3.select(this.parentNode).datum();e.d3.select(this).datum(t)}),i=e.regionX.bind(e),r=e.regionY.bind(e),a=e.regionWidth.bind(e),o=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",i).attr("y",r).attr("width",a).attr("height",o).style("fill-opacity",function(t){return _(t.opacity)?t.opacity:.1})]},S.regionX=function(t){var e=this,n=e.config,i="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?n.axis_rotated&&"start"in t?i(t.start):0:!n.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},S.regionY=function(t){var e=this,n=e.config,i="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?!n.axis_rotated&&"end"in t?i(t.end):0:n.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},S.regionWidth=function(t){var e=this,n=e.config,i=e.regionX(t),r="y"===t.axis?e.y:e.y2,r="y"===t.axis||"y2"===t.axis?n.axis_rotated&&"end"in t?r(t.end):e.width:!n.axis_rotated&&"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.width;return r<i?0:r-i},S.regionHeight=function(t){var e=this,n=e.config,i=this.regionY(t),r="y"===t.axis?e.y:e.y2,r="y"===t.axis||"y2"===t.axis?!n.axis_rotated&&"start"in t?r(t.start):e.height:n.axis_rotated&&"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.height;return r<i?0:r-i},S.isRegionOnX=function(t){return!t.axis||"x"===t.axis},S.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},S.getX=function(t,e,n,i){var r,a=this.getScale(t,e,this.isTimeSeries()),o=n?a.domain(n):a,a=this.isCategorized()?(i=i||function(){return 0},function(t,e){t=o(t)+i(t);return e?t:Math.ceil(t)}):function(t,e){t=o(t);return e?t:Math.ceil(t)};for(r in o)a[r]=o[r];return a.orgDomain=function(){return o.domain()},this.isCategorized()&&(a.domain=function(t){return arguments.length?(o.domain(t),a):[(t=this.orgDomain())[0],t[1]+1]}),a},S.getY=function(t,e,n){t=this.getScale(t,e,this.isTimeSeriesY());return n&&t.domain(n),t},S.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},S.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},S.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),n||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},S.selectPoint=function(t,e,n){var i=this,r=i.config,a=(r.axis_rotated?i.circleY:i.circleX).bind(i),o=(r.axis_rotated?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);r.data_onselected.call(i.api,e,t.node()),i.main.select("."+z.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+z.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(z.selectedCircle,n)}).attr("cx",a).attr("cy",o).attr("stroke",function(){return i.color(e)}).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",s)},S.unselectPoint=function(t,e,n){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+z.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+z.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},S.togglePoint=function(t,e,n,i){t?this.selectPoint(e,n,i):this.unselectPoint(e,n,i)},S.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(e)).brighter(.75)})},S.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},S.togglePath=function(t,e,n,i){t?this.selectPath(e,n,i):this.unselectPath(e,n,i)},S.getToggle=function(t,e){var n;return"circle"===t.nodeName?n=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(n=this.togglePath),n},S.toggleShape=function(t,e,n){var i=this,r=i.d3,a=i.config,o=r.select(t),s=o.classed(z.SELECTED),u=i.getToggle(t,e).bind(i);a.data_selection_enabled&&a.data_selection_isselectable(e)&&(a.data_selection_multiple||i.main.selectAll("."+z.shapes+(a.data_selection_grouped?i.getTargetSelectorSuffix(e.id):"")).selectAll("."+z.shape).each(function(t,e){var n=r.select(this);n.classed(z.SELECTED)&&u(!1,n.classed(z.SELECTED,!1),t,e)}),o.classed(z.SELECTED,!s),u(!s,o,e,n))},S.initBar=function(){this.main.select("."+z.chart).append("g").attr("class",z.chartBars)},S.updateTargetsForBar=function(t){var e=this,n=e.config,i=e.classChartBar.bind(e),r=e.classBars.bind(e),a=e.classFocus.bind(e);e.main.select("."+z.chartBars).selectAll("."+z.chartBar).data(t).attr("class",function(t){return i(t)+a(t)}).enter().append("g").attr("class",i).style("pointer-events","none").append("g").attr("class",r).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null})},S.updateBar=function(t){function e(t){return n.color(t.id)}var n=this,i=n.barData.bind(n),r=n.classBar.bind(n),a=n.initialOpacity.bind(n);n.mainBar=n.main.selectAll("."+z.bars).selectAll("."+z.bar).data(i),n.mainBar.enter().append("path").attr("class",r).style("stroke",e).style("fill",e),n.mainBar.style("opacity",a),n.mainBar.exit().transition().duration(t).remove()},S.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},S.getBarW=function(t,e){var n=this.config,t="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&t>n.bar_width_max?n.bar_width_max:t},S.getBars=function(t,e){return(e?this.main.selectAll("."+z.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+z.bar+(_(t)?"-"+t:""))},S.expandBars=function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(z.EXPANDED,!0)},S.unexpandBars=function(t){this.getBars(t).classed(z.EXPANDED,!1)},S.generateDrawBar=function(t,e){var i=this.config,r=this.generateGetBarPoints(t,e);return function(t,e){var t=r(t,e),e=i.axis_rotated?1:0,n=i.axis_rotated?0:1;return"M "+t[0][e]+","+t[0][n]+" L"+t[1][e]+","+t[1][n]+" L"+t[2][e]+","+t[2][n]+" L"+t[3][e]+","+t[3][n]+" z"}},S.generateGetBarPoints=function(t,e){var a=this,n=e?a.subXAxis:a.xAxis,i=t.__max__+1,o=a.getBarW(n,i),s=a.getShapeX(o,i,t,!!e),u=a.getShapeY(!!e),c=a.getShapeOffset(a.isBarType,t,!!e),l=o*(a.config.bar_space/2),h=e?a.getSubYScale:a.getYScale;return function(t,e){var n=h.call(a,t.id)(0),e=c(t,e)||n,i=s(t),r=u(t);return a.config.axis_rotated&&(0<t.value&&r<n||t.value<0&&n<r)&&(r=n),[[i+l,e],[i+l,r-(n-e)],[i+o-l,r-(n-e)],[i+o-l,e]]}},S.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),i=t.pathSegList.getItem(0),t=t.pathSegList.getItem(1),r=Math.min(i.x,t.x),i=Math.min(i.y,t.y),t=r+n.width+2,n=i+n.height+2;return r-2<e[0]&&e[0]<t&&i-2<e[1]&&e[1]<n},S.getShapeIndices=function(t){var e,n,i=this.config,r={},a=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(e=0;e<i.data_groups.length;e++)if(!(i.data_groups[e].indexOf(t.id)<0))for(n=0;n<i.data_groups[e].length;n++)if(i.data_groups[e][n]in r){r[t.id]=r[i.data_groups[e][n]];break}void 0===r[t.id]&&(r[t.id]=a++)}),r.__max__=a-1,r},S.getShapeX=function(n,i,r,t){var a=t?this.subX:this.x;return function(t){var e=t.id in r?r[t.id]:0;return t.x||0===t.x?a(t.x)-n*(i/2-e):0}},S.getShapeY=function(e){var n=this;return function(t){return(e?n.getSubYScale(t.id):n.getYScale(t.id))(t.value)}},S.getShapeOffset=function(t,s,e){var u=this,c=u.orderTargets(u.filterTargetsToShow(u.data.targets.filter(t,u))),l=c.map(function(t){return t.id});return function(n,i){var r=e?u.getSubYScale(n.id):u.getYScale(n.id),a=r(0),o=a;return c.forEach(function(t){var e=u.isStepType(n)?u.convertValuesToStep(t.values):t.values;t.id!==n.id&&s[t.id]===s[n.id]&&l.indexOf(t.id)<l.indexOf(n.id)&&(void 0!==e[i]&&+e[i].x==+n.x||(i=-1,e.forEach(function(t,e){t.x===n.x&&(i=e)})),i in e)&&0<=e[i].value*n.value&&(o+=r(e[i].value)-a)}),o}},S.isWithinShape=function(t,e){var n,i=this,r=i.d3.select(t);return i.isTargetToShow(e.id)?"circle"===t.nodeName?n=i.isStepType(e)?i.isWithinStep(t,i.getYScale(e.id)(e.value)):i.isWithinCircle(t,1.5*i.pointSelectR(e)):"path"===t.nodeName&&(n=!r.classed(z.bar)||i.isWithinBar(t)):n=!1,n},S.getInterpolate=function(t){var e=this,n=e.isInterpolationType(e.config.spline_interpolation_type)?e.config.spline_interpolation_type:"cardinal";return e.isSplineType(t)?n:e.isStepType(t)?e.config.line_step_type:"linear"},S.initLine=function(){this.main.select("."+z.chart).append("g").attr("class",z.chartLines)},S.updateTargetsForLine=function(t){var e,n=this,i=n.config,r=n.classChartLine.bind(n),a=n.classLines.bind(n),o=n.classAreas.bind(n),s=n.classCircles.bind(n),u=n.classFocus.bind(n);(e=n.main.select("."+z.chartLines).selectAll("."+z.chartLine).data(t).attr("class",function(t){return r(t)+u(t)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",a),e.append("g").attr("class",o),e.append("g").attr("class",function(t){return n.generateClass(z.selectedCircles,t.id)}),e.append("g").attr("class",s).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(e){n.main.selectAll("."+z.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+z.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},S.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+z.lines).selectAll("."+z.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},S.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},S.generateDrawLine=function(t,o){function e(t){return(o?s.subxx:s.xx).call(s,t)}function n(t,e){return 0<u.data_groups.length?i(t,e)[0][1]:l.call(s,t.id)(t.value)}var s=this,u=s.config,c=s.d3.svg.line(),i=s.generateGetLinePoints(t,o),l=o?s.getSubYScale:s.getYScale,c=u.axis_rotated?c.x(n).y(e):c.x(e).y(n);return u.line_connectNull||(c=c.defined(function(t){return null!=t.value})),function(t){var e=u.line_connectNull?s.filterRemoveNull(t.values):t.values,n=o?s.x:s.subX,i=l.call(s,t.id),r=0,a=0,t=s.isLineType(t)?u.data_regions[t.id]?s.lineWithRegions(e,n,i,u.data_regions[t.id]):(s.isStepType(t)&&(e=s.convertValuesToStep(e)),c.interpolate(s.getInterpolate(t))(e)):(e[0]&&(r=n(e[0].x),a=i(e[0].value)),u.axis_rotated?"M "+a+" "+r:"M "+r+" "+a);return t||"M 0 0"}},S.generateGetLinePoints=function(t,e){var a=this,o=a.config,n=t.__max__+1,s=a.getShapeX(0,n,t,!!e),u=a.getShapeY(!!e),c=a.getShapeOffset(a.isLineType,t,!!e),l=e?a.getSubYScale:a.getYScale;return function(t,e){var n=l.call(a,t.id)(0),e=c(t,e)||n,i=s(t),r=u(t);return[[i,(r=o.axis_rotated&&(0<t.value&&r<n||t.value<0&&n<r)?n:r)-(n-e)],[i,r-(n-e)],[i,r-(n-e)],[i,r-(n-e)]]}},S.lineWithRegions=function(t,a,o,e){function s(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}var n,i,r,u,c,l,h,d,f,g,p,x=this,_=x.config,y="M",m=x.isCategorized()?.5:0,v=[];if(void 0!==e)for(n=0;n<e.length;n++)v[n]={},void 0===e[n].start?v[n].start=t[0].x:v[n].start=x.isTimeSeries()?x.parseDate(e[n].start):e[n].start,void 0===e[n].end?v[n].end=t[t.length-1].x:v[n].end=x.isTimeSeries()?x.parseDate(e[n].end):e[n].end;for(g=_.axis_rotated?function(t){return o(t.value)}:function(t){return a(t.x)},p=_.axis_rotated?function(t){return a(t.x)}:function(t){return o(t.value)},r=x.isTimeSeries()?function(t,e,n,i){var r=t.x.getTime(),e=e.x-t.x,t=new Date(r+e*n),r=new Date(r+e*(n+i));return s(_.axis_rotated?[[o(c(n)),a(t)],[o(c(n+i)),a(r)]]:[[a(t),o(c(n))],[a(r),o(c(n+i))]])}:function(t,e,n,i){return s(_.axis_rotated?[[o(c(n),!0),a(u(n))],[o(c(n+i),!0),a(u(n+i))]]:[[a(u(n),!0),o(c(n))],[a(u(n+i),!0),o(c(n+i))]])},n=0;n<t.length;n++){if(void 0!==v&&((t,e)=>{for(var n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return 1})(t[n].x,v))for(u=x.getScale(t[n-1].x+m,t[n].x+m,x.isTimeSeries()),c=x.getScale(t[n-1].value,t[n].value),l=a(t[n].x)-a(t[n-1].x),h=o(t[n].value)-o(t[n-1].value),f=2*(d=2/Math.sqrt(Math.pow(l,2)+Math.pow(h,2))),i=d;i<=1;i+=f)y+=r(t[n-1],t[n],i,d);else y+=" "+g(t[n])+" "+p(t[n]);t[n].x}return y},S.updateArea=function(t){var e=this,n=e.d3;e.mainArea=e.main.selectAll("."+z.areas).selectAll("."+z.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},S.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},S.generateDrawArea=function(t,e){function n(t){return(e?a.subxx:a.xx).call(a,t)}function i(t,e){return 0<o.data_groups.length?u(t,e)[0][1]:c.call(a,t.id)(a.getAreaBaseValue(t.id))}function r(t,e){return 0<o.data_groups.length?u(t,e)[1][1]:c.call(a,t.id)(t.value)}var a=this,o=a.config,s=a.d3.svg.area(),u=a.generateGetAreaPoints(t,e),c=e?a.getSubYScale:a.getYScale,s=o.axis_rotated?s.x0(i).x1(r).y(n):s.x(n).y0(o.area_above?0:i).y1(r);return o.line_connectNull||(s=s.defined(function(t){return null!==t.value})),function(t){var e=o.line_connectNull?a.filterRemoveNull(t.values):t.values,n=0,i=0,t=a.isAreaType(t)?(a.isStepType(t)&&(e=a.convertValuesToStep(e)),s.interpolate(a.getInterpolate(t))(e)):(e[0]&&(n=a.x(e[0].x),i=a.getYScale(t.id)(e[0].value)),o.axis_rotated?"M "+i+" "+n:"M "+n+" "+i);return t||"M 0 0"}},S.getAreaBaseValue=function(){return 0},S.generateGetAreaPoints=function(t,e){var a=this,o=a.config,n=t.__max__+1,s=a.getShapeX(0,n,t,!!e),u=a.getShapeY(!!e),c=a.getShapeOffset(a.isAreaType,t,!!e),l=e?a.getSubYScale:a.getYScale;return function(t,e){var n=l.call(a,t.id)(0),e=c(t,e)||n,i=s(t),r=u(t);return[[i,e],[i,(r=o.axis_rotated&&(0<t.value&&r<n||t.value<0&&n<r)?n:r)-(n-e)],[i,r-(n-e)],[i,e]]}},S.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+z.circles).selectAll("."+z.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},S.redrawCircle=function(t,e,n){var i=this.main.selectAll("."+z.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(n?i.transition(Math.random().toString()):i).attr("cx",t).attr("cy",e)]},S.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},S.updateCircleY=function(){var t,n,e=this;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),n=e.generateGetLinePoints(t),e.circleY=function(t,e){return n(t,e)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},S.getCircles=function(t,e){return(e?this.main.selectAll("."+z.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+z.circle+(_(t)?"-"+t:""))},S.expandCircles=function(t,e,n){var i=this.pointExpandedR.bind(this);n&&this.unexpandCircles(),this.getCircles(t,e).classed(z.EXPANDED,!0).attr("r",i)},S.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(z.EXPANDED)}).classed(z.EXPANDED,!1).attr("r",n)},S.pointR=function(t){var e=this.config;return this.isStepType(t)?0:c(e.point_r)?e.point_r(t):e.point_r},S.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?c(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r||1.75*this.pointR(t):this.pointR(t)},S.pointSelectR=function(t){var e=this.config;return c(e.point_select_r)?e.point_select_r(t):e.point_select_r||4*this.pointR(t)},S.isWithinCircle=function(t,e){var n=this.d3,i=n.mouse(t),n=n.select(t),t=+n.attr("cx"),n=+n.attr("cy");return Math.sqrt(Math.pow(t-i[0],2)+Math.pow(n-i[1],2))<e},S.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},S.getCurrentWidth=function(){var t=this.config;return t.size_width||this.getParentWidth()},S.getCurrentHeight=function(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},S.getCurrentPaddingTop=function(){var t=this.config,t=_(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(t+=this.getTitlePadding()),t},S.getCurrentPaddingBottom=function(){var t=this.config;return _(t.padding_bottom)?t.padding_bottom:0},S.getCurrentPaddingLeft=function(t){var e=this.config;return _(e.padding_left)?e.padding_left:e.axis_rotated?e.axis_x_show?Math.max(r(this.getAxisWidthByAxisId("x",t)),40):1:!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:r(this.getAxisWidthByAxisId("y",t))},S.getCurrentPaddingRight=function(){var t=this,e=t.config,n=t.isLegendRight?t.getLegendWidth()+20:0;return _(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):r(t.getAxisWidthByAxisId("y2"))+n},S.getParentRectValue=function(e){for(var n,i=this.selectChart.node();i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[e]}catch(t){"width"===e&&(n=i.offsetWidth)}if(n)break;i=i.parentNode}return n},S.getParentWidth=function(){return this.getParentRectValue("width")},S.getParentHeight=function(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},S.getSvgLeft=function(t){var e=this,n=e.config,i=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,n=e.main.select("."+(n.axis_rotated?z.axisX:z.axisY)).node(),i=n&&i?n.getBoundingClientRect():{right:0},n=e.selectChart.node().getBoundingClientRect(),r=e.hasArcType(),i=i.right-n.left-(r?0:e.getCurrentPaddingLeft(t));return 0<i?i:0},S.getAxisWidthByAxisId=function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},S.getHorizontalAxisHeight=function(t){var e=this,n=e.config,i=30;return"x"!==t||n.axis_x_show?"x"===t&&n.axis_x_height?n.axis_x_height:"y"!==t||n.axis_y_show?"y2"!==t||n.axis_y2_show?("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate&&(i=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),(i="y"===t&&n.axis_rotated&&n.axis_y_tick_rotate?30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_y_tick_rotate)/180):i)+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!n.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},S.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},S.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+z.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},S.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),i=e.subchart_show?"visible":"hidden";n.style("visibility",i),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",z.chart),n.select("."+z.chart).append("g").attr("class",z.chartBars),n.select("."+z.chart).append("g").attr("class",z.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",z.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",z.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?i:"hidden")},S.updateTargetsForSubchart=function(t){var e=this,n=e.context,i=e.config,r=e.classChartBar.bind(e),a=e.classBars.bind(e),o=e.classChartLine.bind(e),s=e.classLines.bind(e),u=e.classAreas.bind(e);i.subchart_show&&(n.select("."+z.chartBars).selectAll("."+z.chartBar).data(t).attr("class",r).enter().append("g").style("opacity",0).attr("class",r).append("g").attr("class",a),(r=n.select("."+z.chartLines).selectAll("."+z.chartLine).data(t).attr("class",o).enter().append("g").style("opacity",0).attr("class",o)).append("g").attr("class",s),r.append("g").attr("class",u),n.selectAll("."+z.brush+" rect").attr(i.axis_rotated?"width":"height",i.axis_rotated?e.width2:e.height2))},S.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+z.bars).selectAll("."+z.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},S.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},S.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+z.lines).selectAll("."+z.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity",0).remove()},S.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},S.updateAreaForSubchart=function(t){var e=this,n=e.d3;e.contextArea=e.context.selectAll("."+z.areas).selectAll("."+z.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},S.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},S.redrawSubchart=function(t,e,n,i,r,a,o){var s=this,u=s.d3,c=s.config;s.context.style("visibility",c.subchart_show?"visible":"hidden"),c.subchart_show&&(u.event&&"zoom"===u.event.type&&s.brush.extent(s.x.orgDomain()).update(),t)&&(s.brush.empty()||s.brush.extent(s.x.orgDomain()).update(),c=s.generateDrawArea(r,!0),u=s.generateDrawBar(a,!0),t=s.generateDrawLine(o,!0),s.updateBarForSubchart(n),s.updateLineForSubchart(n),s.updateAreaForSubchart(n),s.redrawBarForSubchart(u,n,n),s.redrawLineForSubchart(t,n,n),s.redrawAreaForSubchart(c,n,n))},S.redrawForBrush=function(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.orgDomain())},S.transformContext=function(t,e){var n;e&&e.axisSubX?n=e.axisSubX:(n=this.context.select("."+z.axisX),t&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},S.getDefaultExtent=function(){var t=this,e=t.config,e=c(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return e=t.isTimeSeries()?[t.parseDate(e[0]),t.parseDate(e[1])]:e},S.initText=function(){this.main.select("."+z.chart).append("g").attr("class",z.chartTexts),this.mainText=this.d3.selectAll([])},S.updateTargetsForText=function(t){var e=this,n=e.classChartText.bind(e),i=e.classTexts.bind(e),r=e.classFocus.bind(e);e.main.select("."+z.chartTexts).selectAll("."+z.chartText).data(t).attr("class",function(t){return n(t)+r(t)}).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none").append("g").attr("class",i)},S.updateText=function(t){var i=this,e=i.config,n=i.barOrLineData.bind(i),r=i.classText.bind(i);i.mainText=i.main.selectAll("."+z.texts).selectAll("."+z.text).data(n),i.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(t){return e.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return i.color(t)}).style("fill-opacity",0),i.mainText.text(function(t,e,n){return i.dataLabelFormat(t.id)(t.value,t.id,e,n)}),i.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},S.redrawText=function(t,e,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},S.getTextRect=function(t,e,n){var i,r=this.d3.select("body").append("div").classed("c3",!0),a=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),n=this.d3.select(n).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",n).text(t).each(function(){i=this.getBoundingClientRect()}),r.remove(),i},S.generateXYForText=function(t,e,n,i){var r=this,a=r.generateGetAreaPoints(t,!1),o=r.generateGetBarPoints(e,!1),s=r.generateGetLinePoints(n,!1),u=i?r.getXForText:r.getYForText;return function(t,e){var n=r.isAreaType(t)?a:r.isBarType(t)?o:s;return u.call(r,n(t,e),t,this)}},S.getXForText=function(t,e,n){var i=this,n=n.getBoundingClientRect(),r=i.config.axis_rotated?(r=i.isBarType(e)?4:6,t[2][1]+r*(e.value<0?-1:1)):i.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0];return null===e.value&&(r>i.width?r=i.width-n.width:r<0&&(r=4)),r},S.getYForText=function(t,e,n){var i,r=this,n=n.getBoundingClientRect();return r.config.axis_rotated?i=(t[0][0]+t[2][0]+.6*n.height)/2:(i=t[2][1],e.value<0||0===e.value&&!r.hasPositiveValue?(i+=n.height,r.isBarType(e)&&r.isSafari()?i-=3:!r.isBarType(e)&&r.isChrome()&&(i+=3)):i+=r.isBarType(e)?-3:-6),null!==e.value||r.config.axis_rotated||(i<n.height?i=n.height:i>this.height&&(i=this.height-4)),i},S.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},S.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},S.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left";return 0<=n.indexOf("right")?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:0<=n.indexOf("center")?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},S.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},S.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},S.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",z.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&o(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},S.getTooltipSortFunction=function(){var n,i,r,t=this,e=t.config;return 0!==e.data_groups.length&&void 0===e.tooltip_order?(n=t.orderTargets(t.data.targets).map(function(t){return t.id}),(t.isOrderAsc()||t.isOrderDesc())&&(n=n.reverse()),function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}):(void 0===(i=e.tooltip_order)&&(i=e.data_order),r=function(t){return t?t.value:null},o(i)&&"asc"===i.toLowerCase()?function(t,e){return r(t)-r(e)}:o(i)&&"desc"===i.toLowerCase()?function(t,e){return r(e)-r(t)}:c(i)?(t=i,void 0===e.tooltip_order?function(t,e){return i(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}:t):a(i)?function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}:void 0)},S.getTooltipContent=function(t,e,n,i){var r,a,o,s,u,c=this,l=c.config,h=l.tooltip_format_title||e,d=l.tooltip_format_name||function(t){return t},f=l.tooltip_format_value||n,e=this.getTooltipSortFunction();for(e&&t.sort(e),a=0;a<t.length;a++)if(t[a]&&(t[a].value||0===t[a].value)&&(r||(o=g(h?h(t[a].x):t[a].x),r="<table class='"+c.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),void 0!==(o=g(f(t[a].value,t[a].ratio,t[a].id,t[a].index,t))))){if(null===t[a].name)continue;s=g(d(t[a].name,t[a].ratio,t[a].id,t[a].index)),u=c.levelColor?c.levelColor(t[a].value):i(t[a].id),r=(r=r+("<tr class='"+c.CLASS.tooltipName+"-"+c.getTargetSelectorSuffix(t[a].id)+"'>")+("<td class='name'><span style='background-color:"+u+"'></span>"+s+"</td>"))+("<td class='value'>"+o+"</td>")+"</tr>"}return r+"</table>"},S.tooltipPosition=function(t,e,n,i){var r,a,o,s,u=this,c=u.config,l=u.d3,h=u.hasArcType(),l=l.mouse(i);return h?(r=(u.width-(u.isLegendRight?u.getLegendWidth():0))/2+l[0],o=u.height/2+l[1]+20):(i=u.getSvgLeft(!0),o=c.axis_rotated?(a=(r=i+l[0]+100)+e,s=u.currentWidth-u.getCurrentPaddingRight(),u.x(t[0].x)+20):(a=(r=i+u.getCurrentPaddingLeft(!0)+u.x(t[0].x)+20)+e,s=i+u.currentWidth-u.getCurrentPaddingRight(),l[1]+15),s<a&&(r-=a-s+20),o+n>u.currentHeight&&(o-=n+30)),{top:o=o<0?0:o,left:r}},S.showTooltip=function(t,e){var n=this,i=n.config,r=n.hasArcType(),a=t.filter(function(t){return t&&_(t.value)}),o=i.tooltip_position||S.tooltipPosition;0!==a.length&&i.tooltip_show&&(n.tooltip.html(i.tooltip_contents.call(n,t,n.axis.getXAxisTickFormat(),n.getYFormat(r),n.color)).style("display","block"),i=n.tooltip.property("offsetWidth"),t=n.tooltip.property("offsetHeight"),r=o.call(this,a,i,t,e),n.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},S.hideTooltip=function(){this.tooltip.style("display","none")},S.setTargetType=function(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},S.hasType=function(e,t){var n=this.config.data_types,i=!1;return(t=t||this.data.targets)&&t.length?t.forEach(function(t){t=n[t.id];(t&&0<=t.indexOf(e)||!t&&"line"===e)&&(i=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(t){n[t]===e&&(i=!0)}):i=this.config.data_type===e,i},S.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},S.isLineType=function(t){var e=this.config,t=o(t)?t:t.id;return!e.data_types[t]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[t])},S.isStepType=function(t){t=o(t)?t:t.id;return 0<=["step","area-step"].indexOf(this.config.data_types[t])},S.isSplineType=function(t){t=o(t)?t:t.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[t])},S.isAreaType=function(t){t=o(t)?t:t.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[t])},S.isBarType=function(t){t=o(t)?t:t.id;return"bar"===this.config.data_types[t]},S.isScatterType=function(t){t=o(t)?t:t.id;return"scatter"===this.config.data_types[t]},S.isPieType=function(t){t=o(t)?t:t.id;return"pie"===this.config.data_types[t]},S.isGaugeType=function(t){t=o(t)?t:t.id;return"gauge"===this.config.data_types[t]},S.isDonutType=function(t){t=o(t)?t:t.id;return"donut"===this.config.data_types[t]},S.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},S.lineData=function(t){return this.isLineType(t)?[t]:[]},S.arcData=function(t){return this.isArcType(t.data)?[t]:[]},S.barData=function(t){return this.isBarType(t)?t.values:[]},S.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},S.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},S.isInterpolationType=function(t){return 0<=["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)},S.isSafari=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("Safari")&&t.indexOf("Chrome")<0},S.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},S.initZoom=function(){var e,n=this,i=n.d3,r=n.config;n.zoom=i.behavior.zoom().on("zoomstart",function(){e=i.event.sourceEvent,n.zoom.altDomain=i.event.sourceEvent.altKey?n.x.orgDomain():null,r.zoom_onzoomstart.call(n.api,i.event.sourceEvent)}).on("zoom",function(){n.redrawForZoom.call(n)}).on("zoomend",function(){var t=i.event.sourceEvent;t&&e.clientX===t.clientX&&e.clientY===t.clientY||(n.redrawEventRect(),n.updateZoom(),r.zoom_onzoomend.call(n.api,n.x.orgDomain()))}),n.zoom.scale=function(t){return r.axis_rotated?this.y(t):this.x(t)},n.zoom.orgScaleExtent=function(){var t=r.zoom_extent||[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]},n.zoom.updateScaleExtent=function(){var t=V(n.x.orgDomain())/V(n.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this}},S.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},S.updateZoom=function(){var t=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+z.zoomRect).call(t).on("dblclick.zoom",null),this.main.selectAll("."+z.eventRect).call(t).on("dblclick.zoom",null)},S.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,i=t.zoom,r=t.x;n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length&&("mousemove"===e.event.sourceEvent.type&&i.altDomain?(r.domain(i.altDomain),i.scale(r).updateScaleExtent()):(t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),n.zoom_onzoom.call(t.api,r.orgDomain())))},b}),function(){function M(t){return t&&(t.ownerDocument||t.document||t).documentElement}function N(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function F(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function z(t){return null===t?NaN:+t}function X(t){return!isNaN(t)}function t(a){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;a(t[r],e)<0?n=1+r:i=r}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;0<a(t[r],e)?i=r:n=1+r}return n}}}function H(t){return t.length}function Y(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function B(){this._=Object.create(null)}function j(t){return(t+="")===Aa||t[0]===Ta?Ta+t:t}function U(t){return(t+="")[0]===Ta?t.slice(1):t}function q(t){return j(t)in this._}function W(t){return(t=j(t))in this._&&delete this._[t]}function Q(){var t,e=[];for(t in this._)e.push(U(t));return e}function Z(){var t,e=0;for(t in this._)++e;return e}function K(){for(var t in this._)return!1;return!0}function $(){this._=Object.create(null)}function E(t){return t}function J(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=Pa.length;n<i;++n){var r=Pa[n]+e;if(r in t)return r}}function u(){}function tt(){}function et(r){function t(){for(var t,e=a,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return r}var a=[],i=new B;return t.on=function(t,e){var n=i.get(t);return arguments.length<2?n&&n.on:(n&&(n.on=null,a=a.slice(0,n=a.indexOf(n)).concat(a.slice(n+1)),i.remove(t)),e&&a.push(i.set(t,{on:e})),r)},t}function nt(){k.event.preventDefault()}function it(){for(var t,e=k.event;t=e.sourceEvent;)e=t;return e}function rt(r){for(var a=new tt,t=0,e=arguments.length;++t<e;)a[arguments[t]]=et(a);return a.of=function(n,i){return function(t){try{var e=t.sourceEvent=k.event;t.target=r,k.event=t,a[t.type].apply(n,i)}finally{k.event=e}}},a}function at(t){return La(t,r),t}function ot(t){return"function"==typeof t?t:function(){return Ma(t,this)}}function st(t){return"function"==typeof t?t:function(){return Ea(t,this)}}function ut(e,n){return e=k.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function ct(t){return t.trim().replace(/\s+/g," ")}function lt(t){return new RegExp("(?:^|\\s+)"+k.requote(t)+"(?:\\s+|$)","g")}function ht(t){return(t+"").trim().split(/^|\s+/)}function dt(n,i){var r=(n=ht(n).map(ft)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<r;)n[t](this,e)}:function(){for(var t=-1;++t<r;)n[t](this,i)}}function ft(i){var r=lt(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(r.lastIndex=0,r.test(n)||t.setAttribute("class",ct(n+" "+i))):t.setAttribute("class",ct(n.replace(r," ")))}}function gt(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function pt(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function xt(n){return"function"==typeof n?n:(n=k.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ga&&t.documentElement.namespaceURI===Ga?t.createElement(n):t.createElementNS(e,n)}}function _t(){var t=this.parentNode;t&&t.removeChild(this)}function yt(t){return{__data__:t}}function mt(t){return function(){return Va(this,t)}}function vt(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,a=t[n],o=0,s=a.length;o<s;o++)(r=a[o])&&e(r,o,n);return t}function wt(t){return La(t,Ra),t}function St(r,e,n){function i(){var t=this[a];t&&(this.removeEventListener(r,t,t.$),delete this[a])}var a="__on"+r,t=r.indexOf("."),o=bt,s=(0<t&&(r=r.slice(0,t)),Oa.get(r));return s&&(r=s,o=At),t?e?function(){var t=o(e,d(arguments));i.call(this),this.addEventListener(r,this[a]=t,t.$=n),t._=e}:i:e?u:function(){var t,e,n,i=new RegExp("^__on([^.]+)"+k.requote(r)+"$");for(e in this)(t=e.match(i))&&(n=this[e],this.removeEventListener(t[1],n,n.$),delete this[e])}}function bt(n,i){return function(t){var e=k.event;k.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{k.event=e}}}function At(t,e){var n=bt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function Tt(t){var n,i,r=".dragsuppress-"+ ++Da,a="click"+r,o=k.select(N(t)).on("touchmove"+r,nt).on("dragstart"+r,nt).on("selectstart"+r,nt);return(Ia=null==Ia?!("onselectstart"in t)&&J(t.style,"userSelect"):Ia)&&(n=M(t).style,i=n[Ia],n[Ia]="none"),function(t){var e;o.on(r,null),Ia&&(n[Ia]=i),t&&(e=function(){o.on(a,null)},o.on(a,function(){nt(),e()},!0),setTimeout(e,0))}}function Pt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n,i,r=t.ownerSVGElement||t;return r.createSVGPoint?(n=r.createSVGPoint(),Na<0&&((i=N(t)).scrollX||i.scrollY)&&(i=(r=k.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),Na=!(i.f||i.e),r.remove()),Na?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]):(i=t.getBoundingClientRect(),[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop])}function Ct(){return k.event.changedTouches[0].identifier}function Lt(t){return 0<t?1:t<0?-1:0}function Mt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Et(t){return 1<t?0:t<-1?I:Math.acos(t)}function Vt(t){return 1<t?D:t<-1?-D:Math.asin(t)}function Gt(t){return((t=Math.exp(t))+1/t)/2}function kt(t){return(t=Math.sin(t/2))*t}function Rt(){}function Ot(t,e,n){return this instanceof Ot?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ot?new Ot(t.h,t.s,t.l):Ut(""+t,qt,Ot):new Ot(t,e,n)}function It(t,e,n){function i(t){return Math.round(255*(360<(t=t)?t-=360:t<0&&(t+=360),t<60?r+(a-r)*t/60:t<180?a:t<240?r+(a-r)*(240-t)/60:r))}var r,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)||e<0?0:1<e?1:e,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+e):n+e-n*e),new o(i(t+120),i(t),i(t-120))}function i(t,e,n){return this instanceof i?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof i?new i(t.h,t.c,t.l):Ft((t instanceof a?t:t=Wt((t=k.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new i(t,e,n)}function Dt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new a(n,Math.cos(t*=P)*e,Math.sin(t)*e)}function a(t,e,n){return this instanceof a?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof a?new a(t.l,t.a,t.b):t instanceof i?Dt(t.h,t.c,t.l):Wt((t=o(t)).r,t.g,t.b):new a(t,e,n)}function Nt(t,e,n){t=(t+16)/116,n=t-n/200;return new o(Ht(3.2404542*(e=zt(t+e/500)*Ua)-1.5371385*(t=zt(t)*qa)-.4985314*(n=zt(n)*Wa)),Ht(-.969266*e+1.8760108*t+.041556*n),Ht(.0556434*e-.2040259*t+1.0572252*n))}function Ft(t,e,n){return 0<t?new i(Math.atan2(n,e)*C,Math.sqrt(e*e+n*n),t):new i(NaN,NaN,t)}function zt(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function Xt(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function Ht(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function o(t,e,n){return this instanceof o?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof o?new o(t.r,t.g,t.b):Ut(""+t,o,It):new o(t,e,n)}function Yt(t){return new o(t>>16,t>>8&255,255&t)}function Bt(t){return Yt(t)+""}function jt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Ut(t,e,n){var i,r,a=0,o=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Zt(i[0]),Zt(i[1]),Zt(i[2]))}return(r=Qa.get(t))?e(r.r,r.g,r.b):(null==t||"#"!==t.charAt(0)||isNaN(r=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&r)>>4,a|=a>>4,o=240&r,o|=o>>4,s=15&r,s|=s<<4):7===t.length&&(a=(16711680&r)>>16,o=(65280&r)>>8,s=255&r)),e(a,o,s))}function qt(t,e,n){var i,r,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(r=u<.5?s/(o+a):s/(2-o-a),i=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=0<u&&u<1?0:i),new Ot(i,r,u)}function Wt(t,e,n){var i=Xt((.4124564*(t=Qt(t))+.3575761*(e=Qt(e))+.1804375*(n=Qt(n)))/Ua),r=Xt((.2126729*t+.7151522*e+.072175*n)/qa);return a(116*r-16,500*(i-r),200*(r-Xt((.0193339*t+.119192*e+.9503041*n)/Wa)))}function Qt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Zt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function V(t){return"function"==typeof t?t:function(){return t}}function Kt(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),$t(t,e,i,n)}}function $t(r,a,o,t){function e(){var t,e,n,i=l.status;if(!i&&((n=(e=l).responseType)&&"text"!==n?e.response:e.responseText)||200<=i&&i<300||304===i){try{t=o.call(s,l)}catch(t){return void u.error.call(s,t)}u.load.call(s,t)}else u.error.call(s,l)}var n,s={},u=k.dispatch("beforesend","progress","load","error"),c={},l=new XMLHttpRequest,h=null;return"onload"in(l=!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(r)?l:new XDomainRequest)?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()},l.onprogress=function(t){var e=k.event;k.event=t;try{u.progress.call(s,l)}finally{k.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?c[t]:(null==e?delete c[t]:c[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(a=null==t?null:t+"",s):a},s.responseType=function(t){return arguments.length?(h=t,s):h},s.response=function(t){return o=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(d(arguments)))}}),s.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),l.open(t,r,!0),null==a||"accept"in c||(c.accept=a+",*/*"),l.setRequestHeader)for(var i in c)l.setRequestHeader(i,c[i]);return null!=a&&l.overrideMimeType&&l.overrideMimeType(a),null!=h&&(l.responseType=h),null!=n&&s.on("error",n).on("load",function(t){n(null,t)}),u.beforesend.call(s,l),l.send(null==e?null:e),s},s.abort=function(){return l.abort(),s},k.rebind(s,u,"on"),null==t?s:s.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}function Jt(t,e,n){var i=arguments.length;i<2&&(e=0);t={c:t,t:(n=i<3?Date.now():n)+e,n:null};return Ka?Ka.n=t:Za=t,Ka=t,$a||(Ja=clearTimeout(Ja),$a=1,to(te)),t}function te(){var t=ee(),t=ne()-t;24<t?(isFinite(t)&&(clearTimeout(Ja),Ja=setTimeout(te,t)),$a=0):($a=1,to(te))}function ee(){for(var t=Date.now(),e=Za;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function ne(){for(var t,e=Za,n=1/0;e;)e=e.c?(e.t<n&&(n=e.t),(t=e).n):t?t.n=e.n:Za=e.n;return Ka=t,n}function ie(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function re(t){return t+""}function ae(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function oe(i,a,o){function t(t){var e=i(t),n=r(e,1);return t-e<n-t?e:n}function s(t){return a(t=i(new L(t-1)),1),t}function r(t,e){return a(t=new L(+t),e),t}function u(t,e,n){var i=s(t),r=[];if(1<n)for(;i<e;)o(i)%n||r.push(new Date(+i)),a(i,1);else for(;i<e;)r.push(new Date(+i)),a(i,1);return r}(i.floor=i).round=t,i.ceil=s,i.offset=r,i.range=u;var e=i.utc=se(i);return(e.floor=e).round=se(t),e.ceil=se(s),e.offset=se(r),e.range=function(t,e,n){try{var i=new(L=ae);return i._=t,u(i,e,n)}finally{L=Date}},i}function se(i){return function(t,e){try{var n=new(L=ae);return n._=t,i(n,e)._}finally{L=Date}}}function ue(t){function i(s){function t(t){for(var e,n,i,r=[],a=-1,o=0;++a<u;)37===s.charCodeAt(a)&&(r.push(s.slice(o,a)),null!=(n=ao[e=s.charAt(++a)])&&(e=s.charAt(++a)),(i=v[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),r.push(e),o=a+1);return r.push(s.slice(o,a)),r.join("")}var u=s.length;return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(r(e,s,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var t=null!=e.Z&&L!==ae,n=new(t?ae:L);return"j"in e?n.setFullYear(e.y,0,e.j):"W"in e||"U"in e?("w"in e||(e.w="W"in e?1:0),n.setFullYear(e.y,0,1),n.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(n.getDay()+5)%7:e.w+7*e.U-(n.getDay()+6)%7)):n.setFullYear(e.y,e.m,e.d),n.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),t?n._:n},t.toString=function(){return s},t}function r(t,e,n,i){for(var r,a,o=0,s=e.length,u=n.length;o<s;){if(u<=i)return-1;if(37===(r=e.charCodeAt(o++))){if(a=e.charAt(o++),!(a=w[a in ao?e.charAt(o++):a])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var e=t.dateTime,n=t.date,a=t.time,o=t.periods,s=t.days,u=t.shortDays,c=t.months,l=t.shortMonths,h=(i.multi=(i.utc=function(t){function e(t){try{var e=new(L=ae);return e._=t,n(e)}finally{L=Date}}var n=i(t);return e.parse=function(t){try{L=ae;var e=n.parse(t);return e&&e._}finally{L=Date}},e.toString=n.toString,e}).multi=Pe,k.map()),d=ce(s),f=le(s),g=ce(u),p=le(u),x=ce(c),_=le(c),y=ce(l),m=le(l),v=(o.forEach(function(t,e){h.set(t.toLowerCase(),e)}),{a:function(t){return u[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:i(e),d:function(t,e){return S(t.getDate(),e,2)},e:function(t,e){return S(t.getDate(),e,2)},H:function(t,e){return S(t.getHours(),e,2)},I:function(t,e){return S(t.getHours()%12||12,e,2)},j:function(t,e){return S(1+b.dayOfYear(t),e,3)},L:function(t,e){return S(t.getMilliseconds(),e,3)},m:function(t,e){return S(t.getMonth()+1,e,2)},M:function(t,e){return S(t.getMinutes(),e,2)},p:function(t){return o[+(12<=t.getHours())]},S:function(t,e){return S(t.getSeconds(),e,2)},U:function(t,e){return S(b.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return S(b.mondayOfYear(t),e,2)},x:i(n),X:i(a),y:function(t,e){return S(t.getFullYear()%100,e,2)},Y:function(t,e){return S(t.getFullYear()%1e4,e,4)},Z:Ae,"%":function(){return"%"}}),w={a:function(t,e,n){return g.lastIndex=0,(e=g.exec(e.slice(n)))?(t.w=p.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){return d.lastIndex=0,(e=d.exec(e.slice(n)))?(t.w=f.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){return y.lastIndex=0,(e=y.exec(e.slice(n)))?(t.m=m.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){return x.lastIndex=0,(e=x.exec(e.slice(n)))?(t.m=_.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return r(t,v.c.toString(),e,n)},d:ye,e:ye,H:ve,I:ve,j:me,L:be,m:_e,M:we,p:function(t,e,n){return null==(e=h.get(e.slice(n,n+=2).toLowerCase()))?-1:(t.p=e,n)},S:Se,U:de,w:he,W:fe,x:function(t,e,n){return r(t,v.x.toString(),e,n)},X:function(t,e,n){return r(t,v.X.toString(),e,n)},y:pe,Y:ge,Z:xe,"%":Te};return i}function S(t,e,n){var i=t<0?"-":"",t=(i?-t:t)+"",r=t.length;return i+(r<n?new Array(n-r+1).join(e)+t:t)}function ce(t){return new RegExp("^(?:"+t.map(k.requote).join("|")+")","i")}function le(t){for(var e=new B,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function he(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function de(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n));return e?(t.U=+e[0],n+e[0].length):-1}function fe(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n));return e?(t.W=+e[0],n+e[0].length):-1}function ge(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function pe(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+2));return e?(t.y=(t=+e[0])+(68<t?1900:2e3),n+e[0].length):-1}function xe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function _e(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function ye(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function me(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+3));return e?(t.j=+e[0],n+e[0].length):-1}function ve(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function we(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Se(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function be(t,e,n){s.lastIndex=0;e=s.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function Ae(t){var t=t.getTimezoneOffset(),e=0<t?"-":"+",n=G(t)/60|0,t=G(t)%60;return e+S(n,"0",2)+S(t,"0",2)}function Te(t,e,n){oo.lastIndex=0;e=oo.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function Pe(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}function Ce(){}function Le(t,e,n){var i=n.s=t+e,r=i-t;n.t=t-(i-r)+(e-r)}function Me(t,e){t&&co.hasOwnProperty(t.type)&&co[t.type](t,e)}function Ee(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Ve(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ee(t[n],e,1);e.polygonEnd()}function Ge(){function n(t,e){e=e*P/2+I/4;var n=(t*=P)-s,i=0<=n?1:-1,n=i*n,r=Math.cos(e),e=Math.sin(e),a=c*e,o=u*r+a*Math.cos(n),a=a*i*Math.sin(n);mo.add(Math.atan2(a,o)),s=t,u=r,c=e}var i,r,s,u,c;_.point=function(t,e){_.point=n,s=(i=t)*P,u=Math.cos(e=(r=e)*P/2+I/4),c=Math.sin(e)},_.lineEnd=function(){n(i,r)}}function ke(t){var e=t[0],t=t[1],n=Math.cos(t);return[n*Math.cos(e),n*Math.sin(e),Math.sin(t)]}function Re(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Oe(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ie(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function De(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ne(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Fe(t){return[Math.atan2(t[1],t[0]),Vt(t[2])]}function ze(t,e){return G(t[0]-e[0])<O&&G(t[1]-e[1])<O}function Xe(t,e){t*=P;var n=Math.cos(e*=P);He(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function He(t,e,n){Vo+=(t-Vo)/++Mo,Go+=(e-Go)/Mo,ko+=(n-ko)/Mo}function Ye(){function i(t,e){t*=P;var n=Math.cos(e*=P),i=n*Math.cos(t),n=n*Math.sin(t),t=Math.sin(e),e=Math.atan2(Math.sqrt((e=a*t-o*n)*e+(e=o*i-r*t)*e+(e=r*n-a*i)*e),r*i+a*n+o*t);Eo+=e,Ro+=e*(r+(r=i)),Oo+=e*(a+(a=n)),Io+=e*(o+(o=t)),He(r,a,o)}var r,a,o;m.point=function(t,e){t*=P;var n=Math.cos(e*=P);r=n*Math.cos(t),a=n*Math.sin(t),o=Math.sin(e),m.point=i,He(r,a,o)}}function Be(){m.point=Xe}function je(){function i(t,e){t*=P;var n=Math.cos(e*=P),i=n*Math.cos(t),n=n*Math.sin(t),t=Math.sin(e),e=l*t-h*n,r=h*i-c*t,a=c*n-l*i,o=Math.sqrt(e*e+r*r+a*a),s=c*i+l*n+h*t,u=o&&-Et(s)/o,o=Math.atan2(o,s);Do+=u*e,No+=u*r,Fo+=u*a,Eo+=o,Ro+=o*(c+(c=i)),Oo+=o*(l+(l=n)),Io+=o*(h+(h=t)),He(c,l,h)}var r,a,c,l,h;m.point=function(t,e){r=t,a=e,m.point=i,t*=P;var n=Math.cos(e*=P);c=n*Math.cos(t),l=n*Math.sin(t),h=Math.sin(e),He(c,l,h)},m.lineEnd=function(){i(r,a),m.lineEnd=Be,m.point=Xe}}function Ue(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function qe(){return!0}function We(t,e,n,i,s){var u=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(ze(n,i)){s.lineStart();for(var r=0;r<e;++r)s.point((n=t[r])[0],n[1]);s.lineEnd()}else{var a=new Ze(n,t,null,!0),o=new Ze(n,null,a,!1);a.o=o,u.push(a),c.push(o),a=new Ze(i,t,null,!1),o=new Ze(i,null,a,!0),a.o=o,u.push(a),c.push(o)}}}),c.sort(e),Qe(u),Qe(c),u.length){for(var r=0,a=n,o=c.length;r<o;++r)c[r].e=a=!a;for(var l,h=u[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;g=d.z,s.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(r=0,o=g.length;r<o;++r)s.point((l=g[r])[0],l[1]);else i(d.x,d.n.x,1,s);d=d.n}else{if(f)for(var g,r=(g=d.p.z).length-1;0<=r;--r)s.point((l=g[r])[0],l[1]);else i(d.x,d.p.x,-1,s);d=d.p}}while(g=(d=d.o).z,f=!f,!d.v);s.lineEnd()}}}function Qe(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Ze(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Ke(y,m,v,w){return function(i,o){function e(t,e){var n=i(t,e);y(t=n[0],e=n[1])&&o.point(t,e)}function t(t,e){t=i(t,e);d.point(t[0],t[1])}function n(){g.point=t,d.lineStart()}function r(){g.point=e,d.lineEnd()}function s(t,e){h.push([t,e]);t=i(t,e);x.point(t[0],t[1])}function a(){x.lineStart(),h=[]}function u(){s(h[0][0],h[0][1]),x.lineEnd();var t=x.clean(),e=p.buffer(),n=e.length;if(h.pop(),l.push(h),h=null,n)if(1&t){var i,r,a=-1;if(0<(n=(i=e[0]).length-1)){for(_||(o.polygonStart(),_=!0),o.lineStart();++a<n;)o.point((r=i[a])[0],r[1]);o.lineEnd()}}else 1<n&&2&t&&e.push(e.pop().concat(e.shift())),c.push(e.filter($e))}var c,l,h,d=m(o),f=i.invert(w[0],w[1]),g={point:e,lineStart:n,lineEnd:r,polygonStart:function(){g.point=s,g.lineStart=a,g.lineEnd=u,c=[],l=[]},polygonEnd:function(){g.point=e,g.lineStart=n,g.lineEnd=r,c=k.merge(c);var t=((t,e)=>{var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],a=0,o=0;mo.reset();for(var s=0,u=e.length;s<u;++s){var c=e[s],l=c.length;if(l)for(var h=c[0],d=h[0],f=h[1]/2+I/4,g=Math.sin(f),p=Math.cos(f),x=1;;){var _=(t=c[x=x===l?0:x])[0],y=t[1]/2+I/4,m=Math.sin(y),y=Math.cos(y),v=_-d,w=0<=v?1:-1,S=w*v,b=I<S,A=g*m;if(mo.add(Math.atan2(A*w*Math.sin(S),p*y+A*Math.cos(S))),a+=b?v+w*T:v,b^n<=d^n<=_&&(Ne(A=Oe(ke(h),ke(t))),Ne(S=Oe(r,A)),(w=(b^0<=v?-1:1)*Vt(S[2]))<i||i===w&&(A[0]||A[1]))&&(o+=b^0<=v?1:-1),!x++)break;d=_,g=m,p=y,h=t}}return(a<-O||a<O&&mo<-O)^1&o})(f,l);c.length?(_||(o.polygonStart(),_=!0),We(c,tn,t,v,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),v(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),c=l=null},sphere:function(){o.polygonStart(),o.lineStart(),v(null,null,1,o),o.lineEnd(),o.polygonEnd()}},p=Je(),x=m(p),_=!1;return g}}function $e(t){return 1<t.length}function Je(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:u,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function tn(t,e){return((t=t.x)[0]<0?t[1]-D-O:D-t[1])-((e=e.x)[0]<0?e[1]-D-O:D-e[1])}function en(r){function h(t,e){return Math.cos(t)*Math.cos(e)>p}function d(t,e,n){var i,r,a,o,s,u,c,l=[1,0,0],h=Oe(ke(t),ke(e)),d=Re(h,h),f=h[0],g=d-f*f;return g?(i=Oe(l,h),Ie(l=De(l,p*d/g),De(h,-p*f/g)),(g=(h=Re(l,d=i))*h-(f=Re(d,d))*(Re(l,l)-1))<0?void 0:(Ie(g=De(d,(-h-(i=Math.sqrt(g)))/f),l),g=Fe(g),n?(r=t[0],a=e[0],o=t[1],e=e[1],a<r&&(c=r,r=a,a=c),!(u=G((s=a-r)-I)<O)&&e<o&&(c=o,o=e,e=c),(u||s<O?u?0<o+e^g[1]<(G(g[0]-r)<O?o:e):o<=g[1]&&g[1]<=e:I<s^(r<=g[0]&&g[0]<=a))?(Ie(c=De(d,(-h+i)/f),l),[g,Fe(c)]):void 0):g)):!n&&t}function f(t,e){var n=g?r:I-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}var p=Math.cos(r),g=0<p,x=G(p)>O;return Ke(h,function(a){var o,s,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(t,e){var n,i=[t,e],r=h(t,e),t=g?r?0:f(t,e):r?f(t+(t<0?I:-I),e):0;!o&&(c=u=r)&&a.lineStart(),r!==u&&(n=d(o,i),ze(o,n)||ze(i,n))&&(i[0]+=O,i[1]+=O,r=h(i[0],i[1])),r!==u?(l=0,r?(a.lineStart(),n=d(i,o),a.point(n[0],n[1])):(n=d(o,i),a.point(n[0],n[1]),a.lineEnd()),o=n):x&&o&&g^r&&(t&s||!(e=d(i,o,!0))||(l=0,g?(a.lineStart(),a.point(e[0][0],e[0][1]),a.point(e[1][0],e[1][1]),a.lineEnd()):(a.point(e[1][0],e[1][1]),a.lineEnd(),a.lineStart(),a.point(e[0][0],e[0][1])))),!r||o&&ze(o,i)||a.point(i[0],i[1]),o=i,u=r,s=t},lineEnd:function(){u&&a.lineEnd(),o=null},clean:function(){return l|(c&&u)<<1}}},Cn(r,6*P),g?[0,-r]:[-I,r-I])}function nn(u,c,l,h){return function(t){var e=t.a,n=t.b,i=e.x,e=e.y,r=0,a=1,o=n.x-i,n=n.y-e,s=u-i;if(o||!(0<s)){if(s/=o,o<0){if(s<r)return;s<a&&(a=s)}else if(0<o){if(a<s)return;r<s&&(r=s)}if(s=l-i,o||!(s<0)){if(s/=o,o<0){if(a<s)return;r<s&&(r=s)}else if(0<o){if(s<r)return;s<a&&(a=s)}if(s=c-e,n||!(0<s)){if(s/=n,n<0){if(s<r)return;s<a&&(a=s)}else if(0<n){if(a<s)return;r<s&&(r=s)}if(s=h-e,n||!(s<0)){if(s/=n,n<0){if(a<s)return;r<s&&(r=s)}else if(0<n){if(s<r)return;s<a&&(a=s)}return 0<r&&(t.a={x:i+r*o,y:e+r*n}),a<1&&(t.b={x:i+a*o,y:e+a*n}),t}}}}}}function rn(v,w,S,b){function A(t,e){return G(t[0]-v)<O?0<e?0:3:G(t[0]-S)<O?0<e?2:1:G(t[1]-w)<O?0<e?1:0:0<e?3:2}function T(t,e){return P(t.x,e.x)}function P(t,e){var n=A(t,1),i=A(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){function i(t,e,n,i){var r=0,a=0;if(null==t||(r=A(t,n))!==(a=A(e,n))||P(t,e)<0^0<n)for(;i.point(0===r||3===r?v:S,1<r?b:w),(r=(r+n+4)%4)!==a;);else i.point(e[0],e[1])}function a(t,e){return v<=t&&t<=S&&w<=e&&e<=b}function t(t,e){a(t,e)&&r.point(t,e)}function e(t,e){var n,i=a(t=Math.max(-Xo,Math.min(Xo,t)),e=Math.max(-Xo,Math.min(Xo,e)));l&&s.push([t,e]),p?(u=t,c=e,p=!1,(h=i)&&(r.lineStart(),r.point(t,e))):i&&g?r.point(t,e):y(n={a:{x:d,y:f},b:{x:t,y:e}})?(g||(r.lineStart(),r.point(n.a.x,n.a.y)),r.point(n.b.x,n.b.y),i||r.lineEnd(),x=!1):i&&(r.lineStart(),r.point(t,e),x=!1),d=t,f=e,g=i}var o,l,s,u,c,h,d,f,g,p,x,_=r,n=Je(),y=nn(v,w,S,b),m={point:t,lineStart:function(){m.point=e,l&&l.push(s=[]),g=!(p=!0),d=f=NaN},lineEnd:function(){o&&(e(u,c),h&&g&&n.rejoin(),o.push(n.buffer())),m.point=t,g&&r.lineEnd()},polygonStart:function(){r=n,o=[],l=[],x=!0},polygonEnd:function(){r=_,o=k.merge(o);var t=(t=>{for(var e=0,n=l.length,i=t[1],r=0;r<n;++r)for(var a,o=1,s=l[r],u=s.length,c=s[0];o<u;++o)a=s[o],c[1]<=i?a[1]>i&&0<Mt(c,a,t)&&++e:a[1]<=i&&Mt(c,a,t)<0&&--e,c=a;return 0!==e})([v,b]),e=x&&t,n=o.length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),i(null,null,1,r),r.lineEnd()),n&&We(o,T,t,i,r),r.polygonEnd()),o=l=s=null}};return m}}function an(t){var e=0,n=I/3,i=mn(t),t=i(e,n);return t.parallels=function(t){return arguments.length?i(e=t[0]*I/180,n=t[1]*I/180):[e/I*180,n/I*180]},t}function on(t,e){function n(t,e){e=Math.sqrt(r-2*i*Math.sin(e))/i;return[e*Math.sin(t*=i),a-e*Math.cos(t)]}var t=Math.sin(t),i=(t+Math.sin(e))/2,r=1+t*(2*i-t),a=Math.sqrt(r)/i;return n.invert=function(t,e){e=a-e;return[Math.atan2(t,e)/i,Vt((r-(t*t+e*e)*i*i)/(2*i))]},n}function sn(){function n(t,e){Yo+=o*t-a*e,a=t,o=e}var i,r,a,o;Wo.point=function(t,e){Wo.point=n,i=a=t,r=o=e},Wo.lineEnd=function(){n(i,r)}}function un(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function i(){s.point=t}function r(){o.push("Z")}var a=cn(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(t){return a=cn(t),s},result:function(){var t;if(o.length)return t=o.join(""),o=[],t}};return s}function cn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ln(t,e){Vo+=t,Go+=e,++ko}function hn(){function n(t,e){var n=t-r,i=e-a,n=Math.sqrt(n*n+i*i);Ro+=n*(r+t)/2,Oo+=n*(a+e)/2,Io+=n,ln(r=t,a=e)}var r,a;v.point=function(t,e){v.point=n,ln(r=t,a=e)}}function dn(){v.point=ln}function fn(){function n(t,e){var n=t-a,i=e-o,n=Math.sqrt(n*n+i*i);Ro+=n*(a+t)/2,Oo+=n*(o+e)/2,Io+=n,Do+=(n=o*t-a*e)*(a+t),No+=n*(o+e),Fo+=3*n,ln(a=t,o=e)}var i,r,a,o;v.point=function(t,e){v.point=n,ln(i=a=t,r=o=e)},v.lineEnd=function(){n(i,r)}}function gn(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,T)}function e(t,e){n.moveTo(t,e),s.point=i}function i(t,e){n.lineTo(t,e)}function r(){s.point=t}function a(){n.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=t,s},result:u};return s}function pn(C){function e(t){return(w?i:n)(t)}function n(n){return _n(n,function(t,e){t=C(t,e),n.point(t[0],t[1])})}function i(i){function t(t,e){t=C(t,e),i.point(t[0],t[1])}function e(){p=NaN,v.point=n,i.lineStart()}function n(t,e){var n=ke([t,e]),e=C(t,e);L(p,x,g,_,y,m,p=e[0],x=e[1],g=t,_=n[0],y=n[1],m=n[2],w,i),i.point(p,x)}function r(){v.point=t,i.lineEnd()}function a(){e(),v.point=o,v.lineEnd=s}function o(t,e){n(u=t,e),c=p,l=x,h=_,d=y,f=m,v.point=n}function s(){L(p,x,g,_,y,m,c,l,u,h,d,f,w,i),v.lineEnd=r,r()}var u,c,l,h,d,f,g,p,x,_,y,m,v={point:t,lineStart:e,lineEnd:r,polygonStart:function(){i.polygonStart(),v.lineStart=a},polygonEnd:function(){i.polygonEnd(),v.lineStart=e}};return v}function L(t,e,n,i,r,a,o,s,u,c,l,h,d,f){var g,p,x,_,y,m,v,w,S,b,A=o-t,T=s-e,P=A*A+T*T;4*M<P&&d--&&(g=i+c,p=r+l,x=a+h,_=Math.sqrt(g*g+p*p+x*x),v=Math.asin(x/=_),y=G(G(x)-1)<O||G(n-u)<O?(n+u)/2:Math.atan2(p,g),m=(v=C(y,v))[0],M<(b=T*(w=m-t)-A*(S=(v=v[1])-e))*b/P||.3<G((A*w+T*S)/P-.5)||i*c+r*l+a*h<E)&&(L(t,e,n,i,r,a,m,v,y,g/=_,p/=_,x,d,f),f.point(m,v),L(m,v,y,g,p,x,o,s,u,c,l,h,d,f))}var M=.5,E=Math.cos(30*P),w=16;return e.precision=function(t){return arguments.length?(w=0<(M=t*t)&&16,e):Math.sqrt(M)},e}function xn(t){this.stream=t}function _n(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function yn(t){return mn(function(){return t})()}function mn(t){function e(t){return[(t=s(t[0]*P,t[1]*P))[0]*d+u,c-t[1]*d]}function n(t){return(t=s.invert((t[0]-u)/d,(c-t[1])/d))&&[t[0]*C,t[1]*C]}function i(){s=Ue(o=bn(_,y,m),a);var t=a(p,x);return u=f-t[0]*d,c=g+t[1]*d,r()}function r(){return l&&(l.valid=!1,l=null),e}var a,o,s,u,c,l,h=pn(function(t,e){return[(t=a(t,e))[0]*d+u,c-t[1]*d]}),d=150,f=480,g=250,p=0,x=0,_=0,y=0,m=0,v=zo,w=E,S=null,b=null;return e.stream=function(t){return l&&(l.valid=!1),(l=vn(v(o,h(w(t))))).valid=!0,l},e.clipAngle=function(t){return arguments.length?(v=null==t?(S=t,zo):en((S=+t)*P),r()):S},e.clipExtent=function(t){return arguments.length?(w=(b=t)?rn(t[0][0],t[0][1],t[1][0],t[1][1]):E,r()):b},e.scale=function(t){return arguments.length?(d=+t,i()):d},e.translate=function(t){return arguments.length?(f=+t[0],g=+t[1],i()):[f,g]},e.center=function(t){return arguments.length?(p=t[0]%360*P,x=t[1]%360*P,i()):[p*C,x*C]},e.rotate=function(t){return arguments.length?(_=t[0]%360*P,y=t[1]%360*P,m=2<t.length?t[2]%360*P:0,i()):[_*C,y*C,m*C]},k.rebind(e,h,"precision"),function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function vn(n){return _n(n,function(t,e){n.point(t*P,e*P)})}function wn(t,e){return[t,e]}function Sn(t,e){return[I<t?t-T:t<-I?t+T:t,e]}function bn(t,e,n){return t?e||n?Ue(Tn(t),Pn(e,n)):Tn(t):e||n?Pn(e,n):Sn}function An(n){return function(t,e){return[I<(t+=n)?t-T:t<-I?t+T:t,e]}}function Tn(t){var e=An(t);return e.invert=An(-t),e}function Pn(t,e){function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,t=Math.sin(t)*n,n=Math.sin(e),e=n*r+i*a;return[Math.atan2(t*o-e*s,i*r-n*a),Vt(e*o+t*s)]}var r=Math.cos(t),a=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,t=Math.sin(t)*n,n=Math.sin(e),e=n*o-t*s;return[Math.atan2(t*o+n*s,i*r+e*a),Vt(e*r-i*a)]},n}function Cn(s,u){var c=Math.cos(s),l=Math.sin(s);return function(t,e,n,i){var r=n*u;null!=t?(t=Ln(c,t),e=Ln(c,e),(0<n?t<e:e<t)&&(t+=n*T)):(t=s+n*T,e=s-.5*r);for(var a,o=t;0<n?e<o:o<e;o-=r)i.point((a=Fe([c,-l*Math.cos(o),-l*Math.sin(o)]))[0],a[1])}}function Ln(t,e){e=ke(e),e[0]-=t,Ne(e),t=Et(-e[1]);return((-e[2]<0?-t:t)+2*Math.PI-O)%(2*Math.PI)}function Mn(t,e,n){var i=k.range(t,e-O,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function En(t,e,n){var i=k.range(t,e-O,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Vn(t){return t.source}function Gn(t){return t.target}function kn(r,a){function t(t,e){var n=Math.cos(t),i=Math.cos(e),n=r(n*i);return[n*i*Math.sin(t),n*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=a(n),r=Math.sin(i),i=Math.cos(i);return[Math.atan2(t*r,n*i),Math.asin(n&&e*r/n)]},t}function Rn(t,e){function n(t,e){0<o?e<-D+O&&(e=-D+O):D-O<e&&(e=D-O);e=o/Math.pow(i(e),a);return[e*Math.sin(a*t),o-e*Math.cos(a*t)]}function i(t){return Math.tan(I/4+t/2)}var r=Math.cos(t),a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var e=o-e,n=Lt(a)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/a,2*Math.atan(Math.pow(o/n,1/a))-D]},n):In}function On(t,e){function n(t,e){e=a-e;return[e*Math.sin(r*t),a-e*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),a=i/r+t;return G(r)<O?wn:(n.invert=function(t,e){e=a-e;return[Math.atan2(t,e)/r,a-Lt(r)*Math.sqrt(t*t+e*e)]},n)}function In(t,e){return[t,Math.log(Math.tan(I/4+e/2))]}function Dn(t){var i,r=yn(t),a=r.scale,o=r.translate,s=r.clipExtent;return r.scale=function(){var t=a.apply(r,arguments);return t===r?i?r.clipExtent(null):r:t},r.translate=function(){var t=o.apply(r,arguments);return t===r?i?r.clipExtent(null):r:t},r.clipExtent=function(t){var e,n=s.apply(r,arguments);return n===r?(i=null==t)&&(t=I*a(),e=o(),s([[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]])):i&&(n=null),n},r.clipExtent(null)}function Nn(t,e){return[Math.log(Math.tan(I/4+e/2)),-t]}function Fn(t){return t[0]}function zn(t){return t[1]}function Xn(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;1<i&&Mt(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Hn(t,e){return t[0]-e[0]||t[1]-e[1]}function Yn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Bn(t,e,n,i){var r=t[0],a=n[0],o=e[0]-r,s=i[0]-a,t=t[1],n=n[1],e=e[1]-t,i=i[1]-n,n=(s*(t-n)-i*(r-a))/(i*o-s*e);return[r+n*o,t+n*e]}function jn(t){var e=t[0],t=t[t.length-1];return!(e[0]-t[0]||e[1]-t[1])}function Un(){ci(this),this.edge=this.site=this.circle=null}function qn(t){var e=ls.pop()||new Un;return e.site=t,e}function Wn(t){ni(t),ss.remove(t),ls.push(t),ci(t)}function Qn(t){for(var e,n,i,r,a,o,s=t.x,u=t.y,c=ss._;c;)if(i=Zn(c,u)-s,O<i)c=c.L;else{if(r=s-(a=u,o=void 0,(o=(r=c).N)?Zn(o,a):(o=r.site).y===a?o.x:1/0),!(O<r)){-O<i?(e=c.P,n=c):-O<r?n=(e=c).N:e=n=c;break}if(!c.R){e=c;break}c=c.R}var l=qn(t);if(ss.insert(e,l),e||n){if(e===n)return ni(e),n=qn(e.site),ss.insert(l,n),l.edge=n.edge=ai(e.site,l.site),ei(e),ei(n);if(!n)return l.edge=ai(e.site,l.site);ni(e),ni(n);var h=e.site,d=h.x,f=h.y,g=t.x-d,p=t.y-f,x=n.site,_=x.x-d,y=x.y-f,m=2*(g*y-p*_),v=g*g+p*p,w=_*_+y*y,y={x:(y*v-p*w)/m+d,y:(g*w-_*v)/m+f};oi(n.edge,h,x,y),l.edge=ai(h,t,null,y),n.edge=ai(t,x,null,y),ei(e),ei(n)}}function Zn(t,e){var n,i,r,a=t.site,o=a.x,s=a.y,u=s-e;return u?(t=t.P)?(t=(a=t.site).x,(e=(a=a.y)-e)?(r=(n=t-o)/e,(i=1/u-1/e)?(-r+Math.sqrt(r*r-2*i*(n*n/(-2*e)-a+e/2+s-u/2)))/i+o:(o+t)/2):t):-1/0:o}function Kn(t){this.site=t,this.edges=[]}function $n(t){for(var e,n,i,r,a,o,s,u,c,l=t[0][0],h=t[1][0],d=t[0][1],f=t[1][1],g=os,p=g.length;p--;)if((r=g[p])&&r.prepare())for(s=(o=r.edges).length,a=0;a<s;)n=(c=o[a].end()).x,i=c.y,e=(u=o[++a%s].start()).x,u=u.y,(G(n-e)>O||G(i-u)>O)&&(o.splice(a,0,new si(((t,e,n)=>((t=new ri(t,null)).a=e,t.b=n,as.push(t),t))(r.site,c,G(n-l)<O&&O<f-i?{x:l,y:G(e-l)<O?u:f}:G(i-f)<O&&O<h-n?{x:G(u-f)<O?e:h,y:f}:G(n-h)<O&&O<i-d?{x:h,y:G(e-h)<O?u:d}:G(i-d)<O&&O<n-l?{x:G(u-d)<O?e:l,y:d}:null),r.site,null)),++s)}function Jn(t,e){return e.angle-t.angle}function ti(){ci(this),this.x=this.y=this.arc=this.site=this.cy=null}function ei(t){var e=t.P,n=t.N;if(e&&n){var e=e.site,i=t.site,n=n.site;if(e!==n){var r=i.x,a=i.y,o=e.x-r,e=e.y-a,s=n.x-r,u=2*(o*(n=n.y-a)-e*s);if(!(-Fa<=u)){var c=o*o+e*e,l=s*s+n*n,e=(n*c-e*l)/u,o=(o*l-s*c)/u,n=o+a,h=hs.pop()||new ti;h.arc=t,h.site=i,h.x=e+r,h.y=n+Math.sqrt(e*e+o*o),h.cy=n,t.circle=h;for(var d=null,f=cs._;f;)if(h.y<f.y||h.y===f.y&&h.x<=f.x){if(!f.L){d=f.P;break}f=f.L}else{if(!f.R){d=f;break}f=f.R}cs.insert(d,h),d||(us=h)}}}}function ni(t){var e=t.circle;e&&(e.P||(us=e.N),cs.remove(e),hs.push(e),ci(e),t.circle=null)}function ii(t){for(var e,n=as,i=nn(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)((t,e)=>{var n=t.b;if(!n){var i=t.a,r=e[0][0],a=e[1][0],o=e[0][1],e=e[1][1],s=t.l,u=t.r,c=s.x,s=s.y,l=u.x,u=u.y,h=(c+l)/2,d=(s+u)/2;if(u===s){if(h<r||a<=h)return;if(l<c){if(i){if(i.y>=e)return}else i={x:h,y:o};n={x:h,y:e}}else{if(i){if(i.y<o)return}else i={x:h,y:e};n={x:h,y:o}}}else if(h=d-(d=(c-l)/(u-s))*h,d<-1||1<d)if(l<c){if(i){if(i.y>=e)return}else i={x:(o-h)/d,y:o};n={x:(e-h)/d,y:e}}else{if(i){if(i.y<o)return}else i={x:(e-h)/d,y:e};n={x:(o-h)/d,y:o}}else if(s<u){if(i){if(i.x>=a)return}else i={x:r,y:d*r+h};n={x:a,y:d*a+h}}else{if(i){if(i.x<r)return}else i={x:a,y:d*a+h};n={x:r,y:d*r+h}}t.a=i,t.b=n}return 1})(e=n[r],t)&&i(e)&&!(G(e.a.x-e.b.x)<O&&G(e.a.y-e.b.y)<O)||(e.a=e.b=null,n.splice(r,1))}function ri(t,e){this.l=t,this.r=e,this.a=this.b=null}function ai(t,e,n,i){var r=new ri(t,e);return as.push(r),n&&oi(r,t,e,n),i&&oi(r,e,t,i),os[t.i].edges.push(new si(r,t,e)),os[e.i].edges.push(new si(r,e,t)),r}function oi(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function si(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function ui(){this._=null}function ci(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function li(t,e){var n=e,e=e.R,i=n.U;i?i.L===n?i.L=e:i.R=e:t._=e,e.U=i,n.U=e,n.R=e.L,n.R&&(n.R.U=n),e.L=n}function hi(t,e){var n=e,e=e.L,i=n.U;i?i.L===n?i.L=e:i.R=e:t._=e,e.U=i,n.U=e,n.L=e.R,n.L&&(n.L.U=n),e.R=n}function di(t){for(;t.L;)t=t.L;return t}function fi(t,e){var n,i,r,a=t.sort(gi).pop();for(as=[],os=new Array(t.length),ss=new ui,cs=new ui;;)if(r=us,a&&(!r||a.y<r.y||a.y===r.y&&a.x<r.x))a.x===n&&a.y===i||(os[a.i]=new Kn(a),Qn(a),n=a.x,i=a.y),a=t.pop();else{if(!r)break;x=_=p=g=f=d=h=l=c=u=s=o=void 0;var o=r.arc,s=o.circle,u=s.x,c=s.cy,l={x:u,y:c},h=o.P,d=o.N,f=[o];Wn(o);for(var g=h;g.circle&&G(u-g.circle.x)<O&&G(c-g.circle.cy)<O;)h=g.P,f.unshift(g),Wn(g),g=h;f.unshift(g),ni(g);for(var p=d;p.circle&&G(u-p.circle.x)<O&&G(c-p.circle.cy)<O;)d=p.N,f.push(p),Wn(p),p=d;f.push(p),ni(p);for(var x=f.length,_=1;_<x;++_)oi((p=f[_]).edge,(g=f[_-1]).site,p.site,l);(p=f[x-1]).edge=ai((g=f[0]).site,p.site,null,l),ei(g),ei(p)}e&&(ii(e),$n(e));e={cells:os,edges:as};return ss=cs=as=os=null,e}function gi(t,e){return e.y-t.y||e.x-t.x}function pi(t){return t.x}function xi(t){return t.y}function _i(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function yi(t,e){t=k.rgb(t),e=k.rgb(e);var n=t.r,i=t.g,r=t.b,a=e.r-n,o=e.g-i,s=e.b-r;return function(t){return"#"+jt(Math.round(n+a*t))+jt(Math.round(i+o*t))+jt(Math.round(r+s*t))}}function mi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=Si(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function vi(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function wi(t,i){var e,n,r,a=fs.lastIndex=gs.lastIndex=0,o=-1,s=[],u=[];for(t+="",i+="";(e=fs.exec(t))&&(n=gs.exec(i));)(r=n.index)>a&&(r=i.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(e=e[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:vi(e,n)})),a=gs.lastIndex;return a<i.length&&(r=i.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?u[0]?(i=u[0].x,function(t){return i(t)+""}):function(){return i}:(i=u.length,function(t){for(var e,n=0;n<i;++n)s[(e=u[n]).i]=e.x(t);return s.join("")})}function Si(t,e){for(var n,i=k.interpolators.length;0<=--i&&!(n=k.interpolators[i](t,e)););return n}function bi(t,e){for(var n=[],i=[],r=t.length,a=e.length,o=Math.min(t.length,e.length),s=0;s<o;++s)n.push(Si(t[s],e[s]));for(;s<r;++s)i[s]=t[s];for(;s<a;++s)i[s]=e[s];return function(t){for(s=0;s<o;++s)i[s]=n[s](t);return i}}function Ai(e){return function(t){return 1-e(1-t)}}function Ti(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Pi(t){return t*t}function Ci(t){return t*t*t}function Li(t){var e,n;return t<=0?0:1<=t?1:(n=(e=t*t)*t,4*(t<.5?n:3*(t-e)+n-.75))}function Mi(t){return 1-Math.cos(t*D)}function Ei(t){return Math.pow(2,10*(t-1))}function Vi(t){return 1-Math.sqrt(1-t*t)}function Gi(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ki(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function Ri(t){var e,n,i=[t.a,t.b],r=[t.c,t.d],a=Ii(i),o=Oi(i,r),s=Ii(((e=r)[0]+=(s=-o)*(n=i)[0],e[1]+=s*n[1],e))||0;i[0]*r[1]<r[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,o*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-r[0],r[1]))*C,this.translate=[t.e,t.f],this.scale=[a,s],this.skew=s?Math.atan2(o,s)*C:0}function Oi(t,e){return t[0]*e[0]+t[1]*e[1]}function Ii(t){var e=Math.sqrt(Oi(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Di(t){return t.length?t.pop()+",":""}function Ni(t,e){var n,i,r,a,o,s=[],u=[];return t=k.transform(t),e=k.transform(e),n=t.translate,i=e.translate,r=s,a=u,n[0]!==i[0]||n[1]!==i[1]?(o=r.push("translate(",null,",",null,")"),a.push({i:o-4,x:vi(n[0],i[0])},{i:o-2,x:vi(n[1],i[1])})):(i[0]||i[1])&&r.push("translate("+i+")"),a=t.rotate,o=s,n=u,a!==(r=e.rotate)?(180<a-r?r+=360:180<r-a&&(a+=360),n.push({i:o.push(Di(o)+"rotate(",null,")")-2,x:vi(a,r)})):r&&o.push(Di(o)+"rotate("+r+")"),i=t.skew,n=s,a=u,i!==(r=e.skew)?a.push({i:n.push(Di(n)+"skewX(",null,")")-2,x:vi(i,r)}):r&&n.push(Di(n)+"skewX("+r+")"),a=t.scale,i=e.scale,n=s,r=u,a[0]!==i[0]||a[1]!==i[1]?(t=n.push(Di(n)+"scale(",null,",",null,")"),r.push({i:t-4,x:vi(a[0],i[0])},{i:t-2,x:vi(a[1],i[1])})):1===i[0]&&1===i[1]||n.push(Di(n)+"scale("+i+")"),function(t){for(var e,n=-1,i=u.length;++n<i;)s[(e=u[n]).i]=e.x(t);return s.join("")}}function Fi(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function zi(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function Xi(t){for(var e=t.source,n=t.target,i=((t,e)=>{if(t===e)return t;for(var n=Hi(t),i=Hi(e),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o})(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function Hi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function Yi(t){t.fixed|=2}function Bi(t){t.fixed&=-7}function ji(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Ui(t){t.fixed&=-5}function qi(t,e){return k.rebind(t,e,"sort","children","value"),(t.nodes=t).links=$i,t}function Wi(t,e){for(var n,i,r=[t];null!=(t=r.pop());)if(e(t),(i=t.children)&&(n=i.length))for(;0<=--n;)r.push(i[n])}function x(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(a=t.children)&&(r=a.length))for(var r,a,o=-1;++o<r;)n.push(a[o]);for(;null!=(t=i.pop());)e(t)}function Qi(t){return t.children}function Zi(t){return t.value}function Ki(t,e){return e.value-t.value}function $i(t){return k.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Ji(t){return t.x}function tr(t){return t.y}function er(t,e,n){t.y0=e,t.y=n}function nr(t){return k.range(t.length)}function ir(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function rr(t){for(var e,n=1,i=0,r=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function ar(t){return t.reduce(or,0)}function or(t,e){return t+e[1]}function sr(t,e){return ur(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ur(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,a=[];++n<=e;)a[n]=r*n+i;return a}function cr(t){return[k.min(t),k.max(t)]}function lr(t,e){return t.value-e.value}function hr(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function dr(t,e){(t._pack_next=e)._pack_prev=t}function fr(t,e){var n=e.x-t.x,i=e.y-t.y,t=t.r+e.r;return n*n+i*i<.999*t*t}function gr(t){function e(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),l=Math.min(t.y-t.r,l),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(s=n.length)){var n,i,r,a,o,s,u=1/0,c=-1/0,l=1/0,h=-1/0;if(n.forEach(pr),(i=n[0]).x=-i.r,i.y=0,e(i),1<s&&((r=n[1]).x=r.r,r.y=0,e(r),2<s))for(_r(i,r,a=n[2]),e(a),hr(i,a),hr(i._pack_prev=a,r),r=i._pack_next,m=3;m<s;m++){_r(i,r,a=n[m]);for(var d=0,f=1,g=1,p=r._pack_next;p!==r;p=p._pack_next,f++)if(fr(p,a)){d=1;break}if(1==d)for(o=i._pack_prev;o!==p._pack_prev&&!fr(o,a);o=o._pack_prev,g++);d?(f<g||f==g&&r.r<i.r?dr(i,r=p):dr(i=o,r),m--):(hr(i,a),e(r=a))}for(var x=(u+c)/2,_=(l+h)/2,y=0,m=0;m<s;m++)(a=n[m]).x-=x,a.y-=_,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,n.forEach(xr)}}function pr(t){t._pack_next=t._pack_prev=t}function xr(t){delete t._pack_next,delete t._pack_prev}function _r(t,e,n){var i,r,a=t.r+n.r,o=e.x-t.x,s=e.y-t.y;a&&(o||s)?(e=e.r+n.r,r=.5+((a*=a)-(e*=e))/(2*(i=o*o+s*s)),e=Math.sqrt(Math.max(0,2*e*(a+i)-(a-=i)*a-e*e))/(2*i),n.x=t.x+r*o+e*s,n.y=t.y+r*s-e*o):(n.x=t.x+a,n.y=t.y)}function yr(t,e){return t.parent==e.parent?1:2}function mr(t){var e=t.children;return e.length?e[0]:t.t}function vr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function wr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Sr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],t=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),t<0&&(i+=t/2,t=0),{x:n,y:i,dx:r,dy:t}}function br(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]}function Ar(t){return t.rangeExtent?t.rangeExtent():br(t.range())}function Tr(t,e,n,i){var r=n(t[0],t[1]),a=i(e[0],e[1]);return function(t){return a(r(t))}}function Pr(t,e){var n,i=0,r=t.length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Cr(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:As}function Lr(n,t,e,i){var r=[],a=[],o=0,s=Math.min(n.length,t.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=s;)r.push(e(n[o-1],n[o])),a.push(i(t[o-1],t[o]));return function(t){var e=k.bisect(n,t,1,s)-1;return a[e](r[e](t))}}function Mr(t,e){return k.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Er(t,e){return Pr(t,Cr(Vr(t,e)[2])),Pr(t,Cr(Vr(t,e)[2])),t}function Vr(t,e){null==e&&(e=10);var t=br(t),n=t[1]-t[0],i=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),e=e/n*i;return e<=.15?i*=10:e<=.35?i*=5:e<=.75&&(i*=2),t[0]=Math.ceil(t[0]/i)*i,t[1]=Math.floor(t[1]/i)*i+.5*i,t[2]=i,t}function Gr(t,e){return k.range.apply(k,Vr(t,e))}function kr(t,e,n){var i,r,a,t=Vr(t,e);if(n){var o,e=no.exec(n);if(e.shift(),"s"===e[8])return o=k.formatPrefix(Math.max(G(t[0]),G(t[1]))),e[7]||(e[7]="."+Rr(o.scale(t[2]))),e[8]="f",n=k.format(e.join("")),function(t){return n(o.scale(t))+o.symbol};e[7]||(e[7]="."+(i=e[8],a=Rr((r=t)[2]),i in Ts?Math.abs(a-Rr(Math.max(G(r[0]),G(r[1]))))+ +("e"!==i):a-2*("%"===i))),n=e.join("")}else n=",."+Rr(t[2])+"f";return k.format(n)}function Rr(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Or(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ir(){return 0}function Dr(t){return t.innerRadius}function Nr(t){return t.outerRadius}function Fr(t){return t.startAngle}function zr(t){return t.endAngle}function Xr(t){return t&&t.padAngle}function Hr(t,e,n,i){return 0<(t-n)*e-(e-i)*t?0:1}function Yr(t,e,n,i,r){var a=t[0]-e[0],o=t[1]-e[1],r=(r?i:-i)/Math.sqrt(a*a+o*o),o=r*o,r=-r*a,a=t[0]+o,t=t[1]+r,s=e[0]+o,e=e[1]+r,u=(a+s)/2,c=(t+e)/2,l=s-a,h=e-t,d=l*l+h*h,i=n-i,a=a*e-s*t,e=(h<0?-1:1)*Math.sqrt(Math.max(0,i*i*d-a*a)),s=(a*h-l*e)/d,t=(-a*l-h*e)/d,f=(a*h+l*e)/d,a=(-a*l+h*e)/d,l=s-u,h=t-c,e=f-u,d=a-c;return e*e+d*d<l*l+h*h&&(s=f,t=a),[[s-o,t-r],[s*n/i,t*n/i]]}function Br(c){function e(t){function e(){i.push("M",f(c(r),g))}for(var n,i=[],r=[],a=-1,o=t.length,s=V(l),u=V(h);++a<o;)d.call(this,n=t[a],a)?r.push([+s.call(this,n,a),+u.call(this,n,a)]):r.length&&(e(),r=[]);return r.length&&e(),i.length?i.join(""):null}var l=Fn,h=zn,d=qe,f=A,n=f.key,g=.7;return e.x=function(t){return arguments.length?(l=t,e):l},e.y=function(t){return arguments.length?(h=t,e):h},e.defined=function(t){return arguments.length?(d=t,e):d},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?f=t:(f=ks.get(t)||A).key,e):n},e.tension=function(t){return arguments.length?(g=t,e):g},e}function A(t){return 1<t.length?t.join("L"):t+"Z"}function jr(t){return t.join("L")+"Z"}function Ur(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function qr(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Wr(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return A(t);var n=t.length!=e.length,i="",r=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=t[1],u=2),1<e.length){s=e[1],a=t[u],u++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,u++)i+="S"+((a=t[u])[0]-(s=e[c])[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}return n&&(r=t[u],i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+r[0]+","+r[1]),i}function Qr(t,e){for(var n,i=[],r=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Zr(t){if(t.length<3)return A(t);var e=1,n=t.length,i=t[0],r=i[0],a=i[1],o=[r,r,r,(i=t[1])[0]],s=[a,a,a,i[1]],u=[r,",",a,"L",c(Is,o),",",c(Is,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Kr(u,o,s);return t.pop(),u.push("L",i),u.join("")}function c(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Kr(t,e,n){t.push("C",c(Rs,e),",",c(Rs,n),",",c(Os,e),",",c(Os,n),",",c(Is,e),",",c(Is,n))}function $r(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Jr(t){for(var e,n,i,r,a=[],o=(t=>{for(var e=0,n=t.length-1,i=[],r=t[1],a=i[0]=$r(t[0],r);++e<n;)i[e]=(a+(a=$r(r,r=t[e+1])))/2;return i[e]=a,i})(t),s=-1,u=t.length-1;++s<u;)e=$r(t[s],t[s+1]),G(e)<O?o[s]=o[s+1]=0:9<(r=(n=o[s]/e)*n+(i=o[s+1]/e)*i)&&(r=3*e/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i);for(s=-1;++s<=u;)r=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function ta(t){for(var e,n,i,r=-1,a=t.length;++r<a;)n=(e=t[r])[0],i=e[1]-D,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function ea(g){function e(t){function e(){a.push("M",v(g(s),b),S,w(g(o.reverse()),b),"Z")}for(var n,i,r,a=[],o=[],s=[],u=-1,c=t.length,l=V(p),h=V(_),d=p===x?function(){return i}:V(x),f=_===y?function(){return r}:V(y);++u<c;)m.call(this,n=t[u],u)?(o.push([i=+l.call(this,n,u),r=+h.call(this,n,u)]),s.push([+d.call(this,n,u),+f.call(this,n,u)])):o.length&&(e(),o=[],s=[]);return o.length&&e(),a.length?a.join(""):null}var p=Fn,x=Fn,_=0,y=zn,m=qe,v=A,n=v.key,w=v,S="L",b=.7;return e.x=function(t){return arguments.length?(p=x=t,e):x},e.x0=function(t){return arguments.length?(p=t,e):p},e.x1=function(t){return arguments.length?(x=t,e):x},e.y=function(t){return arguments.length?(_=y=t,e):y},e.y0=function(t){return arguments.length?(_=t,e):_},e.y1=function(t){return arguments.length?(y=t,e):y},e.defined=function(t){return arguments.length?(m=t,e):m},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?v=t:(v=ks.get(t)||A).key,w=v.reverse||v,S=v.closed?"M":"L",e):n},e.tension=function(t){return arguments.length?(b=t,e):b},e}function na(t){return t.radius}function ia(t){return[t.x,t.y]}function ra(){return 64}function aa(){return"circle"}function oa(t){t=Math.sqrt(t/I);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function sa(i){return function(){var t,e,n;(t=this[i])&&(n=t[e=t.active])&&(n.timer.c=null,n.timer.t=NaN,--t.count?delete t[e]:delete this[i],t.active+=.5,n.event)&&n.event.interrupt.call(this,this.__data__,n.index)}}function ua(t,e,n){return La(t,w),t.namespace=e,t.id=n,t}function ca(t,i,r,a){var o=t.id,s=t.namespace;return vt(t,"function"==typeof r?function(t,e,n){t[s][o].tween.set(i,a(r.call(t,t.__data__,e,n)))}:(r=a(r),function(t){t[s][o].tween.set(i,r)}))}function la(t){return null==t&&(t=""),function(){this.textContent=t}}function ha(t){return null==t?"__transition__":"__transition_"+t+"__"}function da(a,o,i,s,t){function n(t){var e,n,i=g.active,r=g[i];for(e in r&&(r.timer.c=null,r.timer.t=NaN,--g.count,delete g[i],r.event)&&r.event.interrupt.call(a,a.__data__,r.index),g)+e<s&&((n=g[e]).timer.c=null,n.timer.t=NaN,--g.count,delete g[e]);l.c=u,Jt(function(){return l.c&&u(t||1)&&(l.c=null,l.t=NaN),1},0,c),g.active=s,p.event&&p.event.start.call(a,a.__data__,o),f=[],p.tween.forEach(function(t,e){(e=e.call(a,a.__data__,o))&&f.push(e)}),d=p.ease,h=p.duration}function u(t){for(var t=t/h,e=d(t),n=f.length;0<n;)f[--n].call(a,e);return 1<=t?(p.event&&p.event.end.call(a,a.__data__,o),--g.count?delete g[s]:delete a[i],1):void 0}var c,l,h,d,f,g=a[i]||(a[i]={active:0,count:0}),p=g[s];p||(c=t.time,l=Jt(function(t){var e=p.delay;return l.t=e+c,e<=t?n(t-e):void(l.c=n)},0,c),p=g[s]={tween:new B,time:c,timer:l,delay:t.delay,duration:t.duration,ease:t.ease,index:o},t=null,++g.count)}function fa(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:i(t))+",0)"})}function ga(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:i(t))+")"})}function pa(t){return t.toISOString()}function xa(e,r,t){function a(t){return e(t)}function o(t,e){var n=(t[1]-t[0])/e,i=k.bisect(Qs,n);return i==Qs.length?[r.year,Vr(t.map(function(t){return t/31536e6}),e)[2]]:i?r[n/Qs[i-1]<Qs[i]/n?i-1:i]:[$s,Vr(t,e)[2]]}return a.invert=function(t){return _a(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain(t),a):e.domain().map(_a)},a.nice=function(e,n){function i(t){return!isNaN(t)&&!e.range(t,_a(+t+1),n).length}var t=a.domain(),r=br(t),r=null==e?o(r,10):"number"==typeof e&&o(r,e);return r&&(e=r[0],n=r[1]),a.domain(Pr(t,1<n?{floor:function(t){for(;i(t=e.floor(t));)t=_a(t-1);return t},ceil:function(t){for(;i(t=e.ceil(t));)t=_a(+t+1);return t}}:e))},a.ticks=function(t,e){var n=br(a.domain()),i=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],_a(+n[1]+1),e<1?1:e)},a.tickFormat=function(){return t},a.copy=function(){return xa(e.copy(),r,t)},Mr(a,e)}function _a(t){return new Date(t)}function ya(t){return JSON.parse(t.responseText)}function ma(t){var e=R.createRange();return e.selectNode(R.body),e.createContextualFragment(t.responseText)}var k={version:"3.5.17"},va=[].slice,d=function(t){return va.call(t)},R=this.document;if(R)try{d(R.documentElement.childNodes)[0].nodeType}catch(t){d=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),R)try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var e=this.Element.prototype,wa=e.setAttribute,Sa=e.setAttributeNS,n=this.CSSStyleDeclaration.prototype,ba=n.setProperty;e.setAttribute=function(t,e){wa.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){Sa.call(this,t,e,n+"")},n.setProperty=function(t,e,n){ba.call(this,t,e+"",n)}}k.ascending=F,k.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},k.min=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n},k.max=function(t,e){var n,i,r=-1,a=t.length;if(1===arguments.length){for(;++r<a;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<a;)null!=(i=t[r])&&n<i&&(n=i)}else{for(;++r<a;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<a;)null!=(i=e.call(t,t[r],r))&&n<i&&(n=i)}return n},k.extent=function(t,e){var n,i,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(i=t[a])&&i<=i){n=r=i;break}for(;++a<o;)null!=(i=t[a])&&(i<n&&(n=i),r<i)&&(r=i)}else{for(;++a<o;)if(null!=(i=e.call(t,t[a],a))&&i<=i){n=r=i;break}for(;++a<o;)null!=(i=e.call(t,t[a],a))&&(i<n&&(n=i),r<i)&&(r=i)}return[n,r]},k.sum=function(t,e){var n,i=0,r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)X(n=+t[a])&&(i+=n);else for(;++a<r;)X(n=+e.call(t,t[a],a))&&(i+=n);return i},k.mean=function(t,e){var n,i=0,r=t.length,a=-1,o=r;if(1===arguments.length)for(;++a<r;)X(n=z(t[a]))?i+=n:--o;else for(;++a<r;)X(n=z(e.call(t,t[a],a)))?i+=n:--o;return o?i/o:void 0},k.quantile=function(t,e){var e=(t.length-1)*e+1,n=Math.floor(e),i=+t[n-1],e=e-n;return e?i+e*(t[n]-i):i},k.median=function(t,e){var n,i=[],r=t.length,a=-1;if(1===arguments.length)for(;++a<r;)X(n=z(t[a]))&&i.push(n);else for(;++a<r;)X(n=z(e.call(t,t[a],a)))&&i.push(n);return i.length?k.quantile(i.sort(F),.5):void 0},k.variance=function(t,e){var n,i,r=t.length,a=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<r;)X(n=z(t[s]))&&(o+=(i=n-a)*(n-(a+=i/++u)));else for(;++s<r;)X(n=z(e.call(t,t[s],s)))&&(o+=(i=n-a)*(n-(a+=i/++u)));return 1<u?o/(u-1):void 0},k.deviation=function(){var t=k.variance.apply(this,arguments);return t&&Math.sqrt(t)};var e=t(F),G=(k.bisectLeft=e.left,k.bisect=k.bisectRight=e.right,k.bisector=function(n){return t(1===n.length?function(t,e){return F(n(t),e)}:n)},k.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2)&&(e=0);for(var i,r,a=n-e;a;)r=Math.random()*a--|0,i=t[a+e],t[a+e]=t[r+e],t[r+e]=i;return t},k.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},k.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},k.transpose=function(t){if(!(r=t.length))return[];for(var e=-1,n=k.min(t,H),i=new Array(n);++e<n;)for(var r,a=-1,o=i[e]=new Array(r);++a<r;)o[a]=t[a][e];return i},k.zip=function(){return k.transpose(arguments)},k.keys=function(t){var e,n=[];for(e in t)n.push(e);return n},k.values=function(t){var e,n=[];for(e in t)n.push(t[e]);return n},k.entries=function(t){var e,n=[];for(e in t)n.push({key:e,value:t[e]});return n},k.merge=function(t){for(var e,n,i,r=t.length,a=-1,o=0;++a<r;)o+=t[a].length;for(n=new Array(o);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--o]=i[e];return n},Math.abs),Aa=(k.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2)&&(e=t,t=0),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],a=(t=>{for(var e=1;t*e%1;)e*=10;return e})(G(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(i=t+n*++o)>e;)r.push(i/a);else for(;(i=t+n*++o)<e;)r.push(i/a);return r},k.map=function(t,e){var n=new B;if(t instanceof B)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(1===arguments.length)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e.call(t,i=t[r],r),i)}else for(var o in t)n.set(o,t[o]);return n},"__proto__"),Ta="\0",Pa=(Y(B,{has:q,get:function(t){return this._[j(t)]},set:function(t,e){return this._[j(t)]=e},remove:W,keys:Q,values:function(){var t,e=[];for(t in this._)e.push(this._[t]);return e},entries:function(){var t,e=[];for(t in this._)e.push({key:U(t),value:this._[t]});return e},size:Z,empty:K,forEach:function(t){for(var e in this._)t.call(this,U(e),this._[e])}}),k.nest=function(){function h(n,t,i){if(i>=p.length)return f?f.call(g,t):d?t.sort(d):t;for(var e,r,a,o,s=-1,u=t.length,c=p[i++],l=new B;++s<u;)(o=l.get(e=c(r=t[s])))?o.push(r):l.set(e,[r]);return a=n?(r=n(),function(t,e){r.set(t,h(n,e,i))}):(r={},function(t,e){r[t]=h(n,e,i)}),l.forEach(a),r}var d,f,g={},p=[],e=[];return g.map=function(t,e){return h(e,t,0)},g.entries=function(t){return function n(t,i){var r,a;return i>=p.length?t:(r=[],a=e[i++],t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r)}(h(k.map,t,0),0)},g.key=function(t){return p.push(t),g},g.sortKeys=function(t){return e[p.length-1]=t,g},g.sortValues=function(t){return d=t,g},g.rollup=function(t){return f=t,g},g},k.set=function(t){var e=new $;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},Y($,{has:q,add:function(t){return this._[j(t+="")]=!0,t},remove:W,values:Q,size:Z,empty:K,forEach:function(t){for(var e in this._)t.call(this,U(e))}}),k.behavior={},k.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=((e,n,i)=>function(){var t=i.apply(n,arguments);return t===n?e:t})(t,e,e[n]);return t},["webkit","ms","moz","Moz","o","O"]),Ca=(k.dispatch=function(){for(var t=new tt,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=et(t);return t},tt.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},k.event=null,k.requote=function(t){return t.replace(Ca,"\\$&")},/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g),La={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Ma=function(t,e){return e.querySelector(t)},Ea=function(t,e){return e.querySelectorAll(t)},Va=function(t,e){var n=t.matches||t[J(t,"matchesSelector")];return(Va=function(t,e){return n.call(t,e)})(t,e)},r=("function"==typeof Sizzle&&(Ma=function(t,e){return Sizzle(t,e)[0]||null},Va=(Ea=Sizzle).matchesSelector),k.selection=function(){return k.select(R.documentElement)},k.selection.prototype=[]),Ga=(r.select=function(t){var e,n,i,r,a=[];t=ot(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(i=this[o]).parentNode;for(var u=-1,c=i.length;++u<c;)(r=i[u])?(e.push(n=t.call(r,r.__data__,u,o)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return at(a)},r.selectAll=function(t){var e,n,i=[];t=st(t);for(var r=-1,a=this.length;++r<a;)for(var o=this[r],s=-1,u=o.length;++s<u;)(n=o[s])&&(i.push(e=d(t.call(n,n.__data__,s,r))),e.parentNode=n);return at(i)},"http://www.w3.org/1999/xhtml"),ka={svg:"http://www.w3.org/2000/svg",xhtml:Ga,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ra=(k.ns={prefix:ka,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),ka.hasOwnProperty(n)?{space:ka[n],local:t}:t}},r.attr=function(t,e){if(arguments.length<2){var n;if("string"==typeof t)return n=this.node(),(t=k.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t);for(e in t)this.each(ut(e,t[e]));return this}return this.each(ut(t,e))},r.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=ht(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!lt(t[r]).test(e))return!1;return!0}for(e in t)this.each(dt(e,t[e]));return this}return this.each(dt(t,e))},r.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(gt(n,t[n],e));return this}if(i<2)return N(i=this.node()).getComputedStyle(i,null).getPropertyValue(t);n=""}return this.each(gt(t,e,n))},r.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(pt(e,t[e]));return this}return this.each(pt(t,e))},r.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},r.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},r.append=function(t){return t=xt(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},r.insert=function(t,e){return t=xt(t),e=ot(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},r.remove=function(){return this.each(_t)},r.data=function(t,g){function e(t,e){var n,i,r=t.length,a=e.length,o=Math.min(r,a),s=new Array(a),u=new Array(a),c=new Array(r);if(g){for(var l,h=new B,d=new Array(r),f=-1;++f<r;)(n=t[f])&&(h.has(l=g.call(n,n.__data__,f))?c[f]=n:h.set(l,n),d[f]=l);for(f=-1;++f<a;)(n=h.get(l=g.call(e,i=e[f],f)))?!0!==n&&((s[f]=n).__data__=i):u[f]=yt(i),h.set(l,!0);for(f=-1;++f<r;)f in d&&!0!==h.get(d[f])&&(c[f]=t[f])}else{for(f=-1;++f<o;)n=t[f],i=e[f],n?(n.__data__=i,s[f]=n):u[f]=yt(i);for(;f<a;++f)u[f]=yt(e[f]);for(;f<r;++f)c[f]=t[f]}u.update=s,u.parentNode=s.parentNode=c.parentNode=t.parentNode,p.push(u),x.push(s),_.push(c)}var n,i,r=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++r<a;)(i=n[r])&&(t[r]=i.__data__);return t}var p=wt([]),x=at([]),_=at([]);if("function"==typeof t)for(;++r<a;)e(n=this[r],t.call(n,n.parentNode.__data__,r));else for(;++r<a;)e(n=this[r],t);return x.enter=function(){return p},x.exit=function(){return _},x},r.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},r.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=mt(t));for(var a=0,o=this.length;a<o;a++){r.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(i=n[s])&&t.call(i,i.__data__,s,a)&&e.push(i)}return at(r)},r.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,a=i[r];0<=--r;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},r.sort=function(t){t=function(n){return arguments.length||(n=F),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},r.each=function(i){return vt(this,function(t,e,n){i.call(t,t.__data__,e,n)})},r.call=function(t){var e=d(arguments);return t.apply(e[0]=this,e),this},r.empty=function(){return!this.node()},r.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var a=n[i];if(a)return a}return null},r.size=function(){var t=0;return vt(this,function(){++t}),t},[]),Oa=(k.selection.enter=wt,(k.selection.enter.prototype=Ra).append=r.append,Ra.empty=r.empty,Ra.node=r.node,Ra.call=r.call,Ra.size=r.size,Ra.select=function(t){for(var e,n,i,r,a,o=[],s=-1,u=this.length;++s<u;){i=(r=this[s]).update,o.push(e=[]),e.parentNode=r.parentNode;for(var c=-1,l=r.length;++c<l;)(a=r[c])?(e.push(i[c]=n=t.call(r.parentNode,a.__data__,c,s)),n.__data__=a.__data__):e.push(null)}return at(o)},Ra.insert=function(t,e){return arguments.length<2&&(o=this,e=function(t,e,n){var i,r=o[n].update,a=r.length;for(n!=u&&(u=n,s=0),s<=e&&(s=e+1);!(i=r[s])&&++s<a;);return i}),r.insert.call(this,t,e);var o,s,u},k.select=function(t){var e;return"string"==typeof t?(e=[Ma(t,R)]).parentNode=R.documentElement:(e=[t]).parentNode=M(t),at([e])},k.selectAll=function(t){var e;return"string"==typeof t?(e=d(Ea(t,R))).parentNode=R.documentElement:(e=d(t)).parentNode=null,at([e])},r.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(St(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(St(t,e,n))},k.map({mouseenter:"mouseover",mouseleave:"mouseout"}));R&&Oa.forEach(function(t){"on"+t in R&&Oa.remove(t)});var Ia,Da=0,Na=(k.mouse=function(t){return Pt(t,it())},this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0),O=(k.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=it().changedTouches),e)for(var i,r=0,a=e.length;r<a;++r)if((i=e[r]).identifier===n)return Pt(t,i)},k.behavior.drag=function(){function e(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function t(l,h,d,f,g){return function(){var t=k.event.target.correspondingElement||k.event.target,i=this.parentNode,r=p.of(this,arguments),a=0,o=l(),e=".drag"+(null==o?"":"-"+o),n=k.select(d(t)).on(f+e,function(){var t,e,n=h(i,o);n&&(t=n[0]-u[0],e=n[1]-u[1],a|=t|e,r({type:"drag",x:(u=n)[0]+c[0],y:n[1]+c[1],dx:t,dy:e}))}).on(g+e,function(){h(i,o)&&(n.on(f+e,null).on(g+e,null),s(a),r({type:"dragend"}))}),s=Tt(t),u=h(i,o),c=x?[(c=x.apply(this,arguments)).x-u[0],c.y-u[1]]:[0,0];r({type:"dragstart"})}}var p=rt(e,"drag","dragstart","dragend"),x=null,n=t(u,k.mouse,N,"mousemove","mouseup"),i=t(Ct,k.touch,E,"touchmove","touchend");return e.origin=function(t){return arguments.length?(x=t,e):x},k.rebind(e,p,"on")},k.touches=function(n,t){return(t=arguments.length<2?it().touches:t)?d(t).map(function(t){var e=Pt(n,t);return e.identifier=t.identifier,e}):[]},1e-6),Fa=O*O,I=Math.PI,T=2*I,za=T-O,D=I/2,P=I/180,C=180/I,Xa=Math.SQRT2;k.interpolateZoom=function(t,e){var i,r,a,o=t[0],s=t[1],u=t[2],t=e[0],n=e[2],c=t-o,l=e[1]-s,t=c*c+l*l;return(n=t<Fa?(a=Math.log(n/u)/Xa,function(t){return[o+t*c,s+t*l,u*Math.exp(Xa*t*a)]}):(i=Math.sqrt(t),e=(n*n-u*u+4*t)/(2*u*2*i),t=(n*n-u*u-4*t)/(2*n*2*i),r=Math.log(Math.sqrt(e*e+1)-e),a=(Math.log(Math.sqrt(t*t+1)-t)-r)/Xa,function(t){var t=t*a,e=Gt(r),n=u/(2*i)*(e*(n=Xa*t+r,((n=Math.exp(2*n))-1)/(n+1))-(n=r,((n=Math.exp(r))-1/n)/2));return[o+n*c,s+n*l,u*e/Gt(Xa*t+r)]})).duration=1e3*a,n},k.behavior.zoom=function(){function r(t){t.on(M,T).on(Ya+".zoom",n).on("dblclick.zoom",i).on(V,P)}function y(t){return[(t[0]-L.x)/L.k,(t[1]-L.y)/L.k]}function m(t){L.k=Math.max(g[0],Math.min(g[1],t))}function v(t,e){var n;e=[(n=e)[0]*L.k+L.x,n[1]*L.k+L.y],L.x+=t[0]-e[0],L.y+=t[1]-e[1]}function w(t,e,n,i){t.__chart__={x:L.x,y:L.y,k:L.k},m(Math.pow(2,i)),v(s=e,n),t=k.select(t),(t=0<p?t.transition().duration(p):t).call(r.event)}function e(){l&&l.domain(c.range().map(function(t){return(t-L.x)/L.k}).map(c.invert)),d&&d.domain(h.range().map(function(t){return(t-L.y)/L.k}).map(h.invert))}function S(t){x++||t({type:"zoomstart"})}function b(t){e(),t({type:"zoom",scale:L.k,translate:[L.x,L.y]})}function A(t){--x||(t({type:"zoomend"}),s=null)}function T(){var t=this,e=G.of(t,arguments),n=0,i=k.select(N(t)).on(_,function(){n=1,v(k.mouse(t),r),b(e)}).on(E,function(){i.on(_,null).on(E,null),a(n),A(e)}),r=y(k.mouse(t)),a=Tt(t);Hs.call(t),S(e)}function P(){function o(){var t=k.touches(l);return c=L.k,t.forEach(function(t){t.identifier in d&&(d[t.identifier]=y(t))}),t}function t(){var t=k.event.target;k.select(t).on(g,s).on(p,u),x.push(t);for(var e=k.event.changedTouches,n=0,i=e.length;n<i;++n)d[e[n].identifier]=null;var r,t=o(),a=Date.now();1===t.length?(a-C<500&&(r=t[0],w(l,r,d[r.identifier],Math.floor(Math.log(L.k)/Math.LN2)+1),nt()),C=a):1<t.length&&(r=t[0],a=t[1],t=r[0]-a[0],f=t*t+(t=r[1]-a[1])*t)}function s(){var t,e,n=k.touches(l);Hs.call(l);for(var i,r,a,o=0,s=n.length;o<s;++o,e=null)if(t=n[o],e=d[t.identifier]){if(a)break;r=t,a=e}e&&(i=(i=t[0]-r[0])*i+(i=t[1]-r[1])*i,i=f&&Math.sqrt(i/f),r=[(r[0]+t[0])/2,(r[1]+t[1])/2],a=[(a[0]+e[0])/2,(a[1]+e[1])/2],m(i*c)),C=null,v(r,a),b(h)}function u(){if(k.event.touches.length){for(var t,e=k.event.changedTouches,n=0,i=e.length;n<i;++n)delete d[e[n].identifier];for(t in d)return void o()}k.selectAll(x).on(r,null),a.on(M,T).on(V,P),_(),A(h)}var c,l=this,h=G.of(l,arguments),d={},f=0,r=".zoom-"+k.event.changedTouches[0].identifier,g="touchmove"+r,p="touchend"+r,x=[],a=k.select(l),_=Tt(l);t(),S(h),a.on(M,null).on(V,t)}function n(){var t=G.of(this,arguments);u?clearTimeout(u):(Hs.call(this),a=y(s=o||k.mouse(this)),S(t)),u=setTimeout(function(){u=null,A(t)},50),nt(),m(Math.pow(2,.002*Ha())*L.k),v(s,a),b(t)}function i(){var t=k.mouse(this),e=Math.log(L.k)/Math.LN2;w(this,t,y(t),k.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var a,s,o,u,C,c,l,h,d,L={x:0,y:0,k:1},f=[960,500],g=Ba,p=250,x=0,M="mousedown.zoom",_="mousemove.zoom",E="mouseup.zoom",V="touchstart.zoom",G=rt(r,"zoomstart","zoom","zoomend");return Ya=Ya||("onwheel"in R?(Ha=function(){return-k.event.deltaY*(k.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ha=function(){return k.event.wheelDelta},"mousewheel"):(Ha=function(){return-k.event.detail},"MozMousePixelScroll")),r.event=function(t){t.each(function(){var o=G.of(this,arguments),e=L;zs?k.select(this).transition().each("start.zoom",function(){L=this.__chart__||{x:0,y:0,k:1},S(o)}).tween("zoom:zoom",function(){var n=f[0],t=f[1],i=s?s[0]:n/2,r=s?s[1]:t/2,a=k.interpolateZoom([(i-L.x)/L.k,(r-L.y)/L.k,n/L.k],[(i-e.x)/e.k,(r-e.y)/e.k,n/e.k]);return function(t){var t=a(t),e=n/t[2];this.__chart__=L={x:i-t[0]*e,y:r-t[1]*e,k:e},b(o)}}).each("interrupt.zoom",function(){A(o)}).each("end.zoom",function(){A(o)}):(this.__chart__=L,S(o),b(o),A(o))})},r.translate=function(t){return arguments.length?(L={x:+t[0],y:+t[1],k:L.k},e(),r):[L.x,L.y]},r.scale=function(t){return arguments.length?(L={x:L.x,y:L.y,k:null},m(+t),e(),r):L.k},r.scaleExtent=function(t){return arguments.length?(g=null==t?Ba:[+t[0],+t[1]],r):g},r.center=function(t){return arguments.length?(o=t&&[+t[0],+t[1]],r):o},r.size=function(t){return arguments.length?(f=t&&[+t[0],+t[1]],r):f},r.duration=function(t){return arguments.length?(p=+t,r):p},r.x=function(t){return arguments.length?(c=(l=t).copy(),L={x:0,y:0,k:1},r):l},r.y=function(t){return arguments.length?(h=(d=t).copy(),L={x:0,y:0,k:1},r):d},k.rebind(r,G,"on")};var Ha,Ya,Ba=[0,1/0],n=((k.color=Rt).prototype.toString=function(){return this.rgb()+""},(k.hsl=Ot).prototype=new Rt),e=(n.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ot(this.h,this.s,this.l/t)},n.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ot(this.h,this.s,t*this.l)},n.rgb=function(){return It(this.h,this.s,this.l)},(k.hcl=i).prototype=new Rt),ja=(e.brighter=function(t){return new i(this.h,this.c,Math.min(100,this.l+ja*(arguments.length?t:1)))},e.darker=function(t){return new i(this.h,this.c,Math.max(0,this.l-ja*(arguments.length?t:1)))},e.rgb=function(){return Dt(this.h,this.c,this.l).rgb()},k.lab=a,18),Ua=.95047,qa=1,Wa=1.08883,n=a.prototype=new Rt,e=(n.brighter=function(t){return new a(Math.min(100,this.l+ja*(arguments.length?t:1)),this.a,this.b)},n.darker=function(t){return new a(Math.max(0,this.l-ja*(arguments.length?t:1)),this.a,this.b)},n.rgb=function(){return Nt(this.l,this.a,this.b)},(k.rgb=o).prototype=new Rt),Qa=(e.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new o(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new o(30,30,30)},e.darker=function(t){return new o((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},e.hsl=function(){return qt(this.r,this.g,this.b)},e.toString=function(){return"#"+jt(this.r)+jt(this.g)+jt(this.b)},k.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}));Qa.forEach(function(t,e){Qa.set(t,Yt(e))}),k.functor=V,k.xhr=Kt(E),k.dsv=function(r,a){function o(t,e,n){arguments.length<3&&(n=e,e=null);var i=$t(t,a,null==e?s:u(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?s:u(t)):e},i}function s(t){return o.parse(t.responseText)}function u(e){return function(t){return o.parse(t.responseText,e)}}function e(t){return t.map(c).join(r)}function c(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var n=new RegExp('["'+r+"\n]"),d=r.charCodeAt(0);return o.parse=function(t,i){var r;return o.parseRows(t,function(t,e){if(r)return r(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=i?function(t,e){return i(n(t),e)}:n})},o.parseRows=function(r,t){function e(){if(u<=c)return s;if(a)return a=!1,o;var t=c;if(34===r.charCodeAt(t)){for(var e=t;e++<u;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}return c=e+2,13===(n=r.charCodeAt(e+1))?(a=!0,10===r.charCodeAt(e+2)&&++c):10===n&&(a=!0),r.slice(t+1,e).replace(/""/g,'"')}for(;c<u;){var n,i=1;if(10===(n=r.charCodeAt(c++)))a=!0;else if(13===n)a=!0,10===r.charCodeAt(c)&&(++c,++i);else if(n!==d)continue;return r.slice(t,c-i)}return r.slice(t)}for(var n,a,o={},s={},i=[],u=r.length,c=0,l=0;(n=e())!==s;){for(var h=[];n!==o&&n!==s;)h.push(n),n=e();t&&null==(h=t(h,l++))||i.push(h)}return i},o.format=function(t){var n,i;return Array.isArray(t[0])?o.formatRows(t):(n=new $,i=[],t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(c).join(r)].concat(t.map(function(e){return i.map(function(t){return c(e[t])}).join(r)})).join("\n"))},o.formatRows=function(t){return t.map(e).join("\n")},o},k.csv=k.dsv(",","text/csv"),k.tsv=k.dsv("\t","text/tab-separated-values");var Za,Ka,$a,Ja,to=this[J(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)},eo=(k.timer=function(){Jt.apply(this,arguments)},k.timer.flush=function(){ee(),ne()},k.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*G(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}})),no=(k.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=k.round(t,ie(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),eo[8+n/3]},/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i),io=k.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=k.round(t,ie(t,e))).toFixed(Math.max(0,Math.min(20,ie(t*(1+1e-15),e))))}}),b=k.time={},L=Date,ro=(ae.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ro.setUTCDate.apply(this._,arguments)},setDay:function(){ro.setUTCDay.apply(this._,arguments)},setFullYear:function(){ro.setUTCFullYear.apply(this._,arguments)},setHours:function(){ro.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ro.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ro.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ro.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ro.setUTCSeconds.apply(this._,arguments)},setTime:function(){ro.setTime.apply(this._,arguments)}},Date.prototype),ao=(b.year=oe(function(t){return(t=b.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),b.years=b.year.range,b.years.utc=b.year.utc.range,b.day=oe(function(t){var e=new L(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),b.days=b.day.range,b.days.utc=b.day.utc.range,b.dayOfYear=function(t){var e=b.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=b[t]=oe(function(t){return(t=b.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=b.year(t).getDay();return Math.floor((b.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});b[t+"s"]=e.range,b[t+"s"].utc=e.utc.range,b[t+"OfYear"]=function(t){var e=b.year(t).getDay();return Math.floor((b.dayOfYear(t)+(e+n)%7)/7)}}),b.week=b.sunday,b.weeks=b.sunday.range,b.weeks.utc=b.sunday.utc.range,b.weekOfYear=b.sundayOfYear,{"-":"",_:" ",0:"0"}),s=/^\s*\d+/,oo=/^%/,n=(k.locale=function(t){return{numberFormat:(w=t.decimal,s=t.thousands,n=t.currency,S=(u=t.grouping)&&s?function(t,e){for(var n=t.length,i=[],r=0,a=u[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),i.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=u[r=(r+1)%u.length];return i.reverse().join(s)}:E,function(t){var t=no.exec(t),s=t[1]||" ",u=t[2]||">",c=t[3]||"-",e=t[4]||"",l=t[5],h=+t[6],d=t[7],f=t[8],g=t[9],p=1,x="",_="",y=!1,m=!0,f=f&&+f.substring(1);switch((l||"0"===s&&"="===u)&&(l=s="0",u="="),g){case"n":d=!0,g="g";break;case"%":p=100,_="%",g="f";break;case"p":p=100,_="%",g="r";break;case"b":case"o":case"x":case"X":"#"===e&&(x="0"+g.toLowerCase());case"c":m=!1;case"d":y=!0,f=0;break;case"s":p=-1,g="r"}"$"===e&&(x=n[0],_=n[1]),"r"!=g||f||(g="g"),null!=f&&("g"==g?f=Math.max(1,Math.min(21,f)):"e"!=g&&"f"!=g||(f=Math.max(0,Math.min(20,f))));var g=io.get(g)||re,v=l&&d;return function(t){var e=_;if(y&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===c?"":c;p<0?(t=(a=k.formatPrefix(t,f)).scale(t),e=a.symbol+_):t*=p;var i,r,a=(t=g(t,f)).lastIndexOf("."),a=(r=a<0?(r=m?t.lastIndexOf("e"):-1)<0?(i=t,""):(i=t.substring(0,r),t.substring(r)):(i=t.substring(0,a),w+t.substring(a+1)),!l&&d&&(i=S(i,1/0)),x.length+i.length+r.length+(v?0:n.length)),o=a<h?new Array(a=h-a+1).join(s):"";return v&&(i=S(o+i,o.length?h-r.length:1/0)),n+=x,t=i+r,("<"===u?n+t+o:">"===u?o+n+t:"^"===u?o.substring(0,a>>=1)+n+t+o.substring(a):n+(v?t:o+t))+e}}),timeFormat:ue(t)};var w,s,u,n,S},k.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})),so=(k.format=n.numberFormat,k.geo={},Ce.prototype={s:0,t:0,add:function(t){Le(t,this.t,so),Le(so.s,this.s,this),this.s?this.t+=so.t:this.s=so.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}},new Ce),uo=(k.geo.stream=function(t,e){t&&uo.hasOwnProperty(t.type)?uo[t.type](t,e):Me(t,e)},{Feature:function(t,e){Me(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Me(n[i].geometry,e)}}),co={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ee(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ee(n[i],e,0)},Polygon:function(t,e){Ve(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ve(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Me(n[i],e)}};k.geo.area=function(t){return lo=0,k.geo.stream(t,_),lo};var lo,l,h,f,g,ho,fo,go,po,xo,_o,yo,p,mo=new Ce,_={sphere:function(){lo+=4*I},point:u,lineStart:u,lineEnd:u,polygonStart:function(){mo.reset(),_.lineStart=Ge},polygonEnd:function(){var t=2*mo;lo+=t<0?4*I+t:t,_.lineStart=_.lineEnd=_.point=u}};function vo(t,e){_o.push(yo=[l=t,f=t]),e<h&&(h=e),g<e&&(g=e)}function wo(t,e){var n,i,r,a,o,s=ke([t*P,e*P]);po?(n=Oe(po,s),Ne(n=Oe([n[1],-n[0],0],n)),n=Fe(n),a=t-ho,r=n[0]*C*(i=0<a?1:-1),(a=180<G(a))^(i*ho<r&&r<i*t)?(o=n[1]*C,g<o&&(g=o)):a^(i*ho<(r=(360+r)%360-180)&&r<i*t)?(o=-n[1]*C)<h&&(h=o):(e<h&&(h=e),g<e&&(g=e)),a?t<ho?y(l,t)>y(l,f)&&(f=t):y(t,f)>y(l,f)&&(l=t):l<=f?(t<l&&(l=t),f<t&&(f=t)):ho<t?y(l,t)>y(l,f)&&(f=t):y(t,f)>y(l,f)&&(l=t)):vo(t,e),po=s,ho=t}function So(){p.point=wo}function bo(){yo[0]=l,yo[1]=f,p.point=vo,po=null}function Ao(t,e){var n;po?xo+=180<G(n=t-ho)?n+(0<n?360:-360):n:(fo=t,go=e),_.point(t,e),wo(t,e)}function To(){_.lineStart()}function Po(){Ao(fo,go),_.lineEnd(),G(xo)>O&&(l=-(f=180)),yo[0]=l,yo[1]=f,po=null}function y(t,e){return(e-=t)<0?e+360:e}function Co(t,e){return t[0]-e[0]}function Lo(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}k.geo.bounds=(p={point:vo,lineStart:So,lineEnd:bo,polygonStart:function(){p.point=Ao,p.lineStart=To,p.lineEnd=Po,xo=0,_.polygonStart()},polygonEnd:function(){_.polygonEnd(),p.point=vo,p.lineStart=So,p.lineEnd=bo,mo<0?(l=-(f=180),h=-(g=90)):O<xo?g=90:xo<-O&&(h=-90),yo[0]=l,yo[1]=f}},function(t){if(g=f=-(l=h=1/0),_o=[],k.geo.stream(t,p),a=_o.length){_o.sort(Co);for(var e=1,n=[s=_o[0]];e<a;++e)Lo((r=_o[e])[0],s)||Lo(r[1],s)?(y(s[0],r[1])>y(s[0],s[1])&&(s[1]=r[1]),y(r[0],s[1])>y(s[0],s[1])&&(s[0]=r[0])):n.push(s=r);for(var i,r,a,o=-1/0,e=0,s=n[a=n.length-1];e<=a;s=r,++e)(i=y(s[1],(r=n[e])[0]))>o&&(o=i,l=r[0],f=s[1])}return _o=yo=null,l===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,h],[f,g]]}),k.geo.centroid=function(t){Mo=Eo=Vo=Go=ko=Ro=Oo=Io=Do=No=Fo=0,k.geo.stream(t,m);var t=Do,e=No,n=Fo,i=t*t+e*e+n*n;return i<Fa&&(t=Ro,e=Oo,n=Io,Eo<O&&(t=Vo,e=Go,n=ko),(i=t*t+e*e+n*n)<Fa)?[NaN,NaN]:[Math.atan2(e,t)*C,Vt(n/Math.sqrt(i))*C]};var Mo,Eo,Vo,Go,ko,Ro,Oo,Io,Do,No,Fo,m={sphere:u,point:Xe,lineStart:Ye,lineEnd:Be,polygonStart:function(){m.lineStart=je},polygonEnd:function(){m.lineStart=Ye}},zo=Ke(qe,function(c){var l,h=NaN,d=NaN,f=NaN;return{lineStart:function(){c.lineStart(),l=1},point:function(t,e){var n,i,r,a,o,s=0<t?I:-I,u=G(t-h);G(u-I)<O?(c.point(h,d=0<(d+e)/2?D:-D),c.point(f,d),c.lineEnd(),c.lineStart(),c.point(s,d),c.point(t,d),l=0):f!==s&&I<=u&&(G(h-f)<O&&(h-=f*O),G(t-s)<O&&(t-=s*O),u=h,n=d,i=t,r=e,o=Math.sin(u-i),d=G(o)>O?Math.atan((Math.sin(n)*(a=Math.cos(r))*Math.sin(i)-Math.sin(r)*(i=Math.cos(n))*Math.sin(u))/(i*a*o)):(n+r)/2,c.point(f,d),c.lineEnd(),c.lineStart(),c.point(s,d),l=0),c.point(h=t,d=e),f=s},lineEnd:function(){c.lineEnd(),h=d=NaN},clean:function(){return 2-l}}},function(t,e,n,i){var r;null==t?(i.point(-I,r=n*D),i.point(0,r),i.point(I,r),i.point(I,0),i.point(I,-r),i.point(0,-r),i.point(-I,-r),i.point(-I,0),i.point(-I,r)):G(t[0]-e[0])>O?(t=t[0]<e[0]?I:-I,i.point(-t,r=n*t/2),i.point(0,r),i.point(t,r)):i.point(e[0],e[1])},[-I,-I/2]),Xo=1e9;k.geo.clipExtent=function(){var e,n,i,r,a,o,s={stream:function(t){return a&&(a.valid=!1),(a=o(t)).valid=!0,a},extent:function(t){return arguments.length?(o=rn(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),a&&(a.valid=!1,a=null),s):[[e,n],[i,r]]}};return s.extent([[0,0],[960,500]])},(k.geo.conicEqualArea=function(){return an(on)}).raw=on,k.geo.albers=function(){return k.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},k.geo.albersUsa=function(){function r(t){var e=t[0],t=t[1];return n=null,a(e,t),n||(o(e,t),n)||s(e,t),n}var n,a,o,s,u=k.geo.albers(),c=k.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=k.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){n=[t,e]}};return r.invert=function(t){var e=u.scale(),n=u.translate(),i=(t[0]-n[0])/e,n=(t[1]-n[1])/e;return(.12<=n&&n<.234&&-.425<=i&&i<-.214?c:.166<=n&&n<.234&&-.214<=i&&i<-.115?l:u).invert(t)},r.stream=function(t){var n=u.stream(t),i=c.stream(t),r=l.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),r.point(t,e)},sphere:function(){n.sphere(),i.sphere(),r.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),r.polygonEnd()}}},r.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),l.precision(t),r):u.precision()},r.scale=function(t){return arguments.length?(u.scale(t),c.scale(.35*t),l.scale(t),r.translate(u.translate())):u.scale()},r.translate=function(t){var e,n,i;return arguments.length?(e=u.scale(),n=+t[0],i=+t[1],a=u.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(h).point,o=c.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+O,i+.12*e+O],[n-.214*e-O,i+.234*e-O]]).stream(h).point,s=l.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+O,i+.166*e+O],[n-.115*e-O,i+.234*e-O]]).stream(h).point,r):u.translate()},r.scale(1070)};var Ho,Yo,Bo,jo,Uo,qo,Wo={point:u,lineStart:u,lineEnd:u,polygonStart:function(){Yo=0,Wo.lineStart=sn},polygonEnd:function(){Wo.lineStart=Wo.lineEnd=Wo.point=u,Ho+=G(Yo/2)}},Qo={point:function(t,e){t<Bo&&(Bo=t),Uo<t&&(Uo=t),e<jo&&(jo=e),qo<e&&(qo=e)},lineStart:u,lineEnd:u,polygonStart:u,polygonEnd:u},v={point:ln,lineStart:hn,lineEnd:dn,polygonStart:function(){v.lineStart=fn},polygonEnd:function(){v.point=ln,v.lineStart=hn,v.lineEnd=dn}};k.geo.path=function(){function e(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),s&&s.valid||(s=a(o)),k.geo.stream(t,s)),o.result()}function i(){return s=null,e}var r,n,a,o,s,u=4.5;return e.area=function(t){return Ho=0,k.geo.stream(t,a(Wo)),Ho},e.centroid=function(t){return Vo=Go=ko=Ro=Oo=Io=Do=No=Fo=0,k.geo.stream(t,a(v)),Fo?[Do/Fo,No/Fo]:Io?[Ro/Io,Oo/Io]:ko?[Vo/ko,Go/ko]:[NaN,NaN]},e.bounds=function(t){return Uo=qo=-(Bo=jo=1/0),k.geo.stream(t,a(Qo)),[[Bo,jo],[Uo,qo]]},e.projection=function(t){return arguments.length?(a=(r=t)?t.stream||(n=t,e=pn(function(t,e){return n([t*C,e*C])}),function(t){return vn(e(t))}):E,i()):r;var n,e},e.context=function(t){return arguments.length?(o=null==(n=t)?new un:new gn(t),"function"!=typeof u&&o.pointRadius(u),i()):n},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(o.pointRadius(+t),+t),e):u},e.projection(k.geo.albersUsa()).context(null)},k.geo.transform=function(i){return{stream:function(t){var e,n=new xn(t);for(e in i)n[e]=i[e];return n}}},xn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},k.geo.projection=yn,k.geo.projectionMutator=mn,(k.geo.equirectangular=function(){return yn(wn)}).raw=wn.invert=wn,k.geo.rotation=function(e){function t(t){return(t=e(t[0]*P,t[1]*P))[0]*=C,t[1]*=C,t}return e=bn(e[0]%360*P,e[1]*P,2<e.length?e[2]*P:0),t.invert=function(t){return(t=e.invert(t[0]*P,t[1]*P))[0]*=C,t[1]*=C,t},t},Sn.invert=wn,k.geo.circle=function(){function e(){var t="function"==typeof a?a.apply(this,arguments):a,n=bn(-t[0]*P,-t[1]*P,0).invert,i=[];return r(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=C,t[1]*=C}}),{type:"Polygon",coordinates:[i]}}var n,r,a=[0,0],i=6;return e.origin=function(t){return arguments.length?(a=t,e):a},e.angle=function(t){return arguments.length?(r=Cn((n=+t)*P,i*P),e):n},e.precision=function(t){return arguments.length?(r=Cn(n*P,(i=+t)*P),e):i},e.angle(90)},k.geo.distance=function(t,e){var n=(e[0]-t[0])*P,t=t[1]*P,e=e[1]*P,i=Math.sin(n),n=Math.cos(n),r=Math.sin(t),t=Math.cos(t),a=Math.sin(e),e=Math.cos(e);return Math.atan2(Math.sqrt((i=e*i)*i+(i=t*a-r*e*n)*i),r*a+t*e*n)},k.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return k.range(Math.ceil(a/x)*x,r,x).map(d).concat(k.range(Math.ceil(c/_)*_,u,_).map(f)).concat(k.range(Math.ceil(i/g)*g,n,g).filter(function(t){return G(t%x)>O}).map(l)).concat(k.range(Math.ceil(s/p)*p,o,p).filter(function(t){return G(t%_)>O}).map(h))}var n,i,r,a,o,s,u,c,l,h,d,f,g=10,p=g,x=90,_=360,y=2.5;return e.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(u).slice(1),d(r).reverse().slice(1),f(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],c=+t[0][1],u=+t[1][1],r<a&&(t=a,a=r,r=t),u<c&&(t=c,c=u,u=t),e.precision(y)):[[a,c],[r,u]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],n<i&&(t=i,i=n,n=t),o<s&&(t=s,s=o,o=t),e.precision(y)):[[i,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(x=+t[0],_=+t[1],e):[x,_]},e.minorStep=function(t){return arguments.length?(g=+t[0],p=+t[1],e):[g,p]},e.precision=function(t){return arguments.length?(y=+t,l=Mn(s,o,90),h=En(i,n,y),d=Mn(c,u,90),f=En(a,r,y),e):y},e.majorExtent([[-180,-90+O],[180,90-O]]).minorExtent([[-180,-80-O],[180,80+O]])},k.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),i||a.apply(this,arguments)]}}var n,i,r=Vn,a=Gn;return e.distance=function(){return k.geo.distance(n||r.apply(this,arguments),i||a.apply(this,arguments))},e.source=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,e):r},e.target=function(t){return arguments.length?(i="function"==typeof(a=t)?null:t,e):a},e.precision=function(){return arguments.length?e:0},e},k.geo.interpolate=function(t,e){return n=t[0]*P,i=t[1]*P,t=e[0]*P,e=e[1]*P,r=Math.cos(i),a=Math.sin(i),o=Math.cos(e),s=Math.sin(e),u=r*Math.cos(n),c=r*Math.sin(n),l=o*Math.cos(t),h=o*Math.sin(t),d=2*Math.asin(Math.sqrt(kt(e-i)+r*o*kt(t-n))),f=1/Math.sin(d),(e=d?function(t){var e=Math.sin(t*=d)*f,t=Math.sin(d-t)*f,n=t*u+e*l,i=t*c+e*h,t=t*a+e*s;return[Math.atan2(i,n)*C,Math.atan2(t,Math.sqrt(n*n+i*i))*C]}:function(){return[n*C,i*C]}).distance=d,e;var n,i,r,a,o,s,u,c,l,h,d,f},k.geo.length=function(t){return Zo=0,k.geo.stream(t,Ko),Zo};var Zo,Ko={sphere:u,point:u,lineStart:function(){function n(t,e){var n=Math.sin(e*=P),e=Math.cos(e),i=G((t*=P)-a),r=Math.cos(i);Zo+=Math.atan2(Math.sqrt((i=e*Math.sin(i))*i+(i=s*n-o*e*r)*i),o*n+s*e*r),a=t,o=n,s=e}var a,o,s;Ko.point=function(t,e){a=t*P,o=Math.sin(e*=P),s=Math.cos(e),Ko.point=n},Ko.lineEnd=function(){Ko.point=Ko.lineEnd=u}},lineEnd:u,polygonStart:u,polygonEnd:u},$o=kn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)}),Jo=((k.geo.azimuthalEqualArea=function(){return yn($o)}).raw=$o,kn(function(t){t=Math.acos(t);return t&&t/Math.sin(t)},E)),ts=((k.geo.azimuthalEquidistant=function(){return yn(Jo)}).raw=Jo,(k.geo.conicConformal=function(){return an(Rn)}).raw=Rn,(k.geo.conicEquidistant=function(){return an(On)}).raw=On,kn(function(t){return 1/t},Math.atan)),es=((k.geo.gnomonic=function(){return yn(ts)}).raw=ts,In.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-D]},(k.geo.mercator=function(){return Dn(In)}).raw=In,kn(function(){return 1},Math.asin)),ns=((k.geo.orthographic=function(){return yn(es)}).raw=es,kn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)})),is=((k.geo.stereographic=function(){return yn(ns)}).raw=ns,Nn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-D]},(k.geo.transverseMercator=function(){var t=Dn(Nn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=Nn,k.geom={},k.geom.hull=function(t){function e(t){if(t.length<3)return[];for(var e=V(d),n=V(f),i=t.length,r=[],a=[],o=0;o<i;o++)r.push([+e.call(this,t[o],o),+n.call(this,t[o],o),o]);for(r.sort(Hn),o=0;o<i;o++)a.push([r[o][0],-r[o][1]]);var s=Xn(r),u=Xn(a),c=u[0]===s[0],l=u[u.length-1]===s[s.length-1],h=[];for(o=s.length-1;0<=o;--o)h.push(t[r[s[o]][2]]);for(o=+c;o<u.length-l;++o)h.push(t[r[u[o]][2]]);return h}var d=Fn,f=zn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(d=t,e):d},e.y=function(t){return arguments.length?(f=t,e):f},e)},k.geom.polygon=function(t){return La(t,is),t},k.geom.polygon.prototype=[]);is.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},is.centroid=function(t){var e,n,i=-1,r=this.length,a=0,o=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},is.clip=function(t){for(var e,n,i,r,a,o,s=jn(t),u=-1,c=this.length-jn(this),l=this[c-1];++u<c;){for(e=t.slice(),t.length=0,r=this[u],a=e[(i=e.length-s)-1],n=-1;++n<i;)Yn(o=e[n],l,r)?(Yn(a,l,r)||t.push(Bn(a,o,l,r)),t.push(o)):Yn(a,l,r)&&t.push(Bn(a,o,l,r)),a=o;s&&t.push(t[0]),l=r}return t};function rs(){return E}var as,os,ss,us,cs,ls=[],hs=[],ds=(Kn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Jn),e.length},si.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ui.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=di(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(li(this,n),n=(t=n).U),n.C=!1,i.C=!0,hi(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(hi(this,n),n=(t=n).U),n.C=!1,i.C=!0,li(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i=t.U,r=t.L,a=t.R,o=r?a?di(a):r:a;if(i?i.L===t?i.L=o:i.R=o:this._=o,r&&a?(n=o.C,o.C=t.C,((o.L=r).U=o)!==a?(i=o.U,o.U=t.U,t=o.R,i.L=t,(o.R=a).U=o):(o.U=i,t=(i=o).R)):(n=t.C,t=o),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,li(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,hi(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,li(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,hi(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,li(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,hi(this,i),t=this._;break}}while(e.C=!0,i=(t=i).U,!t.C);t&&(t.C=!1)}}},k.geom.voronoi=function(t){function e(i){var r=new Array(i.length),a=c[0][0],o=c[0][1],s=c[1][0],u=c[1][1];return fi(n(i),c).cells.forEach(function(t,e){var n=t.edges,t=t.site;(r[e]=n.length?n.map(function(t){t=t.start();return[t.x,t.y]}):t.x>=a&&t.x<=s&&t.y>=o&&t.y<=u?[[a,u],[s,u],[s,o],[a,o]]:[]).point=i[e]}),r}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/O)*O,y:Math.round(o(t,e)/O)*O,i:e}})}var i=Fn,r=zn,a=i,o=r,c=ds;return t?e(t):(e.links=function(e){return fi(n(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},e.triangles=function(l){var h=[];return fi(n(l)).cells.forEach(function(t,e){for(var n,i,r=t.site,a=t.edges.sort(Jn),o=-1,s=a.length,u=a[s-1].edge,c=u.l===r?u.r:u.l;++o<s;)n=c,c=(u=a[o].edge).l===r?u.r:u.l,e<n.i&&e<c.i&&(i=c,(r.x-i.x)*(n.y-r.y)-(r.x-n.x)*(i.y-r.y)<0)&&h.push([l[e],l[n.i],l[c.i]])}),h},e.x=function(t){return arguments.length?(a=V(i=t),e):i},e.y=function(t){return arguments.length?(o=V(r=t),e):r},e.clipExtent=function(t){return arguments.length?(c=null==t?ds:t,e):c===ds?null:c},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):c===ds?null:c&&c[1]},e)},[[-1e6,-1e6],[1e6,1e6]]),fs=(k.geom.delaunay=function(t){return k.geom.voronoi().triangles(t)},k.geom.quadtree=function(t,y,m,v,S){function e(t){function f(t,e,n,i,r,a,o,s){var u,c,l;isNaN(n)||isNaN(i)||(t.leaf?(u=t.x,c=t.y,null!=u?(G(u-n)+G(c-i)<.01||(l=t.point,t.x=t.y=t.point=null,h(t,l,u,c,r,a,o,s)),h(t,e,n,i,r,a,o,s)):(t.x=n,t.y=i,t.point=e)):h(t,e,n,i,r,a,o,s))}function h(t,e,n,i,r,a,o,s){var u=.5*(r+o),c=.5*(a+s),l=u<=n,h=c<=i,d=h<<1|l;t.leaf=!1,l?r=u:o=u,h?a=c:s=c,f(t=t.nodes[d]||(t.nodes[d]=_i()),e,n,i,r,a,o,s)}var e,n,i,r,a,o,s,u,c,l=V(A),d=V(T);if(null!=y)o=y,s=m,u=v,c=S;else if(u=c=-(o=s=1/0),n=[],i=[],a=t.length,b)for(r=0;r<a;++r)(e=t[r]).x<o&&(o=e.x),e.y<s&&(s=e.y),u<e.x&&(u=e.x),c<e.y&&(c=e.y),n.push(e.x),i.push(e.y);else for(r=0;r<a;++r){var g=+l(e=t[r],r),p=+d(e,r);g<o&&(o=g),p<s&&(s=p),u<g&&(u=g),c<p&&(c=p),n.push(g),i.push(p)}var x=u-o,_=c-s,w=(_<x?c=s+x:u=o+_,_i());if(w.add=function(t){f(w,t,+l(t,++r),+d(t,r),o,s,u,c)},w.visit=function(t){!function t(e,n,i,r,a,o){var s,u;e(n,i,r,a,o)||(s=.5*(i+a),u=.5*(r+o),(n=n.nodes)[0]&&t(e,n[0],i,r,s,u),n[1]&&t(e,n[1],s,r,a,u),n[2]&&t(e,n[2],i,u,s,o),n[3]&&t(e,n[3],s,u,a,o))}(t,w,o,s,u,c)},w.find=function(t){return f=t[0],g=t[1],v=1/0,function t(e,n,i,r,a){if(!(_<n||y<i||r<p||a<x)){var o,s;(o=e.point)&&(s=(s=f-e.x)*s+(s=g-e.y)*s)<v&&(s=Math.sqrt(v=s),p=f-s,x=g-s,_=f+s,y=g+s,m=o);for(var u=e.nodes,c=.5*(n+r),l=.5*(i+a),h=(l<=g)<<1|c<=f,d=h+4;h<d;++h)if(e=u[3&h])switch(3&h){case 0:t(e,n,i,c,l);break;case 1:t(e,c,i,r,l);break;case 2:t(e,n,l,c,a);break;case 3:t(e,c,l,r,a)}}}(w,p=o,x=s,_=u,y=c),m;var f,g,p,x,_,y,m,v},r=-1,null==y){for(;++r<a;)f(w,t[r],n[r],i[r],o,s,u,c);--r}else t.forEach(w.add);return n=i=t=e=null,w}var b,A=Fn,T=zn;return(b=arguments.length)?(A=pi,T=xi,3===b&&(S=m,v=y,m=y=0),e(t)):(e.x=function(t){return arguments.length?(A=t,e):A},e.y=function(t){return arguments.length?(T=t,e):T},e.extent=function(t){return arguments.length?(null==t?y=m=v=S=null:(y=+t[0][0],m=+t[0][1],v=+t[1][0],S=+t[1][1]),e):null==y?null:[[y,m],[v,S]]},e.size=function(t){return arguments.length?(null==t?y=m=v=S=null:(y=m=0,v=+t[0],S=+t[1]),e):null==y?null:[v-y,S-m]},e)},k.interpolateRgb=yi,k.interpolateObject=mi,k.interpolateNumber=vi,k.interpolateString=wi,/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g),gs=new RegExp(fs.source,"g"),ps=(k.interpolate=Si,k.interpolators=[function(t,e){var n=typeof e;return("string"==n?Qa.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?yi:wi:e instanceof Rt?yi:Array.isArray(e)?bi:"object"==n&&isNaN(e)?mi:vi)(t,e)}],k.interpolateArray=bi,k.map({linear:rs,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return Pi},cubic:function(){return Ci},sin:function(){return Mi},exp:function(){return Ei},circle:function(){return Vi},elastic:function(e,n){var i;return arguments.length<2&&(n=.45),i=arguments.length?n/T*Math.asin(1/e):(e=1,n/4),function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*T/n)}},back:function(e){return e=e||1.70158,function(t){return t*t*((e+1)*t-e)}},bounce:function(){return Gi}})),xs=k.map({in:E,out:Ai,"in-out":Ti,"out-in":function(t){return Ti(Ai(t))}}),_s=(k.ease=function(t){var e,n=t.indexOf("-"),i=0<=n?t.slice(0,n):t,t=0<=n?t.slice(n+1):"in",i=ps.get(i)||rs,t=xs.get(t)||E;return e=t(i.apply(null,va.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},k.interpolateHcl=function(t,e){t=k.hcl(t),e=k.hcl(e);var n=t.h,i=t.c,r=t.l,a=e.h-n,o=e.c-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.c:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return Dt(n+a*t,i+o*t,r+s*t)+""}},k.interpolateHsl=function(t,e){t=k.hsl(t),e=k.hsl(e);var n=t.h,i=t.s,r=t.l,a=e.h-n,o=e.s-i,s=e.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?e.s:i),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):180<a?a-=360:a<-180&&(a+=360),function(t){return It(n+a*t,i+o*t,r+s*t)+""}},k.interpolateLab=function(t,e){t=k.lab(t),e=k.lab(e);var n=t.l,i=t.a,r=t.b,a=e.l-n,o=e.a-i,s=e.b-r;return function(t){return Nt(n+a*t,i+o*t,r+s*t)+""}},k.interpolateRound=ki,k.transform=function(t){var n=R.createElementNS(k.ns.prefix.svg,"g");return(k.transform=function(t){var e;return null!=t&&(n.setAttribute("transform",t),e=n.transform.baseVal.consolidate()),new Ri(e?e.matrix:_s)})(t)},Ri.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"},{a:1,b:0,c:0,d:1,e:0,f:0}),ys=(k.interpolateTransform=Ni,k.layout={},k.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Xi(t[n]));return e}},k.layout.chord=function(){function t(){var t,e,n,i,r,a={},o=[],s=k.range(v),u=[];for(_=[],y=[],t=0,i=-1;++i<v;){for(e=0,r=-1;++r<v;)e+=m[i][r];o.push(e),u.push(k.range(v)),t+=e}for(w&&s.sort(function(t,e){return w(o[t],o[e])}),S&&u.forEach(function(t,n){t.sort(function(t,e){return S(m[n][t],m[n][e])})}),t=(T-A*v)/t,e=0,i=-1;++i<v;){for(n=e,r=-1;++r<v;){var c=s[i],l=u[c][r],h=m[c][l],d=e,f=e+=h*t;a[c+"-"+l]={index:c,subindex:l,startAngle:d,endAngle:f,value:h}}y[c]={index:c,startAngle:n,endAngle:e,value:o[c]},e+=A}for(i=-1;++i<v;)for(r=i-1;++r<v;){var g=a[i+"-"+r],p=a[r+"-"+i];(g.value||p.value)&&_.push(g.value<p.value?{source:p,target:g}:{source:g,target:p})}b&&x()}function x(){_.sort(function(t,e){return b((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var _,y,m,v,w,S,b,e={},A=0;return e.matrix=function(t){return arguments.length?(v=(m=t)&&m.length,_=y=null,e):m},e.padding=function(t){return arguments.length?(A=t,_=y=null,e):A},e.sortGroups=function(t){return arguments.length?(w=t,_=y=null,e):w},e.sortSubgroups=function(t){return arguments.length?(S=t,_=null,e):S},e.sortChords=function(t){return arguments.length?(b=t,_&&x(),e):b},e.chords=function(){return _||t(),_},e.groups=function(){return y||t(),y},e},k.layout.force=function(){function t(t){t.px=k.event.x,t.py=k.event.y,r.resume()}var h,e,d,f,g,p,r={},x=k.dispatch("start","tick","end"),_=[1,1],y=.9,a=ys,o=ms,m=-30,v=vs,w=.1,S=.64,b=[],A=[];return r.tick=function(){if((d*=.99)<.005)return h=null,x.end({type:"end",alpha:d=0}),!0;for(var t,e,n,i,r,a,o,s,u=b.length,c=A.length,l=0;l<c;++l)n=(e=A[l]).source,(r=(o=(i=e.target).x-n.x)*o+(s=i.y-n.y)*s)&&(s*=r=d*g[l]*((r=Math.sqrt(r))-f[l])/r,i.x-=(o*=r)*(a=n.weight+i.weight?n.weight/(n.weight+i.weight):.5),i.y-=s*a,n.x+=o*(a=1-a),n.y+=s*a);if((a=d*w)&&(o=_[0]/2,s=_[1]/2,l=-1,a))for(;++l<u;)(e=b[l]).x+=(o-e.x)*a,e.y+=(s-e.y)*a;if(m)for(function t(e,n,i){var r,a=0,o=0;if(e.charge=0,!e.leaf)for(var s,u=e.nodes,c=u.length,l=-1;++l<c;)null!=(s=u[l])&&(t(s,n,i),e.charge+=s.charge,a+=s.charge*s.cx,o+=s.charge*s.cy);e.point&&(e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5),r=n*i[e.point.index],e.charge+=e.pointCharge=r,a+=r*e.point.x,o+=r*e.point.y),e.cx=a/e.charge,e.cy=o/e.charge}(t=k.geom.quadtree(b),d,p),l=-1;++l<u;)(e=b[l]).fixed||t.visit((s=>function(t,e,n,i){if(t.point!==s){var r,a=t.cx-s.x,o=t.cy-s.y,i=i-e,e=a*a+o*o;if(i*i/S<e)return e<v&&(r=t.charge/e,s.px-=a*r,s.py-=o*r),!0;t.point&&e&&e<v&&(r=t.pointCharge/e,s.px-=a*r,s.py-=o*r)}return!t.charge})(e));for(l=-1;++l<u;)(e=b[l]).fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*y,e.y-=(e.py-(e.py=e.y))*y);x.tick({type:"tick",alpha:d})},r.nodes=function(t){return arguments.length?(b=t,r):b},r.links=function(t){return arguments.length?(A=t,r):A},r.size=function(t){return arguments.length?(_=t,r):_},r.linkDistance=function(t){return arguments.length?(a="function"==typeof t?t:+t,r):a},r.distance=r.linkDistance,r.linkStrength=function(t){return arguments.length?(o="function"==typeof t?t:+t,r):o},r.friction=function(t){return arguments.length?(y=+t,r):y},r.charge=function(t){return arguments.length?(m="function"==typeof t?t:+t,r):m},r.chargeDistance=function(t){return arguments.length?(v=t*t,r):Math.sqrt(v)},r.gravity=function(t){return arguments.length?(w=+t,r):w},r.theta=function(t){return arguments.length?(S=t*t,r):Math.sqrt(S)},r.alpha=function(t){return arguments.length?(t=+t,d?0<t?d=t:(h.c=null,h.t=NaN,h=null,x.end({type:"end",alpha:d=0})):0<t&&(x.start({type:"start",alpha:d=t}),h=Jt(r.tick)),r):d},r.start=function(){function t(t,e){if(!s){for(s=new Array(u),a=0;a<u;++a)s[a]=[];for(a=0;a<c;++a){var n=A[a];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var i,r=s[l],a=-1,o=r.length;++a<o;)if(!isNaN(i=r[a][t]))return i;return Math.random()*e}for(var s,e,u=b.length,c=A.length,n=_[0],i=_[1],l=0;l<u;++l)(e=b[l]).index=l,e.weight=0;for(l=0;l<c;++l)"number"==typeof(e=A[l]).source&&(e.source=b[e.source]),"number"==typeof e.target&&(e.target=b[e.target]),++e.source.weight,++e.target.weight;for(l=0;l<u;++l)e=b[l],isNaN(e.x)&&(e.x=t("x",n)),isNaN(e.y)&&(e.y=t("y",i)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(f=[],"function"==typeof a)for(l=0;l<c;++l)f[l]=+a.call(this,A[l],l);else for(l=0;l<c;++l)f[l]=a;if(g=[],"function"==typeof o)for(l=0;l<c;++l)g[l]=+o.call(this,A[l],l);else for(l=0;l<c;++l)g[l]=o;if(p=[],"function"==typeof m)for(l=0;l<u;++l)p[l]=+m.call(this,b[l],l);else for(l=0;l<u;++l)p[l]=m;return r.resume()},r.resume=function(){return r.alpha(.1)},r.stop=function(){return r.alpha(0)},r.drag=function(){return e=e||k.behavior.drag().origin(E).on("dragstart.force",Yi).on("drag.force",t).on("dragend.force",Bi),arguments.length?void this.on("mouseover.force",ji).on("mouseout.force",Ui).call(e):e},k.rebind(r,x,"on")},20),ms=1,vs=1/0,ws=(k.layout.hierarchy=function(){function s(t){var e,n,i,r,a=[t],o=[];for(t.depth=0;null!=(e=a.pop());)if(o.push(e),(i=c.call(s,e,e.depth))&&(n=i.length)){for(;0<=--n;)a.push(r=i[n]),r.parent=e,r.depth=e.depth+1;l&&(e.value=0),e.children=i}else l&&(e.value=+l.call(s,e,e.depth)||0),delete e.children;return x(t,function(t){var e;u&&(e=t.children)&&e.sort(u),l&&(e=t.parent)&&(e.value+=t.value)}),o}var u=Ki,c=Qi,l=Zi;return s.sort=function(t){return arguments.length?(u=t,s):u},s.children=function(t){return arguments.length?(c=t,s):c},s.value=function(t){return arguments.length?(l=t,s):l},s.revalue=function(t){return l&&(Wi(t,function(t){t.children&&(t.value=0)}),x(t,function(t){var e;t.children||(t.value=+l.call(s,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},s},k.layout.partition=function(){function e(t,e){t=n.call(this,t,e);return function t(e,n,i,r){var a=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,a&&(o=a.length)){var o,s,u=-1;for(i=e.value?i/e.value:0;++u<o;)t(s=a[u],n,s=s.value*i,r),n+=s}}(t[0],0,i[0],i[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;++a<r;)i=Math.max(i,t(n[a]));return 1+i}(t[0])),t}var n=k.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},qi(e,n)},k.layout.pie=function(){function h(n){var e,t=n.length,i=n.map(function(t,e){return+d.call(h,t,e)}),r=+("function"==typeof g?g.apply(this,arguments):g),a=("function"==typeof p?p.apply(this,arguments):p)-r,o=Math.min(Math.abs(a)/t,+("function"==typeof x?x.apply(this,arguments):x)),s=o*(a<0?-1:1),u=k.sum(i),c=u?(a-t*s)/u:0,a=k.range(t),l=[];return null!=f&&a.sort(f===ws?function(t,e){return i[e]-i[t]}:function(t,e){return f(n[t],n[e])}),a.forEach(function(t){l[t]={data:n[t],value:e=i[t],startAngle:r,endAngle:r+=e*c+s,padAngle:o}}),l}var d=Number,f=ws,g=0,p=T,x=0;return h.value=function(t){return arguments.length?(d=t,h):d},h.sort=function(t){return arguments.length?(f=t,h):f},h.startAngle=function(t){return arguments.length?(g=t,h):g},h.endAngle=function(t){return arguments.length?(p=t,h):p},h.padAngle=function(t){return arguments.length?(x=t,h):x},h},{}),Ss=(k.layout.stack=function(){function h(t,e){if(n=t.length)for(var n,i,r,a=(s=t.map(function(t,e){return d.call(h,t,e)})).map(function(t){return t.map(function(t,e){return[x.call(h,t,e),_.call(h,t,e)]})}),o=f.call(h,a,e),s=k.permute(s,o),a=k.permute(a,o),u=g.call(h,a,e),c=s[0].length,l=0;l<c;++l)for(p.call(h,s[0][l],r=u[l],a[0][l][1]),i=1;i<n;++i)p.call(h,s[i][l],r+=a[i-1][l][1],a[i][l][1]);return t}var d=E,f=nr,g=ir,p=er,x=Ji,_=tr;return h.values=function(t){return arguments.length?(d=t,h):d},h.order=function(t){return arguments.length?(f="function"==typeof t?t:Ss.get(t)||nr,h):f},h.offset=function(t){return arguments.length?(g="function"==typeof t?t:bs.get(t)||ir,h):g},h.x=function(t){return arguments.length?(x=t,h):x},h.y=function(t){return arguments.length?(_=t,h):_},h.out=function(t){return arguments.length?(p=t,h):p},h},k.map({"inside-out":function(t){for(var e,n=t.length,i=t.map(rr),r=t.map(ar),a=k.range(n).sort(function(t,e){return i[t]-i[e]}),o=0,s=0,u=[],c=[],l=0;l<n;++l)e=a[l],(o<s?(o+=r[e],u):(s+=r[e],c)).push(e);return c.reverse().concat(u)},reverse:function(t){return k.range(t.length).reverse()},default:nr})),bs=k.map({silhouette:function(t){for(var e,n,i=t.length,r=t[0].length,a=[],o=0,s=[],u=0;u<r;++u){for(n=e=0;e<i;e++)n+=t[e][u][1];o<n&&(o=n),a.push(n)}for(u=0;u<r;++u)s[u]=(o-a[u])/2;return s},wiggle:function(t){var e,n,i,r,a,o,s,u,c,l=t.length,h=t[0],d=h.length,f=[];for(f[0]=u=c=0,n=1;n<d;++n){for(r=e=0;e<l;++e)r+=t[e][n][1];for(s=h[n][a=e=0]-h[n-1][0];e<l;++e){for(i=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)o+=(t[i][n][1]-t[i][n-1][1])/s;a+=o*t[e][n][1]}f[n]=u-=r?a/r*s:0,u<c&&(c=u)}for(n=0;n<d;++n)f[n]-=c;return f},expand:function(t){for(var e,n,i=t.length,r=t[0].length,a=1/i,o=[],s=0;s<r;++s){for(n=e=0;e<i;e++)n+=t[e][s][1];if(n)for(e=0;e<i;e++)t[e][s][1]/=n;else for(e=0;e<i;e++)t[e][s][1]=a}for(s=0;s<r;++s)o[s]=0;return o},zero:ir}),As=(k.layout.histogram=function(){function n(t,e){for(var n,i,r=[],a=t.map(d,this),o=f.call(this,a,e),s=g.call(this,o,a,e),e=-1,u=a.length,c=s.length-1,l=h?1:1/u;++e<c;)(n=r[e]=[]).dx=s[e+1]-(n.x=s[e]),n.y=0;if(0<c)for(e=-1;++e<u;)(i=a[e])>=o[0]&&i<=o[1]&&((n=r[k.bisect(s,i,1,c)-1]).y+=l,n.push(t[e]));return r}var h=!0,d=Number,f=cr,g=sr;return n.value=function(t){return arguments.length?(d=t,n):d},n.range=function(t){return arguments.length?(f=V(t),n):f},n.bins=function(e){return arguments.length?(g="number"==typeof e?function(t){return ur(t,e)}:V(e),n):g},n.frequency=function(t){return arguments.length?(h=!!t,n):h},n},k.layout.pack=function(){function e(t,e){var n,t=s.call(this,t,e),e=t[0],i=c[0],r=c[1],a=null==o?Math.sqrt:"function"==typeof o?o:function(){return o};return e.x=e.y=0,x(e,function(t){t.r=+a(t.value)}),x(e,gr),u&&(n=u*(o?1:Math.max(2*e.r/i,2*e.r/r))/2,x(e,function(t){t.r+=n}),x(e,gr),x(e,function(t){t.r-=n})),function t(e,n,i,r){var a=e.children;if(e.x=n+=r*e.x,e.y=i+=r*e.y,e.r*=r,a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,i,r)}(e,i/2,r/2,o?1:1/Math.max(2*e.r/i,2*e.r/r)),t}var o,s=k.layout.hierarchy().sort(lr),u=0,c=[1,1];return e.size=function(t){return arguments.length?(c=t,e):c},e.radius=function(t){return arguments.length?(o=null==t||"function"==typeof t?t:+t,e):o},e.padding=function(t){return arguments.length?(u=+t,e):u},qi(e,s)},k.layout.tree=function(){function e(t,e){var n,i,r,a,o,s,t=d.call(this,t,e),e=t[0],u=(t=>{for(var e,n=[t={A:null,children:[t]}];null!=(e=n.pop());)for(var i,r=e.children,a=0,o=r.length;a<o;++a)n.push((r[a]=i={_:r[a],parent:e,children:(i=r[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return t.children[0]})(e);return x(u,c),u.parent.m=-u.z,Wi(u,l),p?Wi(e,h):(Wi(r=i=n=e,function(t){t.x<n.x&&(n=t),t.x>i.x&&(i=t),t.depth>r.depth&&(r=t)}),a=f(n,i)/2-n.x,o=g[0]/(i.x+f(i,n)/2+a),s=g[1]/(r.depth||1),Wi(e,function(t){t.x=(t.x+a)*o,t.y=t.depth*s})),t}function c(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){for(var r,a=0,o=0,s=t.children,u=s.length;0<=--u;)(r=s[u]).z+=a,r.m+=a,a+=r.s+(o+=r.c);e=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+f(t._,i._),t.m=t.z-e):t.z=e}else i&&(t.z=i.z+f(t._,i._));t.parent.A=((t,e,n)=>{if(e){for(var i,r=t,a=t,o=e,s=r.parent.children[0],u=r.m,c=a.m,l=o.m,h=s.m;o=vr(o),r=mr(r),o&&r;)s=mr(s),(a=vr(a)).a=t,0<(i=o.z+l-r.z-u+f(o._,r._))&&(((t,e,n)=>{var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n})(((t,e,n)=>t.a.parent===e.parent?t.a:n)(o,t,n),t,i),u+=i,c+=i),l+=o.m,u+=r.m,h+=s.m,c+=a.m;o&&!vr(a)&&(a.t=o,a.m+=l-c),r&&!mr(s)&&(s.t=r,s.m+=u-h,n=t)}return n})(t,i,t.parent.A||n[0])}function l(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function h(t){t.x*=g[0],t.y=t.depth*g[1]}var d=k.layout.hierarchy().sort(null).value(null),f=yr,g=[1,1],p=null;return e.separation=function(t){return arguments.length?(f=t,e):f},e.size=function(t){return arguments.length?(p=null==(g=t)?h:null,e):p?null:g},e.nodeSize=function(t){return arguments.length?(p=null==(g=t)?null:h,e):p?g:null},qi(e,d)},k.layout.cluster=function(){function e(t,e){var i,t=u.call(this,t,e),n=t[0],r=0,e=(x(n,function(t){var e,n=t.children;n&&n.length?(t.x=(e=n).reduce(function(t,e){return t+e.x},0)/e.length,t.y=1+k.max(n,function(t){return t.y})):(t.x=i?r+=c(t,i):0,t.y=0,i=t)}),function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(n)),a=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(n),o=e.x-c(e,a)/2,s=a.x+c(a,e)/2;return x(n,h?function(t){t.x=(t.x-n.x)*l[0],t.y=(n.y-t.y)*l[1]}:function(t){t.x=(t.x-o)/(s-o)*l[0],t.y=(1-(n.y?t.y/n.y:1))*l[1]}),t}var u=k.layout.hierarchy().sort(null).value(null),c=yr,l=[1,1],h=!1;return e.separation=function(t){return arguments.length?(c=t,e):c},e.size=function(t){return arguments.length?(h=null==(l=t),e):h?null:l},e.nodeSize=function(t){return arguments.length?(h=null!=(l=t),e):h?l:null},qi(e,u)},k.layout.treemap=function(){function c(t,e){for(var n,i,r=-1,a=t.length;++r<a;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function l(t){var e=t.children;if(e&&e.length){var n,i,r=f(t),a=[],o=e.slice(),s=1/0,u="slice"===g?r.dx:"dice"===g?r.dy:"slice-dice"===g?1&t.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(c(o,r.dx*r.dy/t.value),a.area=0;0<(i=o.length);)a.push(i=o[i-1]),a.area+=i.area,s="squarify"!==g||(n=((t,e)=>{for(var n,i=t.area,r=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),r<n)&&(r=n);return e*=e,(i*=i)?Math.max(e*r*p/i,i/(e*a*p)):1/0})(a,u))<=s?(o.pop(),n):(a.area-=a.pop().area,h(a,u,r,!1),u=Math.min(r.dx,r.dy),1/(a.length=a.area=0));a.length&&(h(a,u,r,!0),a.length=a.area=0),e.forEach(l)}}function o(t){var e=t.children;if(e&&e.length){var n,i=f(t),r=e.slice(),a=[];for(c(r,i.dx*i.dy/t.value),a.area=0;n=r.pop();)a.push(n),a.area+=n.area,null!=n.z&&(h(a,n.z?i.dx:i.dy,i,!r.length),a.length=a.area=0);e.forEach(o)}}function h(t,e,n,i){var r,a=-1,o=t.length,s=n.x,u=n.y,c=e?d(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<o;)(r=t[a]).x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?d(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<o;)(r=t[a]).x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?d(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function i(t){var t=n||r(t),e=t[0];return e.x=e.y=0,e.value?(e.dx=a[0],e.dy=a[1]):e.dx=e.dy=0,n&&r.revalue(e),c([e],e.dx*e.dy/e.value),(n?o:l)(e),u&&(n=t),t}var n,r=k.layout.hierarchy(),d=Math.round,a=[1,1],s=null,f=wr,u=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(a=t,i):a},i.padding=function(n){function t(t){return Sr(t,n)}var e;return arguments.length?(f=null==(s=n)?wr:"function"==(e=typeof n)?function(t){var e=n.call(i,t,t.depth);return null==e?wr(t):Sr(t,"number"==typeof e?[e,e,e,e]:e)}:("number"==e&&(n=[n,n,n,n]),t),i):s},i.round=function(t){return arguments.length?(d=t?Math.round:Number,i):d!=Number},i.sticky=function(t){return arguments.length?(u=t,n=null,i):u},i.ratio=function(t){return arguments.length?(p=t,i):p},i.mode=function(t){return arguments.length?(g=t+"",i):g},qi(i,r)},k.random={normal:function(i,r){var t=arguments.length;return t<2&&(r=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+r*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=k.random.normal.apply(k,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=k.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},k.scale={},{floor:E,ceil:E}),Ts=(k.scale.linear=function(){return function t(n,i,r,a){function e(){var t=2<Math.min(n.length,i.length)?Lr:Tr,e=a?zi:Fi;return s=t(n,i,e,r),u=t(i,n,e,Si),o}function o(t){return s(t)}var s,u;return o.invert=function(t){return u(t)},o.domain=function(t){return arguments.length?(n=t.map(Number),e()):n},o.range=function(t){return arguments.length?(i=t,e()):i},o.rangeRound=function(t){return o.range(t).interpolate(ki)},o.clamp=function(t){return arguments.length?(a=t,e()):a},o.interpolate=function(t){return arguments.length?(r=t,e()):r},o.ticks=function(t){return Gr(n,t)},o.tickFormat=function(t,e){return kr(n,t,e)},o.nice=function(t){return Er(n,t),e()},o.copy=function(){return t(n,i,r,a)},e()}([0,1],[0,1],Si,!1)},{s:1,g:1,p:1,r:1,e:1}),Ps=(k.scale.log=function(){return function t(e,u,c,l){function h(t){return(c?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(u)}function d(t){return c?Math.pow(u,t):-Math.pow(u,-t)}function r(t){return e(h(t))}return r.invert=function(t){return d(e.invert(t))},r.domain=function(t){return arguments.length?(c=0<=t[0],e.domain((l=t.map(Number)).map(h)),r):l},r.base=function(t){return arguments.length?(u=+t,e.domain(l.map(h)),r):u},r.nice=function(){var t=Pr(l.map(h),c?Math:Cs);return e.domain(t),l=t.map(d),r},r.ticks=function(){var t=br(l),e=[],n=t[0],i=t[1],r=Math.floor(h(n)),a=Math.ceil(h(i)),o=u%1?2:u;if(isFinite(a-r)){if(c){for(;r<a;r++)for(var s=1;s<o;s++)e.push(d(r)*s);e.push(d(r))}else for(e.push(d(r));r++<a;)for(s=o-1;0<s;s--)e.push(d(r)*s);for(r=0;e[r]<n;r++);for(a=e.length;e[a-1]>i;a--);e=e.slice(r,a)}return e},r.tickFormat=function(t,n){if(!arguments.length)return Ps;arguments.length<2?n=Ps:"function"!=typeof n&&(n=k.format(n));var i=Math.max(1,u*t/r.ticks().length);return function(t){var e=t/d(Math.round(h(t)));return e*u<u-.5&&(e*=u),e<=i?n(t):""}},r.copy=function(){return t(e.copy(),u,c,l)},Mr(r,e)}(k.scale.linear().domain([0,1]),10,!0,[1,10])},k.format(".0e")),Cs={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}},Ls=(k.scale.pow=function(){return function t(e,n,i){function r(t){return e(a(t))}var a=Or(n),o=Or(1/n);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(a)),r):i},r.ticks=function(t){return Gr(i,t)},r.tickFormat=function(t,e){return kr(i,t,e)},r.nice=function(t){return r.domain(Er(i,t))},r.exponent=function(t){return arguments.length?(a=Or(n=t),o=Or(1/n),e.domain(i.map(a)),r):n},r.copy=function(){return t(e.copy(),n,i)},Mr(r,e)}(k.scale.linear(),1,[0,1])},k.scale.sqrt=function(){return k.scale.pow().exponent(.5)},k.scale.ordinal=function(){return function t(a,o){function s(t){return c[((r.get(t)||("range"===o.t?r.set(t,a.push(t)):NaN))-1)%c.length]}function u(e,n){return k.range(a.length).map(function(t){return e+n*t})}var r,c,l;return s.domain=function(t){if(!arguments.length)return a;a=[],r=new B;for(var e,n=-1,i=t.length;++n<i;)r.has(e=t[n])||r.set(e,a.push(e));return s[o.t].apply(s,o.a)},s.range=function(t){return arguments.length?(c=t,l=0,o={t:"range",a:arguments},s):c},s.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],t=t[1],t=a.length<2?(n=(n+t)/2,0):(t-n)/(a.length-1+e);return c=u(n+t*e/2,t),l=0,o={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],t=t[1],i=a.length<2?(n=t=Math.round((n+t)/2),0):(t-n)/(a.length-1+e)|0;return c=u(n+Math.round(i*e/2+(t-n-(a.length-1+e)*i)/2),i),l=0,o={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[+i],t=(t[1-i]-r)/(a.length-e+2*n);return c=u(r+t*n,t),i&&c.reverse(),l=t*(1-e),o={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[+i],t=t[1-i],n=Math.floor((t-r)/(a.length-e+2*n));return c=u(r+Math.round((t-r-(a.length-e)*n)/2),n),i&&c.reverse(),l=Math.round(n*(1-e)),o={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return l},s.rangeExtent=function(){return br(o.a[0])},s.copy=function(){return t(a,o)},s.domain(a)}([],{t:"range",a:[[]]})},k.scale.category10=function(){return k.scale.ordinal().range(Ls)},k.scale.category20=function(){return k.scale.ordinal().range(Ms)},k.scale.category20b=function(){return k.scale.ordinal().range(Es)},k.scale.category20c=function(){return k.scale.ordinal().range(Vs)},[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Bt)),Ms=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Bt),Es=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Bt),Vs=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Bt),Gs=(k.scale.quantile=function(){return function t(n,i){function e(){var t=0,e=i.length;for(a=[];++t<e;)a[t-1]=k.quantile(n,t/e);return r}function r(t){return isNaN(t=+t)?void 0:i[k.bisect(a,t)]}var a;return r.domain=function(t){return arguments.length?(n=t.map(z).filter(X).sort(F),e()):n},r.range=function(t){return arguments.length?(i=t,e()):i},r.quantiles=function(){return a},r.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]},r.copy=function(){return t(n,i)},e()}([],[])},k.scale.quantize=function(){return function t(e,n,i){function r(t){return i[Math.max(0,Math.min(s,Math.floor(o*(t-e))))]}function a(){return o=i.length/(n-e),s=i.length-1,r}var o,s;return r.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],a()):[e,n]},r.range=function(t){return arguments.length?(i=t,a()):i},r.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/o+e,t+1/o]},r.copy=function(){return t(e,n,i)},a()}(0,1,[0,1])},k.scale.threshold=function(){return function t(e,n){function i(t){return t<=t?n[k.bisect(e,t)]:void 0}return i.domain=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=t,i):n},i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]},i.copy=function(){return t(e,n)},i}([.5],[0,1])},k.scale.identity=function(){return function t(n){function e(t){return+t}return(e.invert=e).domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n},e.ticks=function(t){return Gr(n,t)},e.tickFormat=function(t,e){return kr(n,t,e)},e.copy=function(){return t(n)},e}([0,1])},k.svg={},k.svg.arc=function(){function e(){var t,e,n,i,r,a,o,s,u,c,l,h,d,f,g,p,x,_=Math.max(0,+A.apply(this,arguments)),y=Math.max(0,+T.apply(this,arguments)),m=L.apply(this,arguments)-D,v=M.apply(this,arguments)-D,w=Math.abs(v-m),S=v<m?0:1;return y<_&&(t=y,y=_,_=t),za<=w?b(y,S)+(_?b(_,1-S):"")+"Z":(d=f=0,e=[],(x=(+E.apply(this,arguments)||0)/2)&&(g=C===Gs?Math.sqrt(_*_+y*y):+C.apply(this,arguments),S||(d*=-1),y&&(d=Vt(g/y*Math.sin(x))),_)&&(f=Vt(g/_*Math.sin(x))),y?(r=y*Math.cos(m+d),a=y*Math.sin(m+d),o=y*Math.cos(v-d),n=y*Math.sin(v-d),i=Math.abs(v-m-2*d)<=I?0:1,d&&Hr(r,a,o,n)===S^i&&(g=(m+v)/2,r=y*Math.cos(g),a=y*Math.sin(g),o=n=null)):r=a=0,_?(c=_*Math.cos(v-f),l=_*Math.sin(v-f),h=_*Math.cos(m+f),s=_*Math.sin(m+f),u=Math.abs(m-v+2*f)<=I?0:1,f&&Hr(c,l,h,s)===1-S^u&&(x=(m+v)/2,c=_*Math.cos(x),l=_*Math.sin(x),h=s=null)):c=l=0,O<w&&.001<(t=Math.min(Math.abs(y-_)/2,+P.apply(this,arguments)))?(d=_<y^S?0:1,f=g=t,w<I&&(v=r-(m=null==h?[c,l]:null==o?[r,a]:Bn([r,a],[h,s],[o,n],[c,l]))[0],x=a-m[1],w=o-m[0],p=n-m[1],v=1/Math.sin(Math.acos((v*w+x*p)/(Math.sqrt(v*v+x*x)*Math.sqrt(w*w+p*p)))/2),x=Math.sqrt(m[0]*m[0]+m[1]*m[1]),f=Math.min(t,(_-x)/(v-1)),g=Math.min(t,(y-x)/(1+v))),null!=o?(w=Yr(null==h?[c,l]:[h,s],[r,a],y,g,S),p=Yr([o,n],[c,l],y,g,S),t===g?e.push("M",w[0],"A",g,",",g," 0 0,",d," ",w[1],"A",y,",",y," 0 ",1-S^Hr(w[1][0],w[1][1],p[1][0],p[1][1]),",",S," ",p[1],"A",g,",",g," 0 0,",d," ",p[0]):e.push("M",w[0],"A",g,",",g," 0 1,",d," ",p[0])):e.push("M",r,",",a),null!=h?(m=Yr([r,a],[h,s],_,-f,S),x=Yr([c,l],null==o?[r,a]:[o,n],_,-f,S),t===f?e.push("L",x[0],"A",f,",",f," 0 0,",d," ",x[1],"A",_,",",_," 0 ",S^Hr(x[1][0],x[1][1],m[1][0],m[1][1]),",",1-S," ",m[1],"A",f,",",f," 0 0,",d," ",m[0]):e.push("L",x[0],"A",f,",",f," 0 0,",d," ",m[0])):e.push("L",c,",",l)):(e.push("M",r,",",a),null!=o&&e.push("A",y,",",y," 0 ",i,",",S," ",o,",",n),e.push("L",c,",",l),null!=h&&e.push("A",_,",",_," 0 ",u,",",1-S," ",h,",",s)),e.push("Z"),e.join(""))}function b(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var A=Dr,T=Nr,P=Ir,C=Gs,L=Fr,M=zr,E=Xr;return e.innerRadius=function(t){return arguments.length?(A=V(t),e):A},e.outerRadius=function(t){return arguments.length?(T=V(t),e):T},e.cornerRadius=function(t){return arguments.length?(P=V(t),e):P},e.padRadius=function(t){return arguments.length?(C=t==Gs?Gs:V(t),e):C},e.startAngle=function(t){return arguments.length?(L=V(t),e):L},e.endAngle=function(t){return arguments.length?(M=V(t),e):M},e.padAngle=function(t){return arguments.length?(E=V(t),e):E},e.centroid=function(){var t=(+A.apply(this,arguments)+ +T.apply(this,arguments))/2,e=(+L.apply(this,arguments)+ +M.apply(this,arguments))/2-D;return[Math.cos(e)*t,Math.sin(e)*t]},e},"auto"),ks=(k.svg.line=function(){return Br(E)},k.map({linear:A,"linear-closed":jr,step:function(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return 1<n&&r.push("H",i[0]),r.join("")},"step-before":Ur,"step-after":qr,basis:Zr,"basis-open":function(t){if(t.length<4)return A(t);for(var e,n=[],i=-1,r=t.length,a=[0],o=[0];++i<3;)e=t[i],a.push(e[0]),o.push(e[1]);for(n.push(c(Is,a)+","+c(Is,o)),--i;++i<r;)e=t[i],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Kr(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,i=-1,r=t.length,a=r+4,o=[],s=[];++i<4;)n=t[i%r],o.push(n[0]),s.push(n[1]);for(e=[c(Is,o),",",c(Is,s)],--i;++i<a;)n=t[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Kr(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,c=-1;++c<=n;)(i=t[c])[0]=e*i[0]+(1-e)*(a+(r=c/n)*s),i[1]=e*i[1]+(1-e)*(o+r*u);return Zr(t)},cardinal:function(t,e){return t.length<3?A(t):t[0]+Wr(t,Qr(t,e))},"cardinal-open":function(t,e){return t.length<4?A(t):t[1]+Wr(t.slice(1,-1),Qr(t,e))},"cardinal-closed":function(t,e){return t.length<3?jr(t):t[0]+Wr((t.push(t[0]),t),Qr([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?A(t):t[0]+Wr(t,Jr(t))}})),Rs=(ks.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)}),[0,2/3,1/3,0]),Os=[0,1/3,2/3,0],Is=[0,1/6,2/3,1/6],Ds=(k.svg.line.radial=function(){var t=Br(ta);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(Ur.reverse=qr).reverse=Ur,k.svg.area=function(){return ea(E)},k.svg.area.radial=function(){var t=ea(ta);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},k.svg.chord=function(){function e(t,e){var n,i=r(this,s,t,e),t=r(this,u,t,e);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(e=t,(n=i).a0==e.a0&&n.a1==e.a1?o(i.r,i.p1,i.r,i.p0):o(i.r,i.p1,t.r,t.p0)+a(t.r,t.p1,t.a1-t.a0)+o(t.r,t.p1,i.r,i.p0))+"Z"}function r(t,e,n,i){var e=e.call(t,n,i),n=c.call(t,e,i),r=l.call(t,e,i)-D,t=h.call(t,e,i)-D;return{r:n,a0:r,a1:t,p0:[n*Math.cos(r),n*Math.sin(r)],p1:[n*Math.cos(t),n*Math.sin(t)]}}function a(t,e,n){return"A"+t+","+t+" 0 "+ +(I<n)+",1 "+e}function o(t,e,n,i){return"Q 0,0 "+i}var s=Vn,u=Gn,c=na,l=Fr,h=zr;return e.radius=function(t){return arguments.length?(c=V(t),e):c},e.source=function(t){return arguments.length?(s=V(t),e):s},e.target=function(t){return arguments.length?(u=V(t),e):u},e.startAngle=function(t){return arguments.length?(l=V(t),e):l},e.endAngle=function(t){return arguments.length?(h=V(t),e):h},e},k.svg.diagonal=function(){function e(t,e){var n=i.call(this,t,e),t=r.call(this,t,e),e=(n.y+t.y)/2,n=[n,{x:n.x,y:e},{x:t.x,y:e},t];return"M"+(n=n.map(a))[0]+"C"+n[1]+" "+n[2]+" "+n[3]}var i=Vn,r=Gn,a=ia;return e.source=function(t){return arguments.length?(i=V(t),e):i},e.target=function(t){return arguments.length?(r=V(t),e):r},e.projection=function(t){return arguments.length?(a=t,e):a},e},k.svg.diagonal.radial=function(){var t=k.svg.diagonal(),e=ia,i=t.projection;return t.projection=function(t){return arguments.length?i((n=e=t,function(){var t=n.apply(this,arguments),e=t[0],t=t[1]-D;return[e*Math.cos(t),e*Math.sin(t)]})):e;var n},t},k.svg.symbol=function(){function e(t,e){return(Ds.get(n.call(this,t,e))||oa)(i.call(this,t,e))}var n=aa,i=ra;return e.type=function(t){return arguments.length?(n=V(t),e):n},e.size=function(t){return arguments.length?(i=V(t),e):i},e},k.map({circle:oa,cross:function(t){t=Math.sqrt(t/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(t){var t=Math.sqrt(t/(2*Fs)),e=t*Fs;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(t){t=Math.sqrt(t)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(t){var t=Math.sqrt(t/Ns),e=t*Ns/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(t){var t=Math.sqrt(t/Ns),e=t*Ns/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}})),Ns=(k.svg.symbolTypes=Ds.keys(),Math.sqrt(3)),Fs=Math.tan(30*P);r.transition=function(t){for(var e,n,i=zs||++Ys,r=ha(t),a=[],o=Xs||{time:Date.now(),ease:Li,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(e=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(n=c[l])&&da(n,l,r,i,o),e.push(n)}return ua(a,r,i)},r.interrupt=function(t){return this.each(null==t?Hs:sa(ha(t)))};var zs,Xs,Hs=sa(ha()),w=[],Ys=0,Bs=(w.call=r.call,w.empty=r.empty,w.node=r.node,w.size=r.size,k.transition=function(t,e){return t&&t.transition?zs?t.transition(e):t:k.selection().transition(t)},(k.transition.prototype=w).select=function(t){var e,n,i,r=this.id,a=this.namespace,o=[];t=ot(t);for(var s=-1,u=this.length;++s<u;){o.push(e=[]);for(var c=this[s],l=-1,h=c.length;++l<h;)(i=c[l])&&(n=t.call(i,i.__data__,l,s))?("__data__"in i&&(n.__data__=i.__data__),da(n,l,a,r,i[a][r]),e.push(n)):e.push(null)}return ua(o,a,r)},w.selectAll=function(t){var e,n,i,r,a,o=this.id,s=this.namespace,u=[];t=st(t);for(var c=-1,l=this.length;++c<l;)for(var h=this[c],d=-1,f=h.length;++d<f;)if(i=h[d]){a=i[s][o],n=t.call(i,i.__data__,d,c),u.push(e=[]);for(var g=-1,p=n.length;++g<p;)(r=n[g])&&da(r,g,s,o,a),e.push(r)}return ua(u,s,o)},w.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=mt(t));for(var r=0,a=this.length;r<a;r++){i.push(e=[]);for(var o,s=0,u=(o=this[r]).length;s<u;s++)(n=o[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return ua(i,this.namespace,this.id)},w.tween=function(e,n){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(e):vt(this,null==n?function(t){t[r][i].tween.remove(e)}:function(t){t[r][i].tween.set(e,n)})},w.attr=function(t,e){function i(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Ni:Si,o=k.ns.qualify(t);return ca(this,"attr."+t,e,o.local?function(n){return null==n?r:(n+="",function(){var e,t=this.getAttributeNS(o.space,o.local);return t!==n&&(e=a(t,n),function(t){this.setAttributeNS(o.space,o.local,e(t))})})}:function(n){return null==n?i:(n+="",function(){var e,t=this.getAttribute(o);return t!==n&&(e=a(t,n),function(t){this.setAttribute(o,e(t))})})})},w.attrTween=function(t,i){var r=k.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}})},w.style=function(i,t,r){function e(){this.style.removeProperty(i)}var n=arguments.length;if(n<3){if("string"!=typeof i){for(r in n<2&&(t=""),i)this.style(r,i[r],t);return this}r=""}return ca(this,"style."+i,t,function(n){return null==n?e:(n+="",function(){var e,t=N(this).getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=Si(t,n),function(t){this.style.setProperty(i,e(t),r)})})})},w.styleTween=function(i,r,a){return arguments.length<3&&(a=""),this.tween("style."+i,function(t,e){var n=r.call(this,t,e,N(this).getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),a)}})},w.text=function(t){return ca(this,"text",t,la)},w.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},w.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=k.ease.apply(k,arguments)),vt(this,function(t){t[i][n].ease=e}))},w.delay=function(i){var r=this.id,a=this.namespace;return arguments.length<1?this.node()[a][r].delay:vt(this,"function"==typeof i?function(t,e,n){t[a][r].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t[a][r].delay=i}))},w.duration=function(i){var r=this.id,a=this.namespace;return arguments.length<1?this.node()[a][r].duration:vt(this,"function"==typeof i?function(t,e,n){t[a][r].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t[a][r].duration=i}))},w.each=function(i,e){var r=this.id,a=this.namespace;if(arguments.length<2){var t=Xs,n=zs;try{zs=r,vt(this,function(t,e,n){Xs=t[a][r],i.call(t,t.__data__,e,n)})}finally{Xs=t,zs=n}}else vt(this,function(t){t=t[a][r];(t.event||(t.event=k.dispatch("start","end","interrupt"))).on(i,e)});return this},w.transition=function(){for(var t,e,n,i=this.id,r=++Ys,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(t=[]);for(var c,l=0,h=(c=this[s]).length;l<h;l++)(e=c[l])&&da(e,l,a,r,{time:(n=e[a][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ua(o,a,r)},k.svg.axis=function(){function n(t){t.each(function(){var t,e=k.select(this),n=this.__chart__||S,i=this.__chart__=S.copy(),r=null==L?i.ticks?i.ticks.apply(i,C):i.domain():L,a=null==w?i.tickFormat?i.tickFormat.apply(i,C):E:w,r=e.selectAll(".tick").data(r,i),o=r.enter().insert("g",".domain").attr("class","tick").style("opacity",O),s=k.transition(r.exit()).style("opacity",O).remove(),u=k.transition(r.order()).style("opacity",1),c=Math.max(A,0)+P,l=Ar(i),e=e.selectAll(".domain").data([0]),e=(e.enter().append("path").attr("class","domain"),k.transition(e));o.append("line"),o.append("text");var h,d,f,g,p,x,_=o.select("line"),y=u.select("line"),r=r.select("text").text(a),a=o.select("text"),m=u.select("text"),v="top"===b||"left"===b?-1:1;"bottom"===b||"top"===b?(t=fa,h="x",f="y",d="x2",g="y2",r.attr("dy",v<0?"0em":".71em").style("text-anchor","middle"),e.attr("d","M"+l[0]+","+v*T+"V0H"+l[1]+"V"+v*T)):(t=ga,h="y",f="x",d="y2",g="x2",r.attr("dy",".32em").style("text-anchor",v<0?"end":"start"),e.attr("d","M"+v*T+","+l[0]+"H0V"+l[1]+"H"+v*T)),_.attr(g,v*A),a.attr(f,v*c),y.attr(d,0).attr(g,v*A),m.attr(h,0).attr(f,v*c),i.rangeBand?(x=(p=i).rangeBand()/2,n=i=function(t){return p(t)+x}):n.rangeBand?n=i:s.call(t,i,n),o.call(t,n,i),u.call(t,i,i)})}var w,S=k.scale.linear(),b=Bs,A=6,T=6,P=3,C=[10],L=null;return n.scale=function(t){return arguments.length?(S=t,n):S},n.orient=function(t){return arguments.length?(b=t in js?t+"":Bs,n):b},n.ticks=function(){return arguments.length?(C=d(arguments),n):C},n.tickValues=function(t){return arguments.length?(L=t,n):L},n.tickFormat=function(t){return arguments.length?(w=t,n):w},n.tickSize=function(t){var e=arguments.length;return e?(A=+t,T=+arguments[e-1],n):A},n.innerTickSize=function(t){return arguments.length?(A=+t,n):A},n.outerTickSize=function(t){return arguments.length?(T=+t,n):T},n.tickPadding=function(t){return arguments.length?(P=+t,n):P},n.tickSubdivide=function(){return arguments.length&&n},n},"bottom"),js={top:1,right:1,bottom:1,left:1},Us=(k.svg.brush=function(){function _(t){t.each(function(){var t=k.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),e=t.selectAll(".background").data([0]),n=(e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move"),t.selectAll(".resize").data(a,E));n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Us[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",_.empty()?"none":null);var i,n=k.transition(t),t=k.transition(e);A&&(i=Ar(A),t.attr("x",i[0]).attr("width",i[1]-i[0]),m(n)),T&&(i=Ar(T),t.attr("y",i[0]).attr("height",i[1]-i[0]),v(n)),y(n)})}function y(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+P[+/e$/.test(t)]+","+C[+/^s/.test(t)]+")"})}function m(t){t.select(".extent").attr("x",P[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",P[1]-P[0])}function v(t){t.select(".extent").attr("y",C[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",C[1]-C[0])}function r(){function t(){var t=k.mouse(a),e=!1;r&&(t[0]+=r[0],t[1]+=r[1]),f||(k.event.altKey?(u=u||[(P[0]+P[1])/2,(C[0]+C[1])/2],p[0]=P[+(t[0]<u[0])],p[1]=C[+(t[1]<u[1])]):u=null),h&&n(t,A,0)&&(m(c),e=!0),d&&n(t,T,1)&&(v(c),e=!0),e&&(y(c),s({type:"brush",mode:f?"move":"resize"}))}function n(t,e,n){var i,e=Ar(e),r=e[0],e=e[1],a=p[n],o=n?C:P,s=o[1]-o[0];return f&&(r-=a,e-=s+a),t=(n?M:L)?Math.max(r,Math.min(e,t[n])):t[n],f?i=(t+=a)+s:(a=u?Math.max(r,Math.min(e,2*u[n]-t)):a)<t?(i=t,t=a):i=a,(o[0]!=t||o[1]!=i)&&(n?S=null:w=null,o[0]=t,o[1]=i,1)}function e(){t(),c.style("pointer-events","all").selectAll(".resize").style("display",_.empty()?"none":null),k.select("body").style("cursor",null),x.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),g(),s({type:"brushend"})}var u,i,r,a=this,o=k.select(k.event.target),s=b.of(a,arguments),c=k.select(a),l=o.datum(),h=!/^(n|s)$/.test(l)&&A,d=!/^(e|w)$/.test(l)&&T,f=o.classed("extent"),g=Tt(a),p=k.mouse(a),x=k.select(N(a)).on("keydown.brush",function(){32==k.event.keyCode&&(f||(u=null,p[0]-=P[1],p[1]-=C[1],f=2),nt())}).on("keyup.brush",function(){32==k.event.keyCode&&2==f&&(p[0]+=P[1],p[1]+=C[1],f=0,nt())});k.event.changedTouches?x.on("touchmove.brush",t).on("touchend.brush",e):x.on("mousemove.brush",t).on("mouseup.brush",e),c.interrupt().selectAll("*").interrupt(),f?(p[0]=P[0]-p[0],p[1]=C[0]-p[1]):l?(i=+/w$/.test(l),l=+/^n/.test(l),r=[P[1-i]-p[0],C[1-l]-p[1]],p[0]=P[i],p[1]=C[l]):k.event.altKey&&(u=p.slice()),c.style("pointer-events","none").selectAll(".resize").style("display",null),k.select("body").style("cursor",o.style("cursor")),s({type:"brushstart"}),t()}var w,S,b=rt(_,"brushstart","brush","brushend"),A=null,T=null,P=[0,0],C=[0,0],L=!0,M=!0,a=qs[0];return _.event=function(t){t.each(function(){var i=b.of(this,arguments),r={x:P,y:C,i:w,j:S},t=this.__chart__||r;this.__chart__=r,zs?k.select(this).transition().each("start.brush",function(){w=t.i,S=t.j,P=t.x,C=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=bi(P,r.x),n=bi(C,r.y);return w=S=null,function(t){P=r.x=e(t),C=r.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){w=r.i,S=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},_.x=function(t){return arguments.length?(a=qs[!(A=t)<<1|!T],_):A},_.y=function(t){return arguments.length?(a=qs[!A<<1|!(T=t)],_):T},_.clamp=function(t){return arguments.length?(A&&T?(L=!!t[0],M=!!t[1]):A?L=!!t:T&&(M=!!t),_):A&&T?[L,M]:A?L:T?M:null},_.extent=function(t){var e,n,i,r,a;return arguments.length?(A&&(e=t[0],n=t[1],T&&(e=e[0],n=n[0]),w=[e,n],A.invert&&(e=A(e),n=A(n)),n<e&&(a=e,e=n,n=a),e==P[0]&&n==P[1]||(P=[e,n])),T&&(i=t[0],r=t[1],A&&(i=i[1],r=r[1]),S=[i,r],T.invert&&(i=T(i),r=T(r)),r<i&&(a=i,i=r,r=a),i==C[0]&&r==C[1]||(C=[i,r])),_):(A&&(w?(e=w[0],n=w[1]):(e=P[0],n=P[1],A.invert&&(e=A.invert(e),n=A.invert(n)),n<e&&(a=e,e=n,n=a))),T&&(S?(i=S[0],r=S[1]):(i=C[0],r=C[1],T.invert&&(i=T.invert(i),r=T.invert(r)),r<i&&(a=i,i=r,r=a))),A&&T?[[e,i],[n,r]]:A?[e,n]:T&&[i,r])},_.clear=function(){return _.empty()||(P=[0,0],C=[0,0],w=S=null),_},_.empty=function(){return!!A&&P[0]==P[1]||!!T&&C[0]==C[1]},k.rebind(_,b,"on")},{n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),qs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],e=b.format=n.timeFormat,n=e.utc,Ws=n("%Y-%m-%dT%H:%M:%S.%LZ"),Qs=(e.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?pa:Ws,pa.parse=function(t){t=new Date(t);return isNaN(t)?null:t},pa.toString=Ws.toString,b.second=oe(function(t){return new L(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),b.seconds=b.second.range,b.seconds.utc=b.second.utc.range,b.minute=oe(function(t){return new L(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),b.minutes=b.minute.range,b.minutes.utc=b.minute.utc.range,b.hour=oe(function(t){var e=t.getTimezoneOffset()/60;return new L(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),b.hours=b.hour.range,b.hours.utc=b.hour.utc.range,b.month=oe(function(t){return(t=b.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),b.months=b.month.range,b.months.utc=b.month.utc.range,[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6]),Zs=[[b.second,1],[b.second,5],[b.second,15],[b.second,30],[b.minute,1],[b.minute,5],[b.minute,15],[b.minute,30],[b.hour,1],[b.hour,3],[b.hour,6],[b.hour,12],[b.day,1],[b.day,2],[b.week,1],[b.month,1],[b.month,3],[b.year,1]],Ks=e.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",qe]]),$s={range:function(t,e,n){return k.range(Math.ceil(t/n)*n,+e,n).map(_a)},floor:E,ceil:E},Js=(Zs.year=b.year,b.scale=function(){return xa(k.scale.linear(),Zs,Ks)},Zs.map(function(t){return[t[0].utc,t[1]]})),tu=n.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",qe]]);Js.year=b.year.utc,b.scale.utc=function(){return xa(k.scale.linear(),Js,tu)},k.text=Kt(function(t){return t.responseText}),k.json=function(t,e){return $t(t,"application/json",ya,e)},k.html=function(t,e){return $t(t,"text/html",ma,e)},k.xml=Kt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(this.d3=k):"object"==typeof module&&module.exports?module.exports=k:this.d3=k}();